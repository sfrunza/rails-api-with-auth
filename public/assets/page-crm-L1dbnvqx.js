import{j as e,e as Ds,r as f,f as Ms,g as Ls,h as Rs,i as $s,k as As,A as qs,l as Fs,F as Us,m as Os,n as Vs,o as Bs,p as rs,q as Qs,D as Gs,s as Hs,O as Ws,u as Ys,v as Ks,S as Js,w as Xs,x as Zs,z as j,y as V,t as I,B as ze,E as et,H as st,J as te,K as ae,L as ne,M as F,N as re,Q as ie,U as le,V as oe,W as ce,X as de,Y as ue,Z as me,_ as tt,$ as at,a0 as nt,a1 as rt,a2 as it,a3 as lt,a4 as ot,a5 as ct,a6 as dt,a7 as ut,a8 as mt,a9 as xt,aa as pt,ab as gt,ac as ht,ad as ft,ae as jt,af as vt,ag as yt,ah as bt,ai as wt,aj as Nt,ak as St,al as _t,b as Ct,am as kt,an as Tt,ao as It,ap as zt,aq as Pt,ar as Et,as as Dt,at as Mt}from"./vendor-Oy3yQvpb.js";import{b as Lt,N as Rt,O as Ye,L as Ke,c as Je,u as $t}from"./vendor-router-BOglXYhN.js";import{b as U,s as Be,a as Qe,c as At,r as qt,d as x,e as G,B as k,L as He,I as S,f as z,C as $,g as A,h as H,i as Ft,S as Pe,j as Ee,u as Ut,k as is,l as Ot,m as Te,n as Vt}from"./page-auth-CMfUnlWq.js";import{X as Bt,a as Qt,P as Gt,H as Ht,b as Wt,T as Xe,D as Yt,C as Kt,U as Jt,c as Xt,d as Ze,G as xe,e as De,f as ls,g as Me,h as Zt,I as ea,i as sa,j as os,k as ta,l as aa,m as na,n as ra}from"./vendor-ui-CTTbLvAw.js";import{f as se}from"./vendor-date-fns-BWtotJsy.js";import{A as ia,i as cs}from"./vendor-libphonenumber-js-1k7QeoIm.js";import{c as pe,a as O,b as la,u as oa,d as ca}from"./vendor-redux-BIS1gR2s.js";const da={contract:null,changes:{},isCompleted:{1:!1,2:!1,3:!1,4:!1,5:!1},isEnabled:{1:!0,2:!1,3:!1,4:!1,5:!1},activeStep:1},ds=pe({name:"contract",initialState:da,reducers:{setContract(s,t){var n,l,c,d,p,g,u;s.contract={...s.contract,...t.payload},s.isCompleted={1:!!((n=s.contract)!=null&&n.terms_signature),2:!!((l=s.contract)!=null&&l.declaration_value_signature),3:!!((c=s.contract)!=null&&c.start_time_signature)&&!!((d=s.contract)!=null&&d.end_time_signature),4:!!((p=s.contract)!=null&&p.payment_signature),5:!!((g=s.contract)!=null&&g.final_signature)&&!!((u=s.contract)!=null&&u.foreman_signature)},s.activeStep=Object.keys(s.isCompleted).findIndex(o=>!s.isCompleted[parseInt(o)])+1;const a={1:["terms_signature"],2:["declaration_value_signature"],3:["start_time_signature","end_time_signature"],4:["payment_signature"],5:["final_signature","foreman_signature"]},r=s.contract,i=o=>{const m=o-1;return m===0?!0:a[m].every(v=>!!r[v])};s.isEnabled=Object.keys(a).reduce((o,m)=>(o[parseInt(m)]=i(parseInt(m)),o),{})},updateContractField:(s,t)=>{s.changes={...s.changes,...t.payload}},resetChanges(s){s.changes={}},setActiveStep(s,t){s.activeStep=t.payload}}}),ua=ds.reducer,{setContract:Lr,setActiveStep:Rr,updateContractField:$r,resetChanges:Ar}=ds.actions,ma=new Date;ma.setHours(0,0,0,0);const xa={selectedDate:new Date().toISOString(),selectedRequest:null,open:!1,parklotRequests:null},us=pe({name:"parklot",initialState:xa,reducers:{setSelectedDate(s,t){s.selectedDate=t.payload},setSelectedRequest:(s,t)=>{s.selectedRequest=t.payload},setOpen:(s,t)=>{s.open=t.payload},setParklotRequests:(s,t)=>{s.parklotRequests=t.payload},updateParklotRequest:(s,t)=>{var a;s.parklotRequests=((a=s.parklotRequests)==null?void 0:a.map(r=>r.id===t.payload.id?{...r,...t.payload}:r))??null}}}),pa=us.reducer,{setSelectedDate:qr,setSelectedRequest:Fr,setOpen:Ur,setParklotRequests:Or,updateParklotRequest:Vr}=us.actions,ga={request:null,changes:{},hasChanges:!1,parklotRequests:null},ms=pe({name:"request",initialState:ga,reducers:{setRequest(s,t){s.request={...s.request,...t.payload}},updateField:(s,t)=>{s.changes={...s.changes,...t.payload},s.hasChanges=!!Object.keys(s.changes).length},resetChanges(s){s.changes={},s.hasChanges=!1},setParklotRequests:(s,t)=>{s.parklotRequests=t.payload}}}),ha=ms.reducer,{setRequest:fa,updateField:Br,resetChanges:Qr}=ms.actions,ja={filter:"pending",page:1},xs=pe({name:"auth",initialState:ja,reducers:{setFilter(s,t){s.filter=t.payload},setPage(s,t){s.page=t.payload}}}),{setFilter:va,setPage:ya}=xs.actions,ba=xs.reducer,wa={currentModal:null,open:!1},ps=pe({name:"modal",initialState:wa,reducers:{openModal:(s,t)=>{s.currentModal=t.payload,s.open=!0},closeModal:s=>{s.currentModal=null,s.open=!1}}}),{openModal:Gr,closeModal:Hr}=ps.actions,Na=ps.reducer,ve=O({reducerPath:"requestsApi",baseQuery:U,tagTypes:["Request","StatusCounts"],endpoints:s=>({getRequests:s.query({query:({filter:t,page:a})=>t&&a?`/requests?filter=${t}&page=${a}`:"/requests",providesTags(t){return t?[...t.requests.map(({id:a})=>({type:"Request",id:a})),{type:"Request",id:"LIST"}]:[{type:"Request",id:"LIST"}]}}),getStatusCounts:s.query({query:()=>"/requests/status_counts",providesTags:()=>[{type:"StatusCounts"}]}),getRequestById:s.query({query:({id:t})=>`/requests/${t}`,async onQueryStarted(t,{queryFulfilled:a,dispatch:r}){try{const i=await a;r(fa(i.data)),console.log("result",i)}catch(i){console.log("error",i)}},providesTags:(t,a,{id:r})=>[{type:"Request",id:r}]}),updateRequest:s.mutation({query:({id:t,data:a})=>({url:`/requests/${t}`,method:"PUT",body:{request:a}}),invalidatesTags:[{type:"Request",id:"LIST"},{type:"StatusCounts"}]}),createRequest:s.mutation({query:t=>({url:"/requests",method:"POST",body:t}),invalidatesTags:[{type:"Request",id:"LIST"}]}),createCustomer:s.mutation({query:t=>({url:"/users",method:"POST",body:{user:{...t,password:window.crypto.randomUUID()}}})}),updateCustomer:s.mutation({query:({id:t,data:a})=>({url:`/users/${t}`,method:"PUT",body:{user:a}})})})}),{useGetRequestsQuery:Sa,useGetStatusCountsQuery:_a,useCreateRequestMutation:Wr}=ve,ye=O({reducerPath:"servicesApi",baseQuery:U,tagTypes:["Service"],endpoints:s=>({getServices:s.query({query:()=>"/services",providesTags(t){return t?[...t.map(({id:a})=>({type:"Service",id:a})),{type:"Service",id:"LIST"}]:[{type:"Service",id:"LIST"}]}}),createService:s.mutation({query:t=>({url:"/services",method:"POST",body:{service:t}}),invalidatesTags:(t,a)=>a?[]:[{type:"Service",id:"LIST"}]}),bulkUpdateServices:s.mutation({query:t=>({url:"/services/bulk_update",method:"POST",body:{services:t.services}}),invalidatesTags:(t,a)=>a?[]:[{type:"Service",id:"LIST"}]}),deleteService:s.mutation({query:({id:t})=>({url:`/services/${t}`,method:"DELETE"}),invalidatesTags:(t,a)=>a?[]:[{type:"Service",id:"LIST"}]})})}),{useGetServicesQuery:Ca,useCreateServiceMutation:ka,useBulkUpdateServicesMutation:Ta,useDeleteServiceMutation:Ia}=ye,Z=O({reducerPath:"calendarRatesApi",baseQuery:U,tagTypes:["CalendarRate"],endpoints:s=>({getCalendarRates:s.query({query:()=>"/calendar_rates",providesTags:t=>t?[...Object.values(t).map(a=>({type:"CalendarRate",id:a.id})),{type:"CalendarRate",id:"LIST"}]:[{type:"CalendarRate",id:"LIST"}]}),updateCalendarRate:s.mutation({query:({id:t,newData:a})=>({url:`/calendar_rates/${t}`,method:"PUT",body:{calendar_rate:a}}),invalidatesTags:(t,a,{id:r})=>a?[]:[{type:"CalendarRate",id:r}]})})}),{useGetCalendarRatesQuery:za,useUpdateCalendarRateMutation:Pa}=Z,be=O({reducerPath:"ratesApi",baseQuery:U,tagTypes:["Rate","CalendarRate"],endpoints:s=>({getRates:s.query({query:()=>"/rates",providesTags(t){return t?[...t.map(({id:a})=>({type:"Rate",id:a})),{type:"Rate",id:"LIST"}]:[{type:"Rate",id:"LIST"}]}}),bulkUpdateRates:s.mutation({query:t=>({url:"/rates/bulk_update",method:"POST",body:{rates:t.rates}}),invalidatesTags:(t,a)=>a?[]:[{type:"Rate",id:"LIST"}],async onQueryStarted(t,{dispatch:a,queryFulfilled:r}){try{await r,a(Z.util.invalidateTags([{type:"CalendarRate",id:"LIST"}]))}catch(i){console.log("error",i)}}})})}),{useGetRatesQuery:Le,useBulkUpdateRatesMutation:Ea}=be,we=O({reducerPath:"trucksApi",baseQuery:U,tagTypes:["Truck"],endpoints:s=>({getTrucks:s.query({query:()=>"/trucks",providesTags(t){return t?[...t.map(({id:a})=>({type:"Truck",id:a})),{type:"Truck",id:"LIST"}]:[{type:"Truck",id:"LIST"}]}}),createTruck:s.mutation({query:t=>({url:"/trucks",method:"POST",body:{truck:t}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),bulkUpdateTrucks:s.mutation({query:t=>({url:"/trucks/bulk_update",method:"POST",body:{trucks:t.trucks}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),deleteTruck:s.mutation({query:({id:t})=>({url:`/trucks/${t}`,method:"DELETE"}),invalidatesTags:[{type:"Truck",id:"LIST"}]})})}),{useGetTrucksQuery:Da,useCreateTruckMutation:Ma,useBulkUpdateTrucksMutation:La}=we,Ne=O({reducerPath:"packingsApi",baseQuery:U,tagTypes:["Packing"],endpoints:s=>({getPackings:s.query({query:()=>"/packings",providesTags(t){return t?[...t.map(({id:a})=>({type:"Packing",id:a})),{type:"Packing",id:"LIST"}]:[{type:"Packing",id:"LIST"}]}}),updatePacking:s.mutation({query:({id:t,...a})=>({url:`/packings/${t}`,method:"PATCH",body:{packing:a}}),invalidatesTags:(t,a)=>a?[]:[{type:"Packing",id:"LIST"}]}),createPacking:s.mutation({query:t=>({url:"/packings",method:"POST",body:{packing:t}}),invalidatesTags:(t,a)=>a?[]:[{type:"Packing",id:"LIST"}]}),bulkUpdatePackings:s.mutation({query:t=>({url:"/packings/bulk_update",method:"POST",body:{packings:t.packings}}),invalidatesTags:(t,a)=>a?[]:[{type:"Packing",id:"LIST"}]}),deletePacking:s.mutation({query:({id:t})=>({url:`/packings/${t}`,method:"DELETE"}),invalidatesTags:(t,a)=>a?[]:[{type:"Packing",id:"LIST"}]})})}),{useGetPackingsQuery:Ra,useCreatePackingMutation:$a,useUpdatePackingMutation:Aa,useBulkUpdatePackingsMutation:qa,useDeletePackingMutation:Fa}=Ne,Se=O({reducerPath:"extraServicesApi",baseQuery:U,tagTypes:["ExtraService"],endpoints:s=>({getExtraServices:s.query({query:()=>"/extra_services",providesTags(t){return t?[...t.map(({id:a})=>({type:"ExtraService",id:a})),{type:"ExtraService",id:"LIST"}]:[{type:"ExtraService",id:"LIST"}]}}),createExtraService:s.mutation({query:t=>({url:"/extra_services",method:"POST",body:{extra_service:t}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),bulkUpdateExtraServices:s.mutation({query:t=>({url:"/extra_services/bulk_update",method:"POST",body:{extra_services:t.extra_services}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),deleteExtraService:s.mutation({query:({id:t})=>({url:`/extra_services/${t}`,method:"DELETE"}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]})})}),{useGetExtraServicesQuery:Ua,useCreateExtraServiceMutation:Oa,useBulkUpdateExtraServicesMutation:Va,useDeleteExtraServiceMutation:Ba}=Se,_e=O({reducerPath:"employeesApi",baseQuery:U,tagTypes:["Employee"],endpoints:s=>({getEmployees:s.query({query:()=>"/employees",providesTags(t){return t?[...t.map(({id:a})=>({type:"Employee",id:a})),{type:"Employee",id:"LIST"}]:[{type:"Employee",id:"LIST"}]}}),getEmployeeById:s.query({query:({id:t})=>`/employees/${t}`,providesTags:(t,a,{id:r})=>t?[{type:"Employee",id:r}]:[{type:"Employee",id:"LIST"}]}),updateEmployee:s.mutation({query:({id:t,data:a})=>({url:`/employees/${t}`,method:"PUT",body:{employee:a}}),invalidatesTags:(t,a,{id:r})=>a?[]:[{type:"Employee",id:r},{type:"Employee",id:"LIST"}]}),createEmployee:s.mutation({query:({data:t})=>({url:"/employees",method:"POST",body:{employee:t}}),invalidatesTags:(t,a)=>a?[]:[{type:"Employee",id:"LIST"}]})})}),{useGetEmployeesQuery:Qa,useGetEmployeeByIdQuery:Ga,useUpdateEmployeeMutation:Ha,useCreateEmployeeMutation:Wa}=_e,Ce=O({reducerPath:"moveSizesApi",baseQuery:U,tagTypes:["MoveSize"],endpoints:s=>({getMoveSizes:s.query({query:()=>"/move_sizes",providesTags(t){return t?[...t.map(({id:a})=>({type:"MoveSize",id:a})),{type:"MoveSize",id:"LIST"}]:[{type:"MoveSize",id:"LIST"}]}}),createMoveSize:s.mutation({query:t=>{var r,i,n,l;console.log("moveSize",t);const a=new FormData;return a.append("move_size[name]",t.name??""),a.append("move_size[description]",t.description??""),a.append("move_size[dispersion]",((r=t.dispersion)==null?void 0:r.toString())??""),a.append("move_size[truck_count]",((i=t.truck_count)==null?void 0:i.toString())??""),a.append("move_size[volume]",((n=t.volume)==null?void 0:n.toString())??""),a.append("move_size[weight]",((l=t.weight)==null?void 0:l.toString())??""),a.append("move_size[crew_size_settings]",JSON.stringify(t.crew_size_settings)),t.image&&a.append("move_size[image]",t.image),{url:"/move_sizes",method:"POST",body:a}},invalidatesTags:(t,a)=>a?[]:[{type:"MoveSize",id:"LIST"}]}),updateMoveSize:s.mutation({query:({id:t,...a})=>{var i,n,l,c;console.log("moveSize",a);const r=new FormData;return r.append("move_size[name]",a.name??""),r.append("move_size[description]",a.description??""),r.append("move_size[dispersion]",((i=a.dispersion)==null?void 0:i.toString())??""),r.append("move_size[truck_count]",((n=a.truck_count)==null?void 0:n.toString())??""),r.append("move_size[volume]",((l=a.volume)==null?void 0:l.toString())??""),r.append("move_size[weight]",((c=a.weight)==null?void 0:c.toString())??""),r.append("move_size[crew_size_settings]",JSON.stringify(a.crew_size_settings)),a.image&&r.append("move_size[image]",a.image),{url:`/move_sizes/${t}`,method:"PATCH",body:r}},invalidatesTags:(t,a)=>a?[]:[{type:"MoveSize",id:"LIST"}]}),bulkUpdateMoveSizes:s.mutation({query:t=>({url:"/move_sizes/bulk_update",method:"POST",body:{move_sizes:t.moveSizes}}),invalidatesTags:(t,a)=>a?[]:[{type:"MoveSize",id:"LIST"}]}),deleteMoveSize:s.mutation({query:({id:t})=>({url:`/move_sizes/${t}`,method:"DELETE"}),invalidatesTags:(t,a)=>a?[]:[{type:"MoveSize",id:"LIST"}]})})}),{useGetMoveSizesQuery:Ya,useCreateMoveSizeMutation:Ka,useUpdateMoveSizeMutation:Ja,useBulkUpdateMoveSizesMutation:Xa,useDeleteMoveSizeMutation:Za}=Ce,ke=O({reducerPath:"entranceTypesApi",baseQuery:U,tagTypes:["EntranceType"],endpoints:s=>({getEntranceTypes:s.query({query:()=>"/entrance_types",providesTags(t){return t?[...t.map(({id:a})=>({type:"EntranceType",id:a})),{type:"EntranceType",id:"LIST"}]:[{type:"EntranceType",id:"LIST"}]}}),createEntranceType:s.mutation({query:t=>({url:"/entrance_types",method:"POST",body:{entrance_type:t}}),invalidatesTags:(t,a)=>a?[]:[{type:"EntranceType",id:"LIST"}]}),bulkUpdateEntranceTypes:s.mutation({query:t=>({url:"/entrance_types/bulk_update",method:"POST",body:{entrance_types:t.entranceTypes}}),invalidatesTags:(t,a)=>a?[]:[{type:"EntranceType",id:"LIST"}]}),deleteEntranceType:s.mutation({query:({id:t})=>({url:`/entrance_types/${t}`,method:"DELETE"}),invalidatesTags:(t,a)=>a?[]:[{type:"EntranceType",id:"LIST"}]})})}),{useGetEntranceTypesQuery:es,useCreateEntranceTypeMutation:en,useBulkUpdateEntranceTypesMutation:sn,useDeleteEntranceTypeMutation:tn}=ke,Yr=la({reducer:{auth:At,contract:ua,parklot:pa,request:ha,requests:ba,modal:Na,[Qe.reducerPath]:Qe.reducer,[ve.reducerPath]:ve.reducer,[ye.reducerPath]:ye.reducer,[Z.reducerPath]:Z.reducer,[be.reducerPath]:be.reducer,[we.reducerPath]:we.reducer,[Ne.reducerPath]:Ne.reducer,[Se.reducerPath]:Se.reducer,[_e.reducerPath]:_e.reducer,[Be.reducerPath]:Be.reducer,[Ce.reducerPath]:Ce.reducer,[ke.reducerPath]:ke.reducer},middleware:s=>s().concat(qt,Qe.middleware,ve.middleware,ye.middleware,Z.middleware,be.middleware,we.middleware,Ne.middleware,Se.middleware,_e.middleware,Be.middleware,Ce.middleware,ke.middleware)}),an=oa.withTypes(),nn=ca.withTypes();function q({className:s,orientation:t="horizontal",decorative:a=!0,...r}){return e.jsx(Ds,{"data-slot":"separator-root",decorative:a,orientation:t,className:x("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...r})}const Ge=768;function Re(){const[s,t]=f.useState(void 0);return f.useEffect(()=>{const a=window.matchMedia(`(max-width: ${Ge-1}px)`),r=()=>{t(window.innerWidth<Ge)};return a.addEventListener("change",r),t(window.innerWidth<Ge),()=>a.removeEventListener("change",r)},[]),!!s}function L({className:s,...t}){return e.jsx("div",{"data-slot":"skeleton",className:x("bg-primary/10 animate-pulse rounded-md",s),...t})}function gs({delayDuration:s=0,...t}){return e.jsx(Ms,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function rn({...s}){return e.jsx(gs,{children:e.jsx(Ls,{"data-slot":"tooltip",...s})})}function ln({...s}){return e.jsx(Rs,{"data-slot":"tooltip-trigger",...s})}function on({className:s,sideOffset:t=4,children:a,...r}){return e.jsx($s,{children:e.jsxs(As,{"data-slot":"tooltip-content",sideOffset:t,className:x("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",s),...r,children:[a,e.jsx(qs,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function cn({className:s,...t}){return e.jsx(Fs,{"data-slot":"avatar",className:x("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...t})}function dn({className:s,...t}){return e.jsx(Us,{"data-slot":"avatar-fallback",className:x("bg-muted flex size-full items-center justify-center rounded-full",s),...t})}function Y({...s}){return e.jsx(Os,{"data-slot":"dialog",...s})}function ge({...s}){return e.jsx(Vs,{"data-slot":"dialog-trigger",...s})}function un({...s}){return e.jsx(Hs,{"data-slot":"dialog-portal",...s})}function $e({...s}){return e.jsx(rs,{"data-slot":"dialog-close",className:x(G({variant:"outline"}),"mt-2 sm:mt-0"),...s})}function mn({className:s,...t}){return e.jsx(Ws,{"data-slot":"dialog-overlay",className:x("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function K({className:s,children:t,...a}){return e.jsxs(un,{"data-slot":"dialog-portal",children:[e.jsx(mn,{}),e.jsxs(Bs,{"data-slot":"dialog-content",className:x("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a,children:[t,e.jsxs(rs,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Bt,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function J({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:x("flex flex-col gap-2 text-center sm:text-left",s),...t})}function Ae({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-footer",className:x("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function X({className:s,...t}){return e.jsx(Qs,{"data-slot":"dialog-title",className:x("text-lg leading-none font-semibold",s),...t})}function he({className:s,...t}){return e.jsx(Gs,{"data-slot":"dialog-description",className:x("text-muted-foreground text-sm",s),...t})}function qe({children:s,className:t}){return e.jsx("div",{className:x("overflow-y-auto pb-6",t),children:s})}const xn=[{name:"Company",href:"company",icon:Qt},{name:"Moving Services",href:"services",icon:Gt},{name:"Extra Services",href:"extra-services",icon:Ht},{name:"Packing",href:"packing",icon:Wt},{name:"Trucks",href:"trucks",icon:Xe,prefetchUrl:"/trucks"},{name:"Rates",href:"rates",icon:Yt},{name:"Calendar Rates",href:"calendar-rates",icon:Kt},{name:"Department",href:"department",icon:Jt},{name:"Calculator",href:"calculator",icon:Xt}];function pn(){const{pathname:s}=Lt();return e.jsxs(qe,{className:x("hidden lg:block lg:border-r",{block:s==="/crm/settings"}),children:[e.jsx("h2",{className:"px-6 pt-4 text-lg font-semibold",children:"Settings"}),e.jsx("div",{className:"space-y-2 p-4",children:xn.map((t,a)=>e.jsxs(Rt,{to:t.href,className:({isActive:r})=>x(G({variant:r?"secondary":"ghost",className:"w-full justify-start text-left"})),children:[e.jsx(t.icon,{className:"size-4"}),t.name]},a))})]})}function Kr(){return e.jsxs("div",{className:"grid h-full lg:grid-cols-[16rem_1fr]",children:[e.jsx(pn,{}),e.jsx(Ye,{})]})}function B({children:s,title:t,className:a}){return e.jsxs(qe,{className:"space-y-4 bg-muted dark:bg-background",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(k,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(Ke,{to:"/crm/settings",children:e.jsx(Ze,{})})})}),e.jsx("h3",{className:"text-lg font-semibold",children:t})]}),e.jsx("div",{className:x("overflow-y-auto p-4",a),children:s})]})}const Q=Ys,hs=f.createContext({}),b=({...s})=>e.jsx(hs.Provider,{value:{name:s.name},children:e.jsx(Ks,{...s})}),Fe=()=>{const s=f.useContext(hs),t=f.useContext(fs),{getFieldState:a}=Xs(),r=Zs({name:s.name}),i=a(s.name,r);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:n}=t;return{id:n,name:s.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...i}},fs=f.createContext({});function w({className:s,...t}){const a=f.useId();return e.jsx(fs.Provider,{value:{id:a},children:e.jsx("div",{"data-slot":"form-item",className:x("grid gap-2",s),...t})})}function C({className:s,...t}){const{error:a,formItemId:r}=Fe();return e.jsx(He,{"data-slot":"form-label","data-error":!!a,className:x("data-[error=true]:text-destructive-foreground",s),htmlFor:r,...t})}function N({...s}){const{error:t,formItemId:a,formDescriptionId:r,formMessageId:i}=Fe();return e.jsx(Js,{"data-slot":"form-control",id:a,"aria-describedby":t?`${r} ${i}`:`${r}`,"aria-invalid":!!t,...s})}function gn({className:s,...t}){const{formDescriptionId:a}=Fe();return e.jsx("p",{"data-slot":"form-description",id:a,className:x("text-muted-foreground text-sm",s),...t})}function R({className:s,...t}){const{error:a,formMessageId:r}=Fe(),i=a?String(a==null?void 0:a.message):t.children;return i?e.jsx("p",{"data-slot":"form-message",id:r,className:x("text-destructive-foreground text-sm",s),...t,children:i}):null}const hn=j.object({name:j.string().min(5,{message:"Service name must be at least 5 characters"})});function fn(){const[s,{isLoading:t}]=ka(),a=V({resolver:ze(hn),reValidateMode:"onChange",defaultValues:{name:""}});async function r(i){await s(i).unwrap(),I.success(`${i.name} successfully added`),a.reset()}return e.jsx("div",{children:e.jsx(Q,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(r),className:"flex gap-4",children:[e.jsx(b,{control:a.control,name:"name",render:({field:i})=>e.jsxs(w,{className:"w-full",children:[e.jsx(N,{children:e.jsx(S,{...i,placeholder:"Service name",autoComplete:"off",className:"bg-accent"})}),e.jsx(R,{})]})}),e.jsx(z,{loading:t,disabled:t,children:"Add service"})]})})})}function fe({className:s,...t}){return e.jsx(et,{"data-slot":"switch",className:x("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(st,{"data-slot":"switch-thumb",className:x("bg-background pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function jn({id:s,item:t,onEnabledChange:a}){const[r,{isLoading:i}]=Ia(),{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:g}=te({id:s}),u={transform:ae.Transform.toString(d),transition:p,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{ref:c,style:u,className:x("grid grid-cols-[max-content_1fr_max-content_max-content] border rounded-md items-center gap-2 p-2",{"bg-background shadow-lg":g}),children:[e.jsx(k,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...n,...l,children:e.jsx(xe,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:t.name})}),e.jsx(fe,{checked:t.enabled,onCheckedChange:o=>{a(t.id,o)}}),t.is_default?e.jsx("div",{className:"size-9"}):e.jsx(z,{loading:i,disabled:i,variant:"ghost",size:"icon",className:"hover:text-red-600",onClick:async()=>{await r({id:t.id}).unwrap(),I.success(`${t.name} successfully deleted`)},children:e.jsx(De,{})})]})}function vn(){const{data:s,isLoading:t,isError:a}=Ca(),[r,{isLoading:i}]=Ta(),[n,l]=f.useState([]),[c,d]=f.useState(!1),p=ne(F(me),F(ue,{coordinateGetter:de}));f.useEffect(()=>{s&&l(s)},[s]);function g(o){const{active:m,over:h}=o;if(h&&m.id!==h.id){const v=n.findIndex(_=>_.id===m.id),M=n.findIndex(_=>_.id===h.id),T=ce(n,v,M).map((_,D)=>({..._,index:D}));l(T),d(!0)}}function u(o,m){l(h=>h.map(v=>v.id===o?{...v,enabled:m}:v)),d(!0)}return a?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[t&&e.jsx("div",{className:"space-y-2",children:Array.from({length:8}).map((o,m)=>e.jsx(L,{className:"h-13.5 w-full"},m))}),s&&e.jsx(re,{sensors:p,collisionDetection:le,onDragEnd:g,modifiers:[ie],children:e.jsx(oe,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(o=>e.jsx(jn,{id:o.id,item:o,onEnabledChange:u},o.id))})})}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({services:n}).unwrap(),I.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}function Jr(){return e.jsx(B,{title:"Moving Services",children:e.jsx($,{className:"max-w-xl",children:e.jsxs(A,{className:"space-y-6",children:[e.jsx(fn,{}),e.jsx(vn,{})]})})})}function Ue({className:s,children:t,...a}){return e.jsxs(tt,{"data-slot":"scroll-area",className:x("relative",s),...a,children:[e.jsx(at,{"data-slot":"scroll-area-viewport",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1",children:t}),e.jsx(je,{}),e.jsx(nt,{})]})}function je({className:s,orientation:t="vertical",...a}){return e.jsx(rt,{"data-slot":"scroll-area-scrollbar",orientation:t,className:x("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",s),...a,children:e.jsx(it,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function yn(s){return(s/100).toString()}function ee(s){const{value:t,onValueChange:a,className:r,...i}=s,[n,l]=f.useState("0");return f.useEffect(()=>{l(yn(t))},[t]),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(S,{pattern:"[0-9]+",inputMode:"numeric",value:n,onChange:c=>{const d=c.target.value.replace(/[^0-9.]/g,"");if(/^\d*\.?\d{0,2}$/.test(d)){l(d);const p=parseFloat(d)||0;a(p*100)}},className:x("pl-4",r),...i}),e.jsx("span",{className:"absolute left-2 flex bg-transparent text-sm",children:"$"})]})}function bn({id:s,item:t,onChange:a}){const[r,{isLoading:i}]=Ba(),{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:g}=te({id:s}),u={transform:ae.Transform.toString(d),transition:p,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{ref:c,style:u,className:x("grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 p-2",{"bg-background shadow-lg":g}),children:[e.jsx(k,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...n,...l,children:e.jsx(xe,{})}),e.jsx(S,{value:t.name,onChange:o=>{const m=o.target.value;a(t.id,{name:m})},name:t.name}),e.jsx(ee,{value:t.price,onValueChange:o=>{a(t.id,{price:o})}}),e.jsx(fe,{checked:t.enabled,onCheckedChange:o=>{a(t.id,{enabled:o})}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(z,{disabled:i,loading:i,variant:"secondary",onClick:async()=>{await r({id:t.id}).unwrap(),I.success(`${t.name} successfully deleted`)},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"size-4"}),"Delete"]})})})]})}function wn(){const{data:s,isLoading:t,isError:a}=Ua(),[r,{isLoading:i}]=Va(),[n,l]=f.useState([]),[c,d]=f.useState(!1),p=ne(F(me),F(ue,{coordinateGetter:de}));f.useEffect(()=>{s&&l(s)},[s]);function g(o){const{active:m,over:h}=o;if(h&&m.id!==h.id){const v=n.findIndex(_=>_.id===m.id),M=n.findIndex(_=>_.id===h.id),T=ce(n,v,M).map((_,D)=>({..._,index:D}));l(T),d(!0)}}function u(o,m){l(h=>h.map(v=>v.id===o?{...v,...m}:v)),d(!0)}return a?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch extra services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(Ue,{className:"w-full",children:[e.jsxs("div",{className:"mb-4 grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 text-sm font-medium text-muted-foreground",children:[e.jsx("p",{className:"size-9"}),e.jsx("p",{children:"Service name"}),e.jsx("p",{children:"Service cost, $"}),e.jsx("p",{children:"Enable"}),e.jsx("p",{})]}),e.jsx(q,{}),t&&e.jsx("div",{className:"space-y-2 pt-4",children:Array.from({length:5}).map((o,m)=>e.jsx(L,{className:"h-13 w-full"},m))}),s&&e.jsx(re,{sensors:p,collisionDetection:le,onDragEnd:g,modifiers:[ie],children:e.jsx(oe,{items:n,children:e.jsx("div",{className:"pt-4 min-w-[700px] space-y-2",children:n.map(o=>e.jsx(bn,{id:o.id,item:o,onChange:u},o.id))})})}),e.jsx(je,{orientation:"horizontal"})]}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({extra_services:n}).unwrap(),d(!1),I.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}j.object({name:j.string().min(5),price:j.number().min(1),enabled:j.boolean()});function Nn(){const[s,{isLoading:t}]=Oa(),[a,r]=f.useState(!1),i=V({defaultValues:{name:"",price:0,enabled:!0}});function n(){i.reset(),r(c=>!c)}async function l(c){await s(c).unwrap(),I.success(`${c.name} successfully added`),i.reset(),n()}return e.jsxs(Y,{open:a,onOpenChange:n,children:[e.jsx(ge,{asChild:!0,className:"ml-auto",children:e.jsx(k,{size:"icon",children:e.jsx(ls,{})})}),e.jsxs(K,{children:[e.jsxs(J,{children:[e.jsx(X,{children:"Add extra service"}),e.jsx(he,{className:"hidden"})]}),e.jsx(Q,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsx(b,{control:i.control,name:"name",render:({field:c})=>e.jsxs(w,{children:[e.jsx(C,{children:"Name"}),e.jsx(N,{children:e.jsx(S,{placeholder:"Service name",...c})})]})}),e.jsx(b,{control:i.control,name:"price",render:({field:c})=>e.jsxs(w,{children:[e.jsx(C,{children:"Price"}),e.jsx(N,{children:e.jsx(ee,{name:"price",value:c.value,onValueChange:d=>{i.setValue("price",d)}})})]})}),e.jsxs(Ae,{children:[e.jsx($e,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:t,disabled:t,children:"Add service"})]})]})})]})]})}function Xr(){return e.jsx(B,{title:"Extra Services",children:e.jsxs($,{className:"max-w-4xl gap-0",children:[e.jsx(H,{className:"flex flex-row items-center",children:e.jsx(Nn,{})}),e.jsx(A,{children:e.jsx(wn,{})})]})})}function js({className:s,...t}){return e.jsx("textarea",{"data-slot":"textarea",className:x("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}j.object({name:j.string(),description:j.string(),labor_increase:j.number()});function vs({data:s}){const[t,{isLoading:a}]=$a(),[r,{isLoading:i}]=Aa(),[n,l]=f.useState(!1),c=Re(),d=!!s,p=V({defaultValues:{name:"",description:"",labor_increase:0}});f.useEffect(()=>{s&&p.reset(s)},[s]);function g(){p.reset(),l(o=>!o)}async function u(o){d?(await r({id:s.id,...o}).unwrap(),I.success("Packing successfully updated")):(await t(o).unwrap(),I.success("Packing successfully added")),p.reset(),g()}return e.jsxs(Y,{open:n,onOpenChange:g,children:[e.jsx(ge,{asChild:!0,className:`${d?null:"ml-auto"}`,children:d?e.jsxs(k,{variant:"outline",className:"text-primary hover:text-primary",size:c?"icon":"default",children:[e.jsx(Me,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(k,{size:"icon",children:e.jsx(ls,{})})}),e.jsxs(K,{children:[e.jsxs(J,{children:[e.jsxs(X,{children:[d?"Edit":"Add"," packing service"]}),e.jsx(he,{className:"hidden"})]}),e.jsx(Q,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(u),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-280px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(b,{control:p.control,name:"name",render:({field:o})=>e.jsxs(w,{children:[e.jsx(C,{children:"Name"}),e.jsx(N,{children:e.jsx(S,{...o})})]})}),e.jsx(b,{control:p.control,name:"description",render:({field:o})=>e.jsxs(w,{children:[e.jsx(C,{children:"Description"}),e.jsx(N,{children:e.jsx(js,{rows:16,...o})})]})}),e.jsx(b,{control:p.control,name:"labor_increase",render:({field:o})=>e.jsxs(w,{children:[e.jsx(C,{children:"Labor increse (%)"}),e.jsx(N,{children:e.jsx(S,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...o})})]})})]}),e.jsxs(Ae,{children:[e.jsx($e,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:a||i,disabled:a||i,children:d?"Save changes":"Add packing"})]})]})})]})]})}function Sn({item:s}){const t=Re(),[a,{isLoading:r}]=Fa(),i=s.is_default,{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:g}=te({id:s.id}),u={transform:ae.Transform.toString(d),transition:p,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{ref:i?null:c,style:u,className:x("grid grid-cols-[max-content_1fr_auto_auto] border rounded-md items-center gap-2 p-4",{"bg-background shadow-lg":g}),children:[e.jsx(k,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",disabled:i,...i?{}:n,...i?{}:l,children:e.jsx(xe,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:s.name})}),e.jsx(vs,{data:s}),i?e.jsx(k,{variant:"ghost",disabled:!0,size:t?"icon":"default",children:e.jsx("span",{className:"hidden md:inline-flex ml-4",children:"Default"})}):null,!i&&e.jsx(z,{disabled:r,loading:r,variant:"secondary",onClick:async()=>{await a({id:s.id}).unwrap(),I.success(`${s.name} successfully deleted`)},size:t?"icon":"default",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(De,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Delete"})]})})]})}function _n(){const{data:s,isLoading:t,isError:a}=Ra(),[r,{isLoading:i}]=qa(),[n,l]=f.useState([]),[c,d]=f.useState(!1),p=ne(F(me),F(ue,{coordinateGetter:de}));f.useEffect(()=>{s&&l(s)},[s]);function g(u){const{active:o,over:m}=u;if(m&&o.id!==m.id){const h=n.findIndex(y=>y.id===o.id),v=n.findIndex(y=>y.id===m.id),M=ce(n,h,v).map((y,T)=>({...y,index:T}));l(M),d(!0)}}return a?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch packings"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[t&&e.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((u,o)=>e.jsx(L,{className:"h-17.5 w-full"},o))}),s&&e.jsx(re,{sensors:p,collisionDetection:le,onDragEnd:g,modifiers:[ie],children:e.jsx(oe,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(u=>e.jsx(Sn,{item:u},u.id))})})}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({packings:n}).unwrap(),d(!1),I.success("Changes saved")},children:"Save changes"})]})})]})}function Zr(){return e.jsx(B,{title:"Packing Services",children:e.jsxs($,{className:"max-w-2xl",children:[e.jsx(H,{children:e.jsx(vs,{})}),e.jsx(A,{children:e.jsx(_n,{})})]})})}const Cn=j.object({name:j.string().min(2,{message:"Truck name must be at least 2 characters"})});function kn(){const[s,{isLoading:t}]=Ma(),a=V({resolver:ze(Cn),reValidateMode:"onChange",defaultValues:{name:""}});async function r(i){await s(i).unwrap(),I.success(`${i.name} successfully added`),a.reset()}return e.jsx(Q,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(r),className:"flex gap-4",children:[e.jsx(b,{control:a.control,name:"name",render:({field:i})=>e.jsxs(w,{className:"w-full",children:[e.jsx(N,{children:e.jsx(S,{...i,placeholder:"Truck name",autoComplete:"off",className:"bg-accent"})}),e.jsx(R,{})]})}),e.jsx(z,{disabled:t,loading:t,children:"Add truck"})]})})}function Tn(){const{data:s,isLoading:t,isError:a}=Da(),[r,{isLoading:i}]=La(),[n,l]=f.useState([]),[c,d]=f.useState(!1);f.useEffect(()=>{s&&l(s)},[s]);async function p(){await r({trucks:n}).unwrap(),d(!1),I.success("Changes saved")}function g(u,o,m){const h=n.map(v=>v.id===u.id?{...v,[o]:m}:v);l(h),d(!0)}return a?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch trucks"})}):e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[t&&e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((u,o)=>e.jsx(L,{className:"h-9 w-full"},o))}),e.jsx("div",{className:"space-y-4",children:n==null?void 0:n.map((u,o)=>e.jsxs("div",{className:"grid grid-cols-[6rem_3rem_1fr] gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(Xe,{className:"size-5"}),e.jsxs("span",{children:["Truck ",o+1]})]}),e.jsx(fe,{checked:u.is_active,onCheckedChange:m=>{g(u,"is_active",m)}}),e.jsx(S,{value:u.name,onChange:m=>{const h=m.target.value;g(u,"name",h)}})]},u.id))}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:p,children:"Save changes"})]})})})]})}function ei(){return e.jsx(B,{title:"Trucks",children:e.jsx($,{className:"max-w-xl",children:e.jsxs(A,{className:"space-y-6",children:[e.jsx(kn,{}),e.jsx(Tn,{})]})})})}function W(s,t={}){s||(s=0);const{currency:a="USD",notation:r="standard"}=t,i=typeof s=="string"?parseFloat(s)/100:s/100;return new Intl.NumberFormat("en-US",{style:"currency",currency:a,notation:r,maximumFractionDigits:2}).format(i)}function Oe(s){s=s.replace(/^#/,""),s.length===3&&(s=s.split("").map(n=>n+n).join(""));const t=parseInt(s,16),a=t>>16&255,r=t>>8&255,i=t&255;return`${a}, ${r}, ${i}`}function In(s){if(!s)return"To be determined";const{min:t,max:a}=s;if(t==null||a==null)return"To be determined";const r=W(t),i=W(a);return t===a?i:a===0?r:`${r} - ${i}`}const ss="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function si(){const{data:s,isLoading:t}=Le(),[a,{isLoading:r}]=Ea(),[i,n]=f.useState([]),[l,c]=f.useState(!1),[d,p]=f.useState(null);f.useEffect(()=>{s&&n(s)},[s]);function g(u){const o=i.map(m=>m.id===u.id?u:m);n(o),c(!0)}return e.jsx(B,{title:"Rates",children:e.jsxs($,{children:[e.jsx(A,{className:"space-y-4",children:e.jsxs(Ue,{className:"w-full",children:[e.jsxs("div",{className:x("mb-4 text-muted-foreground",ss),children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:"2 movers"}),e.jsx("p",{children:"3 movers"}),e.jsx("p",{children:"4 movers"}),e.jsx("p",{children:"Extra mover"}),e.jsx("p",{children:"Extra truck"}),e.jsx("p",{children:"On/Off"}),e.jsx("p",{})]}),e.jsx(q,{}),e.jsxs("div",{className:"min-w-[900px] divide-y",children:[t&&e.jsx(zn,{}),i==null?void 0:i.map((u,o)=>e.jsxs("div",{className:x("py-4",ss),children:[d===o?e.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[e.jsx(S,{value:u.name,onChange:m=>{g({...u,name:m.target.value})}}),e.jsx(S,{type:"color",value:u.color,onChange:m=>{g({...u,color:m.target.value})},className:"px-[2px] py-0"})]}):e.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:u.color,backgroundColor:`rgba(${Oe(u.color)}, 0.1)`},children:[u.name,e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:u.color}})]}),Object.keys(u.movers_rates).slice(0,3).map((m,h)=>{const v=u.movers_rates[m].hourly_rate;return d===o?e.jsx(ee,{value:v,onValueChange:M=>{g({...u,movers_rates:{...u.movers_rates,[m]:{...u.movers_rates[m],hourly_rate:M}}})}},h):e.jsx("div",{children:W(v)},h)}),e.jsx("div",{children:d===o?e.jsx(ee,{value:u.extra_mover_rate,onValueChange:m=>g({...u,extra_mover_rate:m})}):W(u.extra_mover_rate)}),e.jsx("div",{children:d===o?e.jsx(ee,{value:u.extra_truck_rate,onValueChange:m=>g({...u,extra_truck_rate:m})}):W(u.extra_truck_rate)}),e.jsx(fe,{id:u.name,checked:u.enable,disabled:u.id===1,onCheckedChange:m=>{g({...u,enable:m})}}),e.jsxs(k,{variant:"outline",onClick:()=>{p(m=>m===o?null:o)},children:[e.jsx(Me,{}),"Edit"]})]},o))]}),e.jsx(je,{orientation:"horizontal"})]})}),e.jsx(Ft,{className:"justify-end border-t pt-6",children:e.jsxs("div",{className:x("flex min-h-9 w-full gap-4 transition-opacity duration-500 sm:w-auto",{"invisible opacity-0":!l,"visible opacity-100":l}),children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{n(s),c(!1),p(null)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:async()=>{await a({rates:i}).unwrap(),c(!1),p(null),I.success("Changes saved")},children:"Save changes"})]})})]})})}function zn(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((s,t)=>e.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"})]},t))})}const Pn=s=>new Date(s.getFullYear(),s.getMonth()+1,0);function ys({onSelectDate:s,className:t,classNames:a,showOutsideDays:r=!1,showFooter:i=!0,...n}){const{data:l,isLoading:c}=za(),{data:d}=Le(),[p,g]=f.useState(n.today??new Date),u=new Date,o=new Date;return o.setMonth(u.getMonth()+11),e.jsxs(e.Fragment,{children:[e.jsx(lt,{month:p,onMonthChange:g,showOutsideDays:r,className:x("p-3",t),startMonth:u,endMonth:Pn(o),classNames:{month:"space-y-4",months:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 relative",month_caption:"flex justify-center pt-1 relative items-center",month_grid:"w-full border-collapse space-y-1",caption_label:"text-sm font-medium",nav:"flex items-center justify-between absolute inset-x-0",button_previous:x(G({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),button_next:x(G({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),weeks:"w-full border-collapse space-y-",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2 gap-1",day_button:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:x(G({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),range_end:"day-range-end",selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",hidden:"invisible",...a},components:{Chevron:({...m})=>m.orientation==="left"?e.jsx(Ze,{...m,className:"h-4 w-4"}):e.jsx(Zt,{...m,className:"h-4 w-4"}),Day:m=>{const{day:h}=m,v=h.date;if(c)return e.jsx("td",{children:e.jsx(L,{className:"h-8 w-8 p-0"})});if(!l)return e.jsx(e.Fragment,{});const M=v.getMonth()===p.getMonth(),y=se(v,"yyyy-MM-dd"),T=l[y],_=d==null?void 0:d.find(Ve=>Ve.id===(T==null?void 0:T.rate_id)),D={color:"inherit",backgroundColor:"inherit",opacity:1};return T!=null&&T.is_blocked&&(D.color="black",D.backgroundColor="#dcdcdc"),_&&(D.color=_.color,D.backgroundColor=`rgba(${Oe(_==null?void 0:_.color)}, 0.1)`),M||(D.backgroundColor="#f3f3f3",D.color="#7e7e7e",D.opacity=.5),e.jsx("td",{children:e.jsx("button",{className:x(G({variant:"ghost"}),"h-8 w-8 p-0 font-semibold aria-selected:opacity-100"),disabled:!M,style:D,onClick:()=>{s(v,T)},children:v.getDate()})})}},...n}),i&&e.jsx(En,{})]})}ys.displayName="CalendarWithRates";function En(){const{data:s}=Le();return e.jsx("div",{className:"w-full border-t bg-muted",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-x-4 gap-y-2 px-6 py-4 text-xs font-semibold",children:[s==null?void 0:s.map((t,a)=>e.jsx(gs,{children:e.jsxs(rn,{delayDuration:20,children:[e.jsx(ln,{asChild:!0,className:"cursor-help",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:t.color,backgroundColor:`rgba(${Oe(t.color)}, 0.1)`},children:[t.name,e.jsx(ea,{className:"size-4"})]},t.id)}),e.jsx(on,{className:"min-w-60 divide-y border bg-background text-foreground shadow-lg",children:Object.keys(t.movers_rates).slice(0,3).map((r,i)=>{const n=t.movers_rates[r].hourly_rate;return e.jsxs("div",{className:"flex justify-between py-1 font-medium",children:[e.jsxs("span",{children:[r," movers & truck"]}),e.jsx("span",{children:W(n)})]},i)})})]})},a)),e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:"#000000",backgroundColor:"#dcdcdc"},children:["Blocked",e.jsx("span",{className:"size-1.5 rounded-full",style:{backgroundColor:"#000000"}})]})]})})}function Dn({className:s,...t}){return e.jsx(ot,{"data-slot":"radio-group",className:x("grid gap-3",s),...t})}function ts({className:s,...t}){return e.jsx(ct,{"data-slot":"radio-group-item",className:x("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(dt,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(sa,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Mn({isOpen:s,setIsOpen:t,calendarDayInfo:a}){const{data:r}=Le(),[i]=Pa(),n=r==null?void 0:r.filter(o=>o.enable);if(!s&&!a)return null;const{id:l,rate_id:c,is_blocked:d}=a,p=c??0,g=se(new Date(a.formatted_date+"T00:00:00"),"PPP");async function u(o,m){const h={};m===0?(h.is_blocked=!0,h.rate_id=null):(h.rate_id=m,h.is_blocked=!1),await i({id:o,newData:h}).unwrap()}return e.jsx(Y,{open:s,onOpenChange:t,children:e.jsxs(K,{className:"sm:max-w-xs",children:[e.jsxs(J,{children:[e.jsx(X,{children:g}),e.jsx(he,{className:"hidden"})]}),e.jsxs(Dn,{defaultValue:d?"0":p.toString(),onValueChange:o=>{u(l,parseInt(o))},className:"gap-4",children:[n==null?void 0:n.map((o,m)=>e.jsxs(He,{htmlFor:o.id.toString(),className:"flex w-full cursor-pointer items-center gap-6 rounded-md p-3 transition-all hover:ring",style:{color:o.color,backgroundColor:`rgba(${Oe(o.color)}, 0.1)`},children:[e.jsx(ts,{value:o.id.toString(),id:o.id.toString()}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:[o.name,e.jsx("span",{className:"size-2 rounded-full",style:{backgroundColor:o.color}})]})]},m)),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(He,{htmlFor:"0",className:"flex w-full cursor-pointer items-center gap-6 rounded-md bg-foreground/20 p-3 text-foreground transition-all hover:ring",children:[e.jsx(ts,{value:"0",id:"0"}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:["Blocked",e.jsx("span",{className:"size-2 rounded-full bg-black"})]})]})})]})]})})}const Ln=()=>{const s=[],t=new Date;for(let a=0;a<=11;a++){const r=new Date(t.getFullYear(),t.getMonth()+a,1);s.push(r)}return s};function Rn(){const s=Ln(),[t,a]=f.useState(!1),[r,i]=f.useState();function n(l,c){a(!0),i(c)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid justify-items-center gap-y-6 xl:grid-cols-2",children:s.map((l,c)=>e.jsx(ys,{onSelectDate:n,mode:"single",today:l,disableNavigation:!0,showFooter:!1,className:"rounded-xl border",hideNavigation:!0},c))}),r&&e.jsx(Mn,{isOpen:t,setIsOpen:a,calendarDayInfo:r})]})}function ti(){return e.jsx(B,{title:"Calendar Rates",children:e.jsx($,{className:"max-w-2xl",children:e.jsx(A,{className:"py-4",children:e.jsx(Rn,{})})})})}function $n({...s}){return e.jsx(ut,{"data-slot":"select",...s})}function An({...s}){return e.jsx(pt,{"data-slot":"select-value",...s})}function qn({className:s,children:t,...a}){return e.jsxs(mt,{"data-slot":"select-trigger",className:x("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a,children:[t,e.jsx(xt,{asChild:!0,children:e.jsx(os,{className:"size-4 opacity-50"})})]})}function Fn({className:s,children:t,position:a="popper",...r}){return e.jsx(gt,{children:e.jsxs(ht,{"data-slot":"select-content",className:x("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...r,children:[e.jsx(Un,{}),e.jsx(ft,{className:x("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(On,{})]})})}function as({className:s,children:t,...a}){return e.jsxs(jt,{"data-slot":"select-item",className:x("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(vt,{children:e.jsx(ta,{className:"size-4"})})}),e.jsx(yt,{children:t})]})}function Un({className:s,...t}){return e.jsx(bt,{"data-slot":"select-scroll-up-button",className:x("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(aa,{className:"size-4"})})}function On({className:s,...t}){return e.jsx(wt,{"data-slot":"select-scroll-down-button",className:x("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(os,{className:"size-4"})})}function Vn({defaultValue:s,onValueChange:t,isPending:a,items:r,placeholder:i,disabled:n,className:l="",isControlled:c=!1}){const d=c?{value:s,onValueChange:t}:{defaultValue:s,onValueChange:t};return e.jsxs($n,{...d,children:[e.jsx(N,{children:e.jsx(qn,{disabled:n,className:x(l),children:e.jsx(An,{placeholder:i??"Select"})})}),e.jsx(Fn,{children:a?e.jsx(as,{disabled:!0,value:"loading",className:"h-14",children:e.jsx(Pe,{})}):r==null?void 0:r.map(({label:p,value:g})=>e.jsx(as,{value:g,children:p},g))})]})}const Bn="US";function bs({className:s,type:t,handleValueChange:a,...r}){const i=n=>{const l=n.target.value,c=new ia(Bn).input(l);a(c)};return e.jsx("input",{...r,type:"tel",autoComplete:"off",inputMode:"numeric",title:"Please enter your phone number",maxLength:14,className:x("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),onChange:i})}const Qn=[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"Foreman",value:"foreman"},{label:"Driver",value:"driver"},{label:"Helper",value:"helper"}],Gn=j.object({first_name:j.string().min(2,{message:"First name must be at least 2 characters."}),last_name:j.string().min(2,{message:"Last name must be at least 2 characters."}),email_address:j.string().email({message:"Invalid email address."}),phone:j.string().refine(s=>cs(s,"US"),{message:"Invalid phone number"}),active:j.boolean().optional(),role:j.string().optional(),password:j.string().optional()});function ws({user:s,callback:t}){const[a,{isLoading:r}]=Ha(),[i,{isLoading:n}]=Wa(),l=V({mode:"onChange",reValidateMode:"onChange",resolver:ze(Gn),defaultValues:{first_name:(s==null?void 0:s.first_name)??"",last_name:(s==null?void 0:s.last_name)??"",email_address:(s==null?void 0:s.email_address)??"",phone:(s==null?void 0:s.phone)??"",role:(s==null?void 0:s.role)??"",active:(s==null?void 0:s.active)??!0,password:""}});async function c(d){if(s){const p=await a({id:(s==null?void 0:s.id)??0,data:d}).unwrap();p&&(I.success(`${p.first_name} updated successfully`),l.reset({...p,password:""}))}else{const p=await i({data:d}).unwrap();p&&(I.success(`${p.first_name} created successfully`),l.reset({...p,password:""}),t&&t())}}return e.jsx(Q,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{control:l.control,name:"first_name",render:({field:d})=>e.jsxs(w,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"First Name"}),e.jsx(N,{children:e.jsx(S,{...d,autoComplete:"off",className:"col-span-4"})}),e.jsx(R,{className:"col-span-2"})]})}),e.jsx(b,{control:l.control,name:"last_name",render:({field:d})=>e.jsxs(w,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Last Name"}),e.jsx(N,{children:e.jsx(S,{...d,autoComplete:"off",className:"col-span-4"})}),e.jsx(R,{className:"col-span-2"})]})}),e.jsx(b,{control:l.control,name:"email_address",render:({field:d})=>e.jsxs(w,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Email"}),e.jsx(N,{children:e.jsx(S,{...d,autoComplete:"off",className:"col-span-4"})}),e.jsx(R,{className:"col-span-2"})]})}),e.jsx(b,{control:l.control,name:"phone",render:({field:d})=>e.jsxs(w,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Phone"}),e.jsx(N,{children:e.jsx(bs,{...d,value:Ee(d.value??""),handleValueChange:d.onChange,className:"col-span-4"})}),e.jsx(R,{className:"col-span-2"})]})}),e.jsx(b,{control:l.control,name:"role",render:({field:d})=>e.jsxs(w,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Position"}),e.jsx(Vn,{defaultValue:d.value,onValueChange:d.onChange,placeholder:"Select a role",className:"col-span-4 w-full",items:Qn.map(({label:p,value:g})=>({label:p,value:g}))})]})}),e.jsx(b,{control:l.control,name:"password",render:({field:d})=>e.jsxs(w,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Password"}),e.jsx(N,{children:e.jsx(S,{...d,autoComplete:"off",type:"password",className:"col-span-4"})}),e.jsx(R,{})]})}),e.jsx(b,{control:l.control,name:"active",render:({field:d})=>e.jsxs(w,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(C,{className:"text-base",children:"Employee is active"}),e.jsx(gn,{children:"If the employee is active, they will be able to login to the system."})]}),e.jsx(N,{children:e.jsx(fe,{checked:d.value,onCheckedChange:d.onChange})})]})})]}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l.formState.isDirty,"visible opacity-100":l.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>l.reset(),children:"Cancel"}),e.jsx(z,{type:"submit",className:"w-full sm:w-auto",disabled:r||n,loading:r||n,children:"Save changes"})]})})]})})}function Hn(){const[s,t]=f.useState(!1);return e.jsxs(Y,{open:s,onOpenChange:t,children:[e.jsx(ge,{asChild:!0,children:e.jsx(k,{className:"ml-auto",children:"Add User"})}),e.jsxs(K,{children:[e.jsx(J,{children:e.jsx(X,{children:"Add User"})}),e.jsx("div",{className:"pt-4",children:e.jsx(ws,{callback:()=>t(!1)})})]})]})}function Ns({className:s,...t}){return e.jsx(Nt,{"data-slot":"tabs",className:x("flex flex-col gap-2",s),...t})}function Ss({className:s,...t}){return e.jsx(St,{"data-slot":"tabs-list",className:x("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...t})}function _s({className:s,...t}){return e.jsx(_t,{"data-slot":"tabs-trigger",className:x("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}const Wn=["all","admin","manager","foreman","driver","helper"];function Yn({filter:s,handleSetFilter:t}){return e.jsx(Ns,{value:s,onValueChange:a=>{t(a)},children:e.jsxs(Ue,{className:"pb-2",children:[e.jsx(Ss,{children:Wn.map(a=>e.jsx(_s,{value:a,className:"capitalize",children:a},a))}),e.jsx(je,{orientation:"horizontal"})]})})}const Cs=Ct("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ks({className:s,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:x("w-full caption-bottom text-sm",s),...t})})}function Ts({className:s,...t}){return e.jsx("thead",{"data-slot":"table-header",className:x("[&_tr]:border-b",s),...t})}function Is({className:s,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:x("[&_tr:last-child]:border-0",s),...t})}function Ie({className:s,...t}){return e.jsx("tr",{"data-slot":"table-row",className:x("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function P({className:s,...t}){return e.jsx("th",{"data-slot":"table-head",className:x("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function E({className:s,...t}){return e.jsx("td",{"data-slot":"table-cell",className:x("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function Kn(s,t){return`${s.charAt(0)}${t.charAt(0)}`.toUpperCase()}function Jn({users:s}){return e.jsxs(ks,{className:"min-w-[750px]",children:[e.jsx(Ts,{children:e.jsxs(Ie,{children:[e.jsx(P,{children:"Name"}),e.jsx(P,{children:"Role"}),e.jsx(P,{children:"Phone"}),e.jsx(P,{children:"Email"}),e.jsx(P,{children:"Status"}),e.jsx(P,{className:"text-right",children:"Actions"})]})}),e.jsx(Is,{children:s.map(t=>e.jsx(Xn,{user:t},t.id))})]})}function Xn({user:s}){return e.jsxs(Ie,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(cn,{children:e.jsx(dn,{children:Kn(s.first_name,s.last_name)})}),`${s.first_name} ${s.last_name}`]}),e.jsx(E,{className:"capitalize",children:s.role}),e.jsx(E,{children:s.phone?Ee(s.phone):"-"}),e.jsx(E,{children:s.email_address}),e.jsx(E,{children:e.jsxs("span",{className:x(Cs({variant:"outline"}),"relative overflow-hidden"),children:[e.jsx("span",{className:`${s.active?"bg-[#00a455]":"bg-foreground/50"} absolute inset-0 opacity-15`}),e.jsx("span",{className:`${s.active?"text-[#00a455]":"text-foreground"} capitalize`,children:s.active?"Active":"Inactive"})]})}),e.jsx(E,{className:"text-right",children:e.jsx(k,{size:"icon",variant:"outline",asChild:!0,children:e.jsx(Ke,{to:`${s.id}`,children:e.jsx(Me,{})})})})]})}function ai(){const s=Je(),{data:t,isLoading:a}=Qa(),[r,i]=f.useState("all"),n=t==null?void 0:t.filter(c=>r==="all"?c:c.role===r);function l(c){i(c)}return s.id?e.jsx(Ye,{}):e.jsx(B,{title:"Department",children:e.jsxs($,{children:[e.jsx(H,{children:e.jsx(Hn,{})}),e.jsxs(A,{className:"space-y-2",children:[e.jsx(Yn,{filter:r,handleSetFilter:l}),a&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(Pe,{})}),n&&e.jsx(Jn,{users:n??[]})]})]})})}function ni(){const{id:s}=Je(),{data:t,isLoading:a}=Ga({id:s});return e.jsxs(qe,{className:"space-y-4 bg-muted dark:bg-background",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx(k,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(Ke,{to:"/crm/settings/department",children:e.jsx(Ze,{})})}),e.jsx("h3",{className:"text-lg font-semibold",children:t&&`${t==null?void 0:t.first_name} ${t==null?void 0:t.last_name}`})]}),e.jsxs("div",{className:"flex h-5 px-4 space-x-2 text-muted-foreground text-sm",children:[e.jsxs("span",{children:["Employee ID: ",(t==null?void 0:t.id)??""]}),e.jsx(q,{orientation:"vertical"}),e.jsxs("span",{children:["Creation Date:"," ",t!=null&&t.created_at?se(t==null?void 0:t.created_at,"dd MMM, yyyy"):""]})]})]}),e.jsx("div",{className:"overflow-y-auto p-4",children:e.jsx($,{className:"max-w-2xl",children:e.jsxs(A,{children:[a&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(Pe,{})}),t&&e.jsx(ws,{user:t})]})})})]})}const Zn=j.object({company_name:j.string(),company_address:j.string(),company_phone:j.string().refine(s=>cs(s,"US"),{message:"Invalid phone number"}),company_email:j.string().email(),company_website:j.string()});function er({data:s}){const[t,{isLoading:a}]=Ut(),r=V({resolver:ze(Zn),defaultValues:{company_name:s.company_name??"",company_address:s.company_address??"",company_phone:s.company_phone??"",company_email:s.company_email??"",company_website:s.company_website??""}});async function i(n){const l=await t({data:n}).unwrap();l&&(I.success("Changes saved"),r.reset({...l}))}return e.jsx(Q,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(i),className:"space-y-6",children:[e.jsx(b,{control:r.control,name:"company_name",render:({field:n})=>e.jsxs(w,{children:[e.jsx(C,{children:"Company name"}),e.jsx(N,{children:e.jsx(S,{...n,autoComplete:"off"})}),e.jsx(R,{})]})}),e.jsx(b,{control:r.control,name:"company_address",render:({field:n})=>e.jsxs(w,{children:[e.jsx(C,{children:"Company address"}),e.jsx(N,{children:e.jsx(S,{...n,autoComplete:"off"})}),e.jsx(R,{})]})}),e.jsx(b,{control:r.control,name:"company_phone",render:({field:n})=>e.jsxs(w,{children:[e.jsx(C,{children:"Company phone"}),e.jsx(N,{children:e.jsx(bs,{...n,value:Ee(n.value??""),handleValueChange:n.onChange})}),e.jsx(R,{})]})}),e.jsx(b,{control:r.control,name:"company_email",render:({field:n})=>e.jsxs(w,{children:[e.jsx(C,{children:"Company email"}),e.jsx(N,{children:e.jsx(S,{...n,autoComplete:"off"})}),e.jsx(R,{})]})}),e.jsx(b,{control:r.control,name:"company_website",render:({field:n})=>e.jsxs(w,{children:[e.jsx(C,{children:"Company website"}),e.jsx(N,{children:e.jsx(S,{...n,autoComplete:"off"})}),e.jsx(R,{})]})}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!r.formState.isDirty,"visible opacity-100":r.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>r.reset(),children:"Cancel"}),e.jsx(z,{type:"submit",className:"w-full sm:w-auto",disabled:a,loading:a,children:"Save changes"})]})})]})})}j.object({image:j.instanceof(File).nullable()});function sr(s){const t=s.target.files&&s.target.files[0],a=t?URL.createObjectURL(t):"";return{file:t,displayUrl:a}}function tr(){const{data:s}=is(),[t,{isLoading:a}]=Ot(),[r,i]=f.useState(null),n=V({defaultValues:{image:null}});async function l(c){await t({image:c.image}).unwrap(),I.success("Changes saved"),n.reset()}return f.useEffect(()=>{s&&i(s.company_logo)},[s]),e.jsx(Q,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(l),className:"space-y-6",children:[e.jsx(b,{control:n.control,name:"image",render:({field:{value:c,onChange:d,...p}})=>e.jsxs(w,{children:[e.jsx(C,{children:"Logo"}),e.jsx(N,{children:e.jsx(S,{...p,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:g=>{const{file:u,displayUrl:o}=sr(g);i(o),d(u)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:r&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:r,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!n.formState.isDirty,"visible opacity-100":n.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{i((s==null?void 0:s.company_logo)||null),n.reset()},children:"Cancel"}),e.jsx(z,{type:"submit",className:"w-full sm:w-auto",disabled:a,loading:a,children:"Save changes"})]})})]})})}function ri(){const{data:s,isLoading:t}=is();return e.jsx(B,{title:"Company",children:t?e.jsx("div",{className:"flex h-96 max-w-xl items-center justify-center",children:e.jsx(Pe,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs($,{className:"max-w-xl",children:[e.jsx(H,{children:e.jsx(Te,{children:"Company Information"})}),e.jsx(A,{children:e.jsx(er,{data:s})})]}),e.jsxs($,{className:"max-w-xl",children:[e.jsx(H,{children:e.jsx(Te,{children:"Branding"})}),e.jsx(A,{children:e.jsx(tr,{})})]})]})})}function ar({value:s,onChange:t}){const{data:a}=es();if(!a)return null;const r=(i,n,l)=>{const c=s.map((d,p)=>d.map((g,u)=>p===i&&u===n?l:g));t(c)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col rounded-md overflow-hidden border",children:[e.jsx("div",{className:"bg-slate-900 text-white text-center p-1.5 font-semibold text-sm",children:"TO STAIRS"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-slate-900 text-white p-4 flex flex-col items-center justify-center w-8",children:e.jsx("div",{className:"transform -rotate-90 whitespace-nowrap font-semibold text-sm",children:"FROM STAIRS"})}),e.jsxs("div",{className:"bg-background p-4 flex-1",children:[e.jsxs("div",{className:"grid mb-4",style:{gridTemplateColumns:`repeat(${a.length+1}, 1fr)`},children:[e.jsx("div",{}),a.map((i,n)=>e.jsx("div",{className:"flex items-center justify-center text-muted-foreground font-medium text-sm",children:i.name.slice(0,3)},`col-${n}`))]}),e.jsx("div",{className:"grid gap-2",children:a.map((i,n)=>e.jsxs("div",{className:"grid gap-2 items-center",style:{gridTemplateColumns:`repeat(${a.length+1}, 1fr)`},children:[e.jsx("div",{className:"text-muted-foreground text-sm font-medium text-center",children:i.name.slice(0,3)}),a.map((l,c)=>e.jsx(S,{name:`cell-${n}-${c}`,type:"number",className:"w-full p-0 text-center",inputMode:"numeric",value:s[n][c],onChange:d=>r(n,c,Number(d.target.value))},`cell-${n}-${c}`))]},`row-${n}`))})]})]})]})})}function nr({...s}){return e.jsx(kt,{"data-slot":"alert-dialog",...s})}function rr({...s}){return e.jsx(Tt,{"data-slot":"alert-dialog-trigger",...s})}function ir({...s}){return e.jsx(Dt,{"data-slot":"alert-dialog-portal",...s})}function lr({className:s,...t}){return e.jsx(Mt,{"data-slot":"alert-dialog-overlay",className:x("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function or({className:s,...t}){return e.jsxs(ir,{children:[e.jsx(lr,{}),e.jsx(It,{"data-slot":"alert-dialog-content",className:x("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...t})]})}function cr({className:s,...t}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:x("flex flex-col gap-2 text-center sm:text-left",s),...t})}function dr({className:s,...t}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:x("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function ur({className:s,...t}){return e.jsx(zt,{"data-slot":"alert-dialog-title",className:x("text-lg font-semibold",s),...t})}function mr({className:s,...t}){return e.jsx(Pt,{"data-slot":"alert-dialog-description",className:x("text-muted-foreground text-sm",s),...t})}function xr({className:s,...t}){return e.jsx(Et,{className:x(G({variant:"outline"}),s),...t})}const ns=[[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,3,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2]];function pr(s,t){const a=s.length,r=s[0].length,i=t.length,n=t[0].length,l=[];for(let c=0;c<i;c++){l[c]=[];for(let d=0;d<n;d++)c<a&&d<r?l[c][d]=s[c][d]:l[c][d]=2}return l}j.object({name:j.string(),description:j.string(),dispersion:j.number(),truck_count:j.number(),volume:j.number(),weight:j.number(),crew_size_settings:j.array(j.array(j.number())),image:j.instanceof(File)});function gr(s){const t=s.target.files&&s.target.files[0],a=t?URL.createObjectURL(t):"";return{file:t,displayUrl:a}}function zs({data:s}){const{data:t}=es(),[a,{isLoading:r}]=Ka(),[i,{isLoading:n}]=Ja(),[l,{isLoading:c}]=Za(),[d,p]=f.useState(!1),g=Re(),u=!!s,[o,m]=f.useState(null),h=V({defaultValues:{name:"",description:"",dispersion:0,truck_count:0,volume:0,weight:0,crew_size_settings:ns,image:void 0}});f.useEffect(()=>{s&&(h.reset({name:s.name,description:s.description,dispersion:s.dispersion,truck_count:s.truck_count,volume:s.volume,weight:s.weight,crew_size_settings:s.crew_size_settings.length>0?s.crew_size_settings:ns}),m(s.image_url))},[s]);function v(){h.reset(),p(y=>!y)}async function M(y){u?(await i({id:s.id,...y}).unwrap(),I.success("Changes successfully saved")):(await a(y).unwrap(),I.success("Move size successfully added")),h.reset(),v()}return e.jsxs(Y,{open:d,onOpenChange:v,children:[e.jsx(ge,{asChild:!0,className:`${u?null:"ml-auto"}`,children:u?e.jsxs(k,{variant:"outline",className:"text-primary hover:text-primary",size:g?"icon":"default",children:[e.jsx(Me,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(k,{children:"Add move size"})}),e.jsxs(K,{children:[e.jsxs(J,{children:[e.jsxs(X,{children:[u?"Edit":"Add"," move size"]}),e.jsx(he,{className:"hidden"})]}),e.jsx(Q,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(M),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-280px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(b,{control:h.control,name:"image",render:({field:{value:y,onChange:T,..._}})=>e.jsxs(w,{children:[e.jsx(C,{children:"Image"}),e.jsx(N,{children:e.jsx(S,{..._,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:D=>{const{file:Ve,displayUrl:Es}=gr(D);m(Es),T(Ve)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:o&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:o,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})}),e.jsx(b,{control:h.control,name:"name",render:({field:y})=>e.jsxs(w,{children:[e.jsx(C,{children:"Name"}),e.jsx(N,{children:e.jsx(S,{...y,autoComplete:"off"})})]})}),e.jsx(b,{control:h.control,name:"description",render:({field:y})=>e.jsxs(w,{children:[e.jsx(C,{children:"Description"}),e.jsx(N,{children:e.jsx(js,{...y,rows:16,autoComplete:"off"})})]})}),e.jsx(b,{control:h.control,name:"dispersion",render:({field:y})=>e.jsxs(w,{children:[e.jsx(C,{children:"Dispersion %"}),e.jsx(N,{children:e.jsx(S,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(b,{control:h.control,name:"truck_count",render:({field:y})=>e.jsxs(w,{children:[e.jsx(C,{children:"Trucks count for this size"}),e.jsx(N,{children:e.jsx(S,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(b,{control:h.control,name:"volume",render:({field:y})=>e.jsxs(w,{children:[e.jsx(C,{children:"Volume"}),e.jsx(N,{children:e.jsx(S,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(b,{control:h.control,name:"weight",render:({field:y})=>e.jsxs(w,{children:[e.jsx(C,{children:"Weight"}),e.jsx(N,{children:e.jsx(S,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(b,{control:h.control,name:"crew_size_settings",render:({field:y})=>e.jsxs(w,{children:[e.jsx("p",{className:"text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",children:"Crew size settings"}),e.jsx(N,{children:e.jsx(ar,{value:pr(y.value,Array((t==null?void 0:t.length)??0).fill(null).map(()=>Array((t==null?void 0:t.length)??0).fill(2))),onChange:y.onChange})})]})})]}),e.jsxs(Ae,{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{children:u&&e.jsxs(nr,{children:[e.jsx(rr,{asChild:!0,children:e.jsx(k,{variant:"outline",className:"mt-2 sm:mt-0 w-full",children:"Delete"})}),e.jsxs(or,{children:[e.jsxs(cr,{children:[e.jsx(ur,{children:"Are you absolutely sure?"}),e.jsx(mr,{children:"Are you sure you want to delete this move size?"})]}),e.jsxs(dr,{children:[e.jsx(xr,{children:"No, cancel"}),e.jsx(z,{type:"button",loading:c,disabled:c,className:"mt-2 sm:mt-0",onClick:async()=>{await l({id:s==null?void 0:s.id}).unwrap(),I.success("Move size successfully deleted"),v()},children:"Yes, delete"})]})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx($e,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:r||n,disabled:r||n,children:u?"Save changes":"Add move size"})]})]})]})})]})]})}function hr({item:s}){const{attributes:t,listeners:a,setNodeRef:r,transform:i,transition:n,isDragging:l}=te({id:s.id}),c={transform:ae.Transform.toString(i),transition:n,zIndex:l?1e3:"auto",position:l?"relative":"static"};return e.jsxs("div",{className:"flex items-center gap-2",ref:r,style:c,children:[e.jsx(xe,{className:"size-5 min-w-5 cursor-grab text-muted-foreground",...t,...a}),e.jsx("div",{className:"@container w-full",children:e.jsxs("div",{className:x("grid w-full grid-cols-[max-content_1fr_max-content] @lg:grid-cols-9 border rounded-md items-center gap-4 p-4",{"bg-background shadow-lg":l}),children:[e.jsx("div",{children:e.jsx("img",{src:s.image_url??"https://www.thehighlands.org/sites/default/files/styles/hero/public/one-bedroom-3d.png?itok=1Y5yuPSu",alt:s.name,className:"size-10 object-cover"})}),e.jsxs("div",{className:"overflow-hidden @lg:col-span-4",children:[e.jsx("p",{className:"truncate font-semibold",children:s.name}),e.jsx("p",{className:"truncate text-sm",children:s.description})]}),e.jsxs("div",{className:"hidden @lg:flex @lg:col-span-2 gap-4",children:[e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(Xe,{className:"size-4"}),e.jsx("p",{className:"truncate text-sm font-medium",children:s.truck_count??1})]}),e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(na,{className:"size-4"}),e.jsxs("p",{className:"truncate text-sm font-medium",children:[s.volume||100," cbf"]})]})]}),e.jsx("div",{className:"flex justify-end @lg:col-span-2",children:e.jsx(zs,{data:s})})]})})]})}function fr(){const{data:s,isLoading:t,isError:a}=Ya(),[r,{isLoading:i}]=Xa(),[n,l]=f.useState([]),[c,d]=f.useState(!1),p=ne(F(me),F(ue,{coordinateGetter:de}));f.useEffect(()=>{s&&l(s)},[s]);function g(u){const{active:o,over:m}=u;if(m&&o.id!==m.id){const h=n.findIndex(T=>T.id===o.id),v=n.findIndex(T=>T.id===m.id),y=ce(n,h,v).map((T,_)=>({...T,index:_}));l(y),d(!0)}}return a?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch move sizes"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[t&&e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((u,o)=>e.jsx(L,{className:"h-19.5 w-full"},o))}),s&&e.jsx(re,{sensors:p,collisionDetection:le,onDragEnd:g,modifiers:[ie],children:e.jsx(oe,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(u=>e.jsx(hr,{item:u},u.id))})})}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{const u=n.map(({id:o,index:m})=>({id:o,index:m}));await r({moveSizes:u}).unwrap(),I.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}j.object({name:j.string().min(5),form_name:j.string().min(1)});function jr(){const[s,{isLoading:t}]=en(),[a,r]=f.useState(!1),i=V({defaultValues:{name:"",form_name:""}});function n(){i.reset(),r(c=>!c)}async function l(c){await s(c).unwrap(),I.success(`${c.name} successfully added`),i.reset(),n()}return e.jsxs(Y,{open:a,onOpenChange:n,children:[e.jsx(ge,{asChild:!0,className:"ml-auto",children:e.jsx(k,{children:"Add stairs"})}),e.jsxs(K,{children:[e.jsxs(J,{children:[e.jsx(X,{children:"Add stairs"}),e.jsx(he,{className:"hidden"})]}),e.jsx(Q,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsx(b,{control:i.control,name:"name",render:({field:c})=>e.jsxs(w,{children:[e.jsx(C,{children:"Name"}),e.jsx(N,{children:e.jsx(S,{placeholder:"Name",...c})})]})}),e.jsx(b,{control:i.control,name:"form_name",render:({field:c})=>e.jsxs(w,{children:[e.jsx(C,{children:"Form name"}),e.jsx(N,{children:e.jsx(S,{placeholder:"Form name",...c})})]})}),e.jsxs(Ae,{children:[e.jsx($e,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:t,disabled:t,children:"Add service"})]})]})})]})]})}function vr({item:s,onChange:t}){const[a,{isLoading:r}]=tn(),i=Re(),{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:g}=te({id:s.id}),u={transform:ae.Transform.toString(d),transition:p,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{className:"flex items-center gap-2",ref:c,style:u,children:[e.jsx(xe,{className:"size-5 min-w-5 cursor-grab text-muted-foreground",...n,...l}),e.jsxs("div",{className:x("grid auto-cols-auto grid-flow-col gap-2",{"bg-background":g}),children:[e.jsx(S,{type:"text",value:s.name,onChange:o=>{t(s.id,{name:o.target.value})}}),e.jsx(S,{type:"text",value:s.form_name,onChange:o=>{t(s.id,{form_name:o.target.value})}}),e.jsx(z,{loading:r,disabled:r,variant:"secondary",size:i?"icon":"default",onClick:()=>{a({id:s.id})},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"size-4"}),i?null:"Delete"]})})]})]})}function yr(){const{data:s,isLoading:t,isError:a}=es(),[r,{isLoading:i}]=sn(),[n,l]=f.useState([]),[c,d]=f.useState(!1),p=ne(F(me),F(ue,{coordinateGetter:de}));f.useEffect(()=>{s&&l(s)},[s]);function g(o){const{active:m,over:h}=o;if(h&&m.id!==h.id){const v=n.findIndex(_=>_.id===m.id),M=n.findIndex(_=>_.id===h.id),T=ce(n,v,M).map((_,D)=>({..._,index:D}));l(T),d(!0)}}function u(o,m){l(h=>h.map(v=>v.id===o?{...v,...m}:v)),d(!0)}return a?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch stairs"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[t&&e.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((o,m)=>e.jsx(L,{className:"h-9"},m))}),s&&e.jsx(re,{sensors:p,collisionDetection:le,onDragEnd:g,modifiers:[ie],children:e.jsx(oe,{items:n,children:e.jsx("div",{className:"space-y-4",children:n.map(o=>e.jsx(vr,{item:o,onChange:u},o.id))})})}),e.jsx(q,{}),e.jsx("div",{className:x("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({entranceTypes:n}).unwrap(),I.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}function ii(){return Je().id?e.jsx(Ye,{}):e.jsx(B,{title:"Calculator",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs($,{className:"max-w-3xl",children:[e.jsxs(H,{className:"flex flex-row justify-between",children:[e.jsx(Te,{children:"Move Size"}),e.jsx(zs,{})]}),e.jsx(A,{children:e.jsx(fr,{})})]}),e.jsxs($,{className:"max-w-3xl",children:[e.jsxs(H,{className:"flex flex-row justify-between",children:[e.jsx(Te,{children:"Stairs"}),e.jsx(jr,{})]}),e.jsx(A,{children:e.jsx(yr,{})})]})]})})}const br={pending:"Pending",pending_info:"Pending Info",pending_date:"Pending Date",hold:"Hold",not_confirmed:"Not Confirmed",confirmed:"Confirmed",not_available:"Not Available",completed:"Completed",spam:"Spam",canceled:"Canceled",refused:"Refused",closed:"Closed",expired:"Expired",archived:"Archived"};Object.entries(br).map(([s,t])=>({label:t,value:s}));const wr={all:"All Requests",pending:"Pending",not_confirmed:"Not Confirmed",confirmed:"Confirmed",not_available:"Not Available",completed:"Completed",spam:"Spam",canceled:"Canceled",refused:"Refused",closed:"Closed",expired:"Expired",archived:"Archived"},Nr=Object.entries(wr).map(([s,t])=>({label:t,value:s})),We={all:"text-foreground",pending:"text-amber-500",pending_info:"text-red-500",pending_date:"text-red-500",hold:"text-amber-500",not_confirmed:"text-indigo-500",confirmed:"text-[#00a455]",not_available:"text-foreground",completed:"text-[#26a9f4]",spam:"text-foreground",canceled:"text-red-500",refused:"text-foreground",closed:"text-foreground",expired:"text-foreground",archived:"text-foreground"},Ps={all:"bg-muted-foreground",pending:"bg-amber-500",pending_info:"bg-red-500",pending_date:"bg-red-500",hold:"bg-amber-500",not_confirmed:"bg-indigo-500",confirmed:"bg-[#00a455]",not_available:"bg-muted-foreground",completed:"bg-[#26a9f4]",spam:"bg-muted-foreground",canceled:"bg-red-500",refused:"bg-muted-foreground",closed:"bg-muted-foreground",expired:"bg-muted-foreground",archived:"bg-muted-foreground"};function Sr(){const s=[];for(let t=0;t<24;t++)for(let a=0;a<60;a+=15){const r=t*60+a;s.push({value:r,label:`${t.toString()}:${a.toString().padStart(2,"0")}`})}return s}const _r=s=>{const t=[];for(let a=0;a<24*60;a+=15){const r=Math.floor(a/60),i=a%60,n=new Date(0,0,0,r,i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});t.push({label:n,value:a})}return t};_r();Sr();function Cr({requests:s}){const t=$t(),[a,r]=f.useState(null);function i(n){a===n?t(`/dashboard/requests/${n}`):r(n)}return e.jsx("div",{className:"min-h-[calc(100vh-200px)]",children:e.jsxs(ks,{className:"min-w-[1850px]",children:[e.jsx(Ts,{children:e.jsxs(Ie,{children:[e.jsx(P,{children:"#"}),e.jsx(P,{children:"Status"}),e.jsx(P,{children:"Service"}),e.jsx(P,{children:"Move date"}),e.jsx(P,{children:"Customer, phone"}),e.jsx(P,{children:"Moving from"}),e.jsx(P,{children:"Moving to"}),e.jsx(P,{children:"Size of move"}),e.jsx(P,{children:"Crew"}),e.jsx(P,{children:"Created at"}),e.jsx(P,{children:"Updated at"}),e.jsx(P,{className:"text-right",children:"Est. Quote"})]})}),e.jsx(Is,{children:s==null?void 0:s.map(n=>{var c,d,p,g;const l=n.customer?`${(c=n.customer)==null?void 0:c.first_name} ${(d=n.customer)==null?void 0:d.last_name}`:"";return e.jsxs(Ie,{className:x("h-16 text-xs font-medium hover:cursor-pointer",a===n.id&&"bg-muted"),onClick:()=>i(n==null?void 0:n.id),onSelect:()=>i(n==null?void 0:n.id),children:[e.jsx(E,{className:"text-sm font-bold",children:n.id}),e.jsx(E,{children:e.jsxs("span",{className:x(Cs({variant:"outline"}),"relative overflow-hidden"),children:[e.jsx("span",{className:`${Ps[n.status]} absolute inset-0 opacity-15`}),e.jsx("span",{className:`${We[n.status]} capitalize`,children:n.status.replace("_"," ")})]})}),e.jsx(E,{children:(p=n.service)==null?void 0:p.name}),e.jsxs(E,{children:[Vt(n.moving_date),e.jsx("br",{}),e.jsx(kr,{movingDate:n.moving_date})]}),e.jsxs(E,{children:[l??"",e.jsx("br",{}),Ee((g=n.customer)==null?void 0:g.phone)]}),e.jsxs(E,{children:["Brookline, MA ",e.jsx("br",{}),"02446"]}),e.jsxs(E,{className:"items-center gap-2",children:["Boston, MA ",e.jsx("br",{}),"02166"]}),e.jsx(E,{children:n.size}),e.jsx(E,{children:n.crew_size&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ra,{className:"size-4"}),n.crew_size]})}),e.jsx(E,{children:se(n.created_at,"P")}),e.jsx(E,{children:se(n.updated_at,"P")}),e.jsx(E,{className:"text-right",children:In(n.total_price)})]},n.id)})})]})})}function kr({movingDate:s}){if(!s)return null;const t=new Date;t.setHours(0,0,0,0);const a=new Date(s);a.setHours(0,0,0,0);const r=a.getTime()-t.getTime(),i=Math.ceil(r/(1e3*60*60*24));if(i<0)return null;let n;switch(i){case 0:n="today";break;case 1:n="tomorrow";break;default:n=`in ${i} days`}const l=i<2?"text-destructive":"text-green-600";return e.jsx("span",{className:l,children:n})}function li(){const s=nn(),{data:t}=_a(),{filter:a,page:r}=an(n=>n.requests),{data:i}=Sa({filter:a,page:r});return e.jsxs(qe,{className:"h-full p-4",children:[e.jsx(Ns,{value:a,onValueChange:n=>{s(va(n)),s(ya(1))},children:e.jsxs(Ue,{className:"pb-2",children:[e.jsx(Ss,{className:"h-12",children:Nr.map(n=>e.jsxs(_s,{value:n.value,className:`${We[n.value]} data-[state=active]:${We[n.value]} h-full w-[180px] space-x-2`,children:[e.jsx("span",{children:n.label}),e.jsx("span",{className:`${Ps[n.value]} rounded-full px-1 text-xs font-semibold text-muted`,children:(t==null?void 0:t[n.value])??"0"})]},n.value))}),e.jsx(je,{orientation:"horizontal"})]})}),e.jsx(Cr,{requests:(i==null?void 0:i.requests)??[]})]})}export{cn as A,Kr as B,ti as C,Y as D,Xr as E,nn as F,Hr as G,Jr as M,Zr as P,li as R,q as S,gs as T,ni as U,ye as a,ke as b,Z as c,rn as d,Se as e,ln as f,on as g,an as h,dn as i,Wr as j,Ca as k,J as l,Ce as m,X as n,he as o,Ne as p,K as q,be as r,Yr as s,we as t,Re as u,ei as v,si as w,ai as x,ri as y,ii as z};
