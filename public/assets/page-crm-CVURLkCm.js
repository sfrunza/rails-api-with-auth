import{j as e,e as ss,r as h,f as as,g as ts,h as ns,i as rs,k as is,A as ls,l as os,F as cs,m as ds,n as us,o as ms,p as Re,q as xs,D as ps,s as fs,O as hs,u as gs,v as js,S as vs,w as ys,x as bs,z as y,y as B,t as P,B as K,E as Ns,H as ws,J as oe,K as ce,L as de,M as V,N as ue,Q as me,U as xe,V as pe,W as fe,X as he,Y as ge,Z as je,_ as Ss,$ as ks,a0 as Cs,a1 as _s,a2 as Ts,a3 as Is,a4 as Ls,a5 as Ps,a6 as Ds,a7 as Es,a8 as zs,a9 as Rs,aa as Fs,ab as Ms,ac as Us,ad as $s,ae as As,af as Os,ag as qs,ah as Vs,ai as Bs,aj as Gs,ak as Qs,al as Hs,b as Ws}from"./vendor-CakjQFVf.js";import{b as Ys,N as Ks,O as Fe,L as ve,c as Me}from"./vendor-router-DhmCPj6V.js";import{b as U,c as d,a as q,B as w,L as le,I as _,d as D,C as z,e as R,f as H,g as Js,S as J,h as ye,u as Xs,i as Ue,j as Zs,k as Pe}from"./page-auth-DxaTgTTW.js";import{X as ea,a as sa,P as aa,H as ta,b as na,T as $e,D as ra,C as ia,U as la,c as oa,d as be,G as Ne,e as we,f as Ae,g as Se,h as ca,I as da,i as ua,j as Oe,k as ma,l as xa,m as pa}from"./vendor-ui-PXennpt_.js";import{a as $}from"./vendor-redux-PRo0f0lO.js";import{f as ke}from"./vendor-date-fns-BWtotJsy.js";import{A as fa,i as qe}from"./vendor-libphonenumber-js-1k7QeoIm.js";const ha=$({reducerPath:"servicesApi",baseQuery:U,tagTypes:["Service"],endpoints:s=>({getServices:s.query({query:()=>"/services",providesTags(a){return a?[...a.map(({id:t})=>({type:"Service",id:t})),{type:"Service",id:"LIST"}]:[{type:"Service",id:"LIST"}]}}),createService:s.mutation({query:a=>({url:"/services",method:"POST",body:{service:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),bulkUpdateServices:s.mutation({query:a=>({url:"/services/bulk_update",method:"POST",body:{services:a.services}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),deleteService:s.mutation({query:({id:a})=>({url:`/services/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]})})}),{useGetServicesQuery:ga,useCreateServiceMutation:ja,useBulkUpdateServicesMutation:va,useDeleteServiceMutation:ya}=ha,Ve=$({reducerPath:"calendarRatesApi",baseQuery:U,tagTypes:["CalendarRate"],endpoints:s=>({getCalendarRates:s.query({query:()=>"/calendar_rates",providesTags:a=>a?[...Object.values(a).map(t=>({type:"CalendarRate",id:t.id})),{type:"CalendarRate",id:"LIST"}]:[{type:"CalendarRate",id:"LIST"}]}),updateCalendarRate:s.mutation({query:({id:a,newData:t})=>({url:`/calendar_rates/${a}`,method:"PUT",body:{calendar_rate:t}}),invalidatesTags:(a,t,{id:n})=>t?[]:[{type:"CalendarRate",id:n}]})})}),{useGetCalendarRatesQuery:ba,useUpdateCalendarRateMutation:Na}=Ve,wa=$({reducerPath:"ratesApi",baseQuery:U,tagTypes:["Rate","CalendarRate"],endpoints:s=>({getRates:s.query({query:()=>"/rates",providesTags(a){return a?[...a.map(({id:t})=>({type:"Rate",id:t})),{type:"Rate",id:"LIST"}]:[{type:"Rate",id:"LIST"}]}}),bulkUpdateRates:s.mutation({query:a=>({url:"/rates/bulk_update",method:"POST",body:{rates:a.rates}}),invalidatesTags:(a,t)=>t?[]:[{type:"Rate",id:"LIST"}],async onQueryStarted(a,{dispatch:t,queryFulfilled:n}){try{await n,t(Ve.util.invalidateTags([{type:"CalendarRate",id:"LIST"}]))}catch(i){console.log("error",i)}}})})}),{useGetRatesQuery:Ce,useBulkUpdateRatesMutation:Sa}=wa,ka=$({reducerPath:"trucksApi",baseQuery:U,tagTypes:["Truck"],endpoints:s=>({getTrucks:s.query({query:()=>"/trucks",providesTags(a){return a?[...a.map(({id:t})=>({type:"Truck",id:t})),{type:"Truck",id:"LIST"}]:[{type:"Truck",id:"LIST"}]}}),createTruck:s.mutation({query:a=>({url:"/trucks",method:"POST",body:{truck:a}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),bulkUpdateTrucks:s.mutation({query:a=>({url:"/trucks/bulk_update",method:"POST",body:{trucks:a.trucks}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),deleteTruck:s.mutation({query:({id:a})=>({url:`/trucks/${a}`,method:"DELETE"}),invalidatesTags:[{type:"Truck",id:"LIST"}]})})}),{useGetTrucksQuery:Ca,useCreateTruckMutation:_a,useBulkUpdateTrucksMutation:Ta}=ka,Ia=$({reducerPath:"packingsApi",baseQuery:U,tagTypes:["Packing"],endpoints:s=>({getPackings:s.query({query:()=>"/packings",providesTags(a){return a?[...a.map(({id:t})=>({type:"Packing",id:t})),{type:"Packing",id:"LIST"}]:[{type:"Packing",id:"LIST"}]}}),updatePacking:s.mutation({query:({id:a,...t})=>({url:`/packings/${a}`,method:"PATCH",body:{packing:t}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),createPacking:s.mutation({query:a=>({url:"/packings",method:"POST",body:{packing:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),bulkUpdatePackings:s.mutation({query:a=>({url:"/packings/bulk_update",method:"POST",body:{packings:a.packings}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),deletePacking:s.mutation({query:({id:a})=>({url:`/packings/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]})})}),{useGetPackingsQuery:La,useCreatePackingMutation:Pa,useUpdatePackingMutation:Da,useBulkUpdatePackingsMutation:Ea,useDeletePackingMutation:za}=Ia,Ra=$({reducerPath:"extraServicesApi",baseQuery:U,tagTypes:["ExtraService"],endpoints:s=>({getExtraServices:s.query({query:()=>"/extra_services",providesTags(a){return a?[...a.map(({id:t})=>({type:"ExtraService",id:t})),{type:"ExtraService",id:"LIST"}]:[{type:"ExtraService",id:"LIST"}]}}),createExtraService:s.mutation({query:a=>({url:"/extra_services",method:"POST",body:{extra_service:a}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),bulkUpdateExtraServices:s.mutation({query:a=>({url:"/extra_services/bulk_update",method:"POST",body:{extra_services:a.extra_services}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),deleteExtraService:s.mutation({query:({id:a})=>({url:`/extra_services/${a}`,method:"DELETE"}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]})})}),{useGetExtraServicesQuery:Fa,useCreateExtraServiceMutation:Ma,useBulkUpdateExtraServicesMutation:Ua,useDeleteExtraServiceMutation:$a}=Ra,Aa=$({reducerPath:"employeesApi",baseQuery:U,tagTypes:["Employee"],endpoints:s=>({getEmployees:s.query({query:()=>"/employees",providesTags(a){return a?[...a.map(({id:t})=>({type:"Employee",id:t})),{type:"Employee",id:"LIST"}]:[{type:"Employee",id:"LIST"}]}}),getEmployeeById:s.query({query:({id:a})=>`/employees/${a}`,providesTags:(a,t,{id:n})=>a?[{type:"Employee",id:n}]:[{type:"Employee",id:"LIST"}]}),updateEmployee:s.mutation({query:({id:a,data:t})=>({url:`/employees/${a}`,method:"PUT",body:{employee:t}}),invalidatesTags:(a,t,{id:n})=>t?[]:[{type:"Employee",id:n},{type:"Employee",id:"LIST"}]}),createEmployee:s.mutation({query:({data:a})=>({url:"/employees",method:"POST",body:{employee:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Employee",id:"LIST"}]})})}),{useGetEmployeesQuery:Oa,useGetEmployeeByIdQuery:qa,useUpdateEmployeeMutation:Va,useCreateEmployeeMutation:Ba}=Aa;function F({className:s,orientation:a="horizontal",decorative:t=!0,...n}){return e.jsx(ss,{"data-slot":"separator-root",decorative:t,orientation:a,className:d("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...n})}const ie=768;function Be(){const[s,a]=h.useState(void 0);return h.useEffect(()=>{const t=window.matchMedia(`(max-width: ${ie-1}px)`),n=()=>{a(window.innerWidth<ie)};return t.addEventListener("change",n),a(window.innerWidth<ie),()=>t.removeEventListener("change",n)},[]),!!s}function I({className:s,...a}){return e.jsx("div",{"data-slot":"skeleton",className:d("bg-primary/10 animate-pulse rounded-md",s),...a})}function Ge({delayDuration:s=0,...a}){return e.jsx(as,{"data-slot":"tooltip-provider",delayDuration:s,...a})}function Ga({...s}){return e.jsx(Ge,{children:e.jsx(ts,{"data-slot":"tooltip",...s})})}function Qa({...s}){return e.jsx(ns,{"data-slot":"tooltip-trigger",...s})}function Ha({className:s,sideOffset:a=4,children:t,...n}){return e.jsx(rs,{children:e.jsxs(is,{"data-slot":"tooltip-content",sideOffset:a,className:d("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",s),...n,children:[t,e.jsx(ls,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function Wa({className:s,...a}){return e.jsx(os,{"data-slot":"avatar",className:d("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...a})}function Ya({className:s,...a}){return e.jsx(cs,{"data-slot":"avatar-fallback",className:d("bg-muted flex size-full items-center justify-center rounded-full",s),...a})}function X({...s}){return e.jsx(ds,{"data-slot":"dialog",...s})}function _e({...s}){return e.jsx(us,{"data-slot":"dialog-trigger",...s})}function Ka({...s}){return e.jsx(fs,{"data-slot":"dialog-portal",...s})}function Qe({...s}){return e.jsx(Re,{"data-slot":"dialog-close",className:d(q({variant:"outline"}),"mt-2 sm:mt-0"),...s})}function Ja({className:s,...a}){return e.jsx(hs,{"data-slot":"dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",s),...a})}function Z({className:s,children:a,...t}){return e.jsxs(Ka,{"data-slot":"dialog-portal",children:[e.jsx(Ja,{}),e.jsxs(ms,{"data-slot":"dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...t,children:[a,e.jsxs(Re,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ea,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ee({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",s),...a})}function He({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-footer",className:d("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function se({className:s,...a}){return e.jsx(xs,{"data-slot":"dialog-title",className:d("text-lg leading-none font-semibold",s),...a})}function Te({className:s,...a}){return e.jsx(ps,{"data-slot":"dialog-description",className:d("text-muted-foreground text-sm",s),...a})}function Ie({children:s,className:a}){return e.jsx("div",{className:d("overflow-y-auto pb-6",a),children:s})}const Xa=[{name:"Company",href:"company",icon:sa},{name:"Moving Services",href:"services",icon:aa},{name:"Extra Services",href:"extra-services",icon:ta},{name:"Packing",href:"packing",icon:na},{name:"Trucks",href:"trucks",icon:$e,prefetchUrl:"/trucks"},{name:"Rates",href:"rates",icon:ra},{name:"Calendar Rates",href:"calendar-rates",icon:ia},{name:"Department",href:"department",icon:la},{name:"Calculator",href:"calculator",icon:oa}];function Za(){const{pathname:s}=Ys();return e.jsxs(Ie,{className:d("hidden lg:block lg:border-r",{block:s==="/crm/settings"}),children:[e.jsx("h2",{className:"px-6 pt-4 text-lg font-semibold",children:"Settings"}),e.jsx("div",{className:"space-y-2 p-4",children:Xa.map((a,t)=>e.jsxs(Ks,{to:a.href,className:({isActive:n})=>d(q({variant:n?"secondary":"ghost",className:"w-full justify-start text-left"})),children:[e.jsx(a.icon,{className:"size-4"}),a.name]},t))})]})}function an(){return e.jsxs("div",{className:"grid h-full lg:grid-cols-[20rem_1fr]",children:[e.jsx(Za,{}),e.jsx(Fe,{})]})}function M({children:s,title:a,className:t}){return e.jsxs(Ie,{className:"space-y-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(w,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(ve,{to:"/crm/settings",children:e.jsx(be,{})})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a})]}),e.jsx("div",{className:d("overflow-y-auto p-4",t),children:s})]})}const G=gs,We=h.createContext({}),S=({...s})=>e.jsx(We.Provider,{value:{name:s.name},children:e.jsx(js,{...s})}),ae=()=>{const s=h.useContext(We),a=h.useContext(Ye),{getFieldState:t}=ys(),n=bs({name:s.name}),i=t(s.name,n);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:r}=a;return{id:r,name:s.name,formItemId:`${r}-form-item`,formDescriptionId:`${r}-form-item-description`,formMessageId:`${r}-form-item-message`,...i}},Ye=h.createContext({});function k({className:s,...a}){const t=h.useId();return e.jsx(Ye.Provider,{value:{id:t},children:e.jsx("div",{"data-slot":"form-item",className:d("grid gap-2",s),...a})})}function L({className:s,...a}){const{error:t,formItemId:n}=ae();return e.jsx(le,{"data-slot":"form-label","data-error":!!t,className:d("data-[error=true]:text-destructive-foreground",s),htmlFor:n,...a})}function C({...s}){const{error:a,formItemId:t,formDescriptionId:n,formMessageId:i}=ae();return e.jsx(vs,{"data-slot":"form-control",id:t,"aria-describedby":a?`${n} ${i}`:`${n}`,"aria-invalid":!!a,...s})}function et({className:s,...a}){const{formDescriptionId:t}=ae();return e.jsx("p",{"data-slot":"form-description",id:t,className:d("text-muted-foreground text-sm",s),...a})}function E({className:s,...a}){const{error:t,formMessageId:n}=ae(),i=t?String(t==null?void 0:t.message):a.children;return i?e.jsx("p",{"data-slot":"form-message",id:n,className:d("text-destructive-foreground text-sm",s),...a,children:i}):null}const st=y.object({name:y.string().min(5,{message:"Service name must be at least 5 characters"})});function at(){const[s,{isLoading:a}]=ja(),t=B({resolver:K(st),reValidateMode:"onChange",defaultValues:{name:""}});async function n(i){await s(i).unwrap(),P.success(`${i.name} successfully added`),t.reset()}return e.jsx("div",{children:e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(n),className:"mb-4 flex gap-4",children:[e.jsx(S,{control:t.control,name:"name",render:({field:i})=>e.jsxs(k,{className:"w-full",children:[e.jsx(C,{children:e.jsx(_,{...i,placeholder:"Service name",autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(D,{loading:a,disabled:a,children:"Add service"})]})})})}function W({className:s,...a}){return e.jsx(Ns,{"data-slot":"switch",className:d("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(ws,{"data-slot":"switch-thumb",className:d("bg-background pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function tt({id:s,item:a,onEnabledChange:t}){const[n,{isLoading:i}]=ya(),{attributes:r,listeners:c,setNodeRef:m,transform:o,transition:p,isDragging:f}=oe({id:s}),u={transform:ce.Transform.toString(o),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:m,style:u,className:d("grid grid-cols-[max-content_1fr_max-content_max-content] border rounded-md items-center gap-2 p-2",{"bg-background shadow-lg":f}),children:[e.jsx(w,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...r,...c,children:e.jsx(Ne,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:a.name})}),e.jsx(W,{checked:a.enabled,onCheckedChange:l=>{t(a.id,l)}}),a.is_default?e.jsx("div",{className:"size-9"}):e.jsx(D,{loading:i,disabled:i,variant:"ghost",size:"icon",className:"hover:text-red-600",onClick:async()=>{await n({id:a.id}).unwrap(),P.success(`${a.name} successfully deleted`)},children:e.jsx(we,{})})]})}function nt(){const{data:s,isLoading:a,isError:t}=ga(),[n,{isLoading:i}]=va(),[r,c]=h.useState([]),[m,o]=h.useState(!1),p=de(V(je),V(ge,{coordinateGetter:he}));h.useEffect(()=>{s&&c(s)},[s]);function f(l){const{active:x,over:g}=l;if(g&&x.id!==g.id){const b=r.findIndex(N=>N.id===x.id),v=r.findIndex(N=>N.id===g.id),T=fe(r,b,v).map((N,re)=>({...N,index:re}));c(T),o(!0)}}function u(l,x){c(g=>g.map(b=>b.id===l?{...b,enabled:x}:b)),o(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:8}).map((l,x)=>e.jsx(I,{className:"h-13.5 w-full"},x))}),s&&e.jsx(ue,{sensors:p,collisionDetection:xe,onDragEnd:f,modifiers:[me],children:e.jsx(pe,{items:r,children:e.jsx("div",{className:"space-y-2",children:r.map(l=>e.jsx(tt,{id:l.id,item:l,onEnabledChange:u},l.id))})})}),e.jsx(F,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!m,"visible opacity-100":m}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{c(s),o(!1)},children:"Cancel"}),e.jsx(D,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await n({services:r}).unwrap(),P.success("Changes saved"),o(!1)},children:"Save changes"})]})})]})}function tn(){return e.jsx(M,{title:"Moving Services",children:e.jsx(z,{className:"max-w-xl",children:e.jsxs(R,{className:"space-y-4",children:[e.jsx(at,{}),e.jsx(F,{}),e.jsx(nt,{})]})})})}function Le({className:s,children:a,...t}){return e.jsxs(Ss,{"data-slot":"scroll-area",className:d("relative",s),...t,children:[e.jsx(ks,{"data-slot":"scroll-area-viewport",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1",children:a}),e.jsx(te,{}),e.jsx(Cs,{})]})}function te({className:s,orientation:a="vertical",...t}){return e.jsx(_s,{"data-slot":"scroll-area-scrollbar",orientation:a,className:d("flex touch-none p-px transition-colors select-none",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",s),...t,children:e.jsx(Ts,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function rt(s){return(s/100).toString()}function Q(s){const{value:a,onValueChange:t,className:n,...i}=s,[r,c]=h.useState("0");return h.useEffect(()=>{c(rt(a))},[a]),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(_,{pattern:"[0-9]+",inputMode:"numeric",value:r,onChange:m=>{const o=m.target.value.replace(/[^0-9.]/g,"");if(/^\d*\.?\d{0,2}$/.test(o)){c(o);const p=parseFloat(o)||0;t(p*100)}},className:d("pl-4",n),...i}),e.jsx("span",{className:"absolute left-2 flex bg-transparent text-sm",children:"$"})]})}function it({id:s,item:a,onChange:t}){const[n,{isLoading:i}]=$a(),{attributes:r,listeners:c,setNodeRef:m,transform:o,transition:p,isDragging:f}=oe({id:s}),u={transform:ce.Transform.toString(o),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:m,style:u,className:d("grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 p-2",{"bg-background":f}),children:[e.jsx(w,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...r,...c,children:e.jsx(Ne,{})}),e.jsx(_,{value:a.name,onChange:l=>{const x=l.target.value;t(a.id,{name:x})},name:a.name}),e.jsx(Q,{value:a.price,onValueChange:l=>{t(a.id,{price:l})}}),e.jsx(W,{checked:a.enabled,onCheckedChange:l=>{t(a.id,{enabled:l})}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(D,{disabled:i,loading:i,variant:"secondary",onClick:async()=>{await n({id:a.id}).unwrap(),P.success(`${a.name} successfully deleted`)},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"size-4"}),"Delete"]})})})]})}function lt(){const{data:s,isLoading:a,isError:t}=Fa(),[n,{isLoading:i}]=Ua(),[r,c]=h.useState([]),[m,o]=h.useState(!1),p=de(V(je),V(ge,{coordinateGetter:he}));h.useEffect(()=>{s&&c(s)},[s]);function f(l){const{active:x,over:g}=l;if(g&&x.id!==g.id){const b=r.findIndex(N=>N.id===x.id),v=r.findIndex(N=>N.id===g.id),T=fe(r,b,v).map((N,re)=>({...N,index:re}));c(T),o(!0)}}function u(l,x){c(g=>g.map(b=>b.id===l?{...b,...x}:b)),o(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch extra services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(Le,{className:"w-full",children:[e.jsxs("div",{className:"mb-4 grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 text-sm font-medium text-muted-foreground",children:[e.jsx("p",{className:"size-9"}),e.jsx("p",{children:"Service name"}),e.jsx("p",{children:"Service cost, $"}),e.jsx("p",{children:"Enable"}),e.jsx("p",{})]}),e.jsx(F,{}),a&&e.jsx(ot,{}),s&&e.jsx(ue,{sensors:p,collisionDetection:xe,onDragEnd:f,modifiers:[me],children:e.jsx(pe,{items:r,children:e.jsx("div",{className:"pt-4 min-w-[700px] space-y-2",children:r.map(l=>e.jsx(it,{id:l.id,item:l,onChange:u},l.id))})})}),e.jsx(te,{orientation:"horizontal"})]}),e.jsx(F,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!m,"visible opacity-100":m}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{c(s),o(!1)},children:"Cancel"}),e.jsx(D,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await n({extra_services:r}).unwrap(),o(!1),P.success("Changes saved"),o(!1)},children:"Save changes"})]})})]})}function ot(){return e.jsx("div",{className:"space-y-4 py-6",children:Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"grid grid-cols-[max-content_3fr_1fr_1fr_1fr] gap-4",children:[e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"})]},a))})}y.object({name:y.string().min(5),price:y.number().min(1),enabled:y.boolean()});function ct(){const[s,{isLoading:a}]=Ma(),[t,n]=h.useState(!1),i=B({defaultValues:{name:"",price:0,enabled:!0}});function r(){i.reset(),n(m=>!m)}async function c(m){await s(m).unwrap(),P.success(`${m.name} successfully added`),i.reset(),r()}return e.jsxs(X,{open:t,onOpenChange:r,children:[e.jsx(_e,{asChild:!0,className:"ml-auto",children:e.jsx(w,{size:"icon",children:e.jsx(Ae,{})})}),e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Add extra service"}),e.jsx(Te,{className:"hidden"})]}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsx(S,{control:i.control,name:"name",render:({field:m})=>e.jsxs(k,{children:[e.jsx(L,{children:"Name"}),e.jsx(C,{children:e.jsx(_,{placeholder:"Service name",...m})})]})}),e.jsx(S,{control:i.control,name:"price",render:({field:m})=>e.jsxs(k,{children:[e.jsx(L,{children:"Price"}),e.jsx(C,{children:e.jsx(Q,{name:"price",value:m.value,onValueChange:o=>{i.setValue("price",o)}})})]})}),e.jsxs(He,{children:[e.jsx(Qe,{children:"Cancel"}),e.jsx(D,{type:"submit",loading:a,disabled:a,children:"Add service"})]})]})})]})]})}function nn(){return e.jsx(M,{title:"Extra Services",children:e.jsxs(z,{className:"max-w-4xl gap-0",children:[e.jsx(H,{className:"flex flex-row items-center",children:e.jsx(ct,{})}),e.jsx(R,{children:e.jsx(lt,{})})]})})}function dt({className:s,...a}){return e.jsx("textarea",{"data-slot":"textarea",className:d("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}y.object({name:y.string(),description:y.string(),labor_increase:y.number()});function Ke({data:s}){const[a,{isLoading:t}]=Pa(),[n,{isLoading:i}]=Da(),[r,c]=h.useState(!1),m=Be(),o=!!s,p=B({defaultValues:{name:"",description:"",labor_increase:0}});h.useEffect(()=>{s&&p.reset(s)},[s]);function f(){p.reset(),c(l=>!l)}async function u(l){o?(await n({id:s.id,...l}).unwrap(),P.success(`${l.name} successfully updated`)):(await a(l).unwrap(),P.success(`${l.name} successfully added`)),p.reset(),f()}return e.jsxs(X,{open:r,onOpenChange:f,children:[e.jsx(_e,{asChild:!0,className:`${o?null:"ml-auto"}`,children:o?e.jsxs(w,{variant:"outline",className:"text-primary hover:text-primary",size:m?"icon":"default",children:[e.jsx(Se,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(w,{size:"icon",children:e.jsx(Ae,{})})}),e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsxs(se,{children:[o?"Edit":"Add"," packing service"]}),e.jsx(Te,{className:"hidden"})]}),e.jsx(G,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(u),className:"space-y-4",children:[e.jsx(S,{control:p.control,name:"name",render:({field:l})=>e.jsxs(k,{children:[e.jsx(L,{children:"Name"}),e.jsx(C,{children:e.jsx(_,{...l})})]})}),e.jsx(S,{control:p.control,name:"description",render:({field:l})=>e.jsxs(k,{children:[e.jsx(L,{children:"Description"}),e.jsx(C,{children:e.jsx(dt,{...l,rows:16})})]})}),e.jsx(S,{control:p.control,name:"labor_increase",render:({field:l})=>e.jsxs(k,{children:[e.jsx(L,{children:"Labor increse (%)"}),e.jsx(C,{children:e.jsx(_,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...l})})]})}),e.jsxs(He,{children:[e.jsx(Qe,{children:"Cancel"}),e.jsx(D,{type:"submit",loading:t||i,disabled:t||i,children:o?"Save changes":"Add packing"})]})]})})]})]})}function ut({item:s}){const a=Be(),[t,{isLoading:n}]=za(),i=s.is_default,{attributes:r,listeners:c,setNodeRef:m,transform:o,transition:p,isDragging:f}=oe({id:s.id}),u={transform:ce.Transform.toString(o),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:i?null:m,style:u,className:d("grid grid-cols-[max-content_1fr_auto_auto] border rounded-md items-center gap-2 p-4",{"bg-background shadow-lg":f}),children:[e.jsx(w,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",disabled:i,...i?{}:r,...i?{}:c,children:e.jsx(Ne,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:s.name})}),e.jsx(Ke,{data:s}),i?e.jsx(w,{variant:"ghost",disabled:!0,size:a?"icon":"default",children:e.jsx("span",{className:"hidden md:inline-flex ml-4",children:"Default"})}):null,!i&&e.jsx(D,{disabled:n,loading:n,variant:"secondary",onClick:async()=>{await t({id:s.id}).unwrap(),P.success(`${s.name} successfully deleted`)},size:a?"icon":"default",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(we,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Delete"})]})})]})}function mt(){const{data:s,isLoading:a,isError:t}=La(),[n,{isLoading:i}]=Ea(),[r,c]=h.useState([]),[m,o]=h.useState(!1),p=de(V(je),V(ge,{coordinateGetter:he}));h.useEffect(()=>{s&&c(s)},[s]);function f(u){const{active:l,over:x}=u;if(x&&l.id!==x.id){const g=r.findIndex(j=>j.id===l.id),b=r.findIndex(j=>j.id===x.id),v=fe(r,g,b).map((j,T)=>({...j,index:T}));c(v),o(!0)}}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch packings"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((u,l)=>e.jsx(I,{className:"h-11 w-full"},l))}),s&&e.jsx(ue,{sensors:p,collisionDetection:xe,onDragEnd:f,modifiers:[me],children:e.jsx(pe,{items:r,children:e.jsx("div",{className:"space-y-2",children:r.map(u=>e.jsx(ut,{item:u},u.id))})})}),e.jsx(F,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!m,"visible opacity-100":m}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{c(s),o(!1)},children:"Cancel"}),e.jsx(D,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await n({packings:r}).unwrap(),o(!1),P.success("Changes saved")},children:"Save changes"})]})})]})}function rn(){return e.jsx(M,{title:"Packing Services",children:e.jsxs(z,{className:"max-w-2xl",children:[e.jsx(H,{children:e.jsx(Ke,{})}),e.jsx(R,{children:e.jsx(mt,{})})]})})}const xt=y.object({name:y.string().min(2,{message:"Truck name must be at least 2 characters"})});function pt(){const[s,{isLoading:a}]=_a(),t=B({resolver:K(xt),reValidateMode:"onChange",defaultValues:{name:""}});async function n(i){await s(i).unwrap(),P.success(`${i.name} successfully added`),t.reset()}return e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(n),className:"flex gap-4",children:[e.jsx(S,{control:t.control,name:"name",render:({field:i})=>e.jsxs(k,{className:"w-full",children:[e.jsx(C,{children:e.jsx(_,{...i,placeholder:"Truck name",className:"w-full"})}),e.jsx(E,{})]})}),e.jsx(D,{disabled:a,loading:a,children:"Add truck"})]})})}function ft(){const{data:s,isLoading:a,isError:t}=Ca(),[n,{isLoading:i}]=Ta(),[r,c]=h.useState([]),[m,o]=h.useState(!1);h.useEffect(()=>{s&&c(s)},[s]);async function p(){await n({trucks:r}).unwrap(),o(!1),P.success("Changes saved")}function f(u,l,x){const g=r.map(b=>b.id===u.id?{...b,[l]:x}:b);c(g),o(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch trucks"})}):e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[a&&e.jsx(e.Fragment,{children:Array.from({length:3}).map((u,l)=>e.jsx(I,{className:"h-9 w-full"},l))}),r==null?void 0:r.map((u,l)=>e.jsxs("div",{className:"flex items-center gap-6 font-medium md:gap-10",children:[e.jsxs("div",{className:"flex min-w-fit items-center gap-4 text-sm text-muted-foreground",children:[e.jsx($e,{className:"size-5"}),e.jsxs("span",{children:["Truck ",l+1]})]}),e.jsx(W,{checked:u.is_active,onCheckedChange:x=>{f(u,"is_active",x)}}),e.jsx(_,{value:u.name,onChange:x=>{const g=x.target.value;f(u,"name",g)}})]},u.id))]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!m,"visible opacity-100":m}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{c(s),o(!1)},children:"Cancel"}),e.jsx(D,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:p,children:"Save changes"})]})})})]})}function ln(){return e.jsx(M,{title:"Trucks",children:e.jsx(z,{className:"max-w-xl",children:e.jsxs(R,{className:"space-y-4",children:[e.jsx(pt,{}),e.jsx(ft,{})]})})})}function Y(s,a={}){s||(s=0);const{currency:t="USD",notation:n="standard"}=a,i=typeof s=="string"?parseFloat(s)/100:s/100;return new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:n,maximumFractionDigits:2}).format(i)}function ne(s){s=s.replace(/^#/,""),s.length===3&&(s=s.split("").map(r=>r+r).join(""));const a=parseInt(s,16),t=a>>16&255,n=a>>8&255,i=a&255;return`${t}, ${n}, ${i}`}const De="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function on(){const{data:s,isLoading:a}=Ce(),[t,{isLoading:n}]=Sa(),[i,r]=h.useState([]),[c,m]=h.useState(!1),[o,p]=h.useState(null);h.useEffect(()=>{s&&r(s)},[s]);function f(u){const l=i.map(x=>x.id===u.id?u:x);r(l),m(!0)}return e.jsx(M,{title:"Rates",children:e.jsxs(z,{children:[e.jsx(R,{className:"space-y-4",children:e.jsxs(Le,{className:"w-full",children:[e.jsxs("div",{className:d("mb-4 text-muted-foreground",De),children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:"2 movers"}),e.jsx("p",{children:"3 movers"}),e.jsx("p",{children:"4 movers"}),e.jsx("p",{children:"Extra mover"}),e.jsx("p",{children:"Extra truck"}),e.jsx("p",{children:"On/Off"}),e.jsx("p",{})]}),e.jsx(F,{}),e.jsxs("div",{className:"min-w-[900px] divide-y",children:[a&&e.jsx(ht,{}),i==null?void 0:i.map((u,l)=>e.jsxs("div",{className:d("py-4",De),children:[o===l?e.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[e.jsx(_,{value:u.name,onChange:x=>{f({...u,name:x.target.value})}}),e.jsx(_,{type:"color",value:u.color,onChange:x=>{f({...u,color:x.target.value})},className:"px-[2px] py-0"})]}):e.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:u.color,backgroundColor:`rgba(${ne(u.color)}, 0.1)`},children:[u.name,e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:u.color}})]}),Object.keys(u.movers_rates).slice(0,3).map((x,g)=>{const b=u.movers_rates[x].hourly_rate;return o===l?e.jsx(Q,{value:b,onValueChange:v=>{f({...u,movers_rates:{...u.movers_rates,[x]:{...u.movers_rates[x],hourly_rate:v}}})}},g):e.jsx("div",{children:Y(b)},g)}),e.jsx("div",{children:o===l?e.jsx(Q,{value:u.extra_mover_rate,onValueChange:x=>f({...u,extra_mover_rate:x})}):Y(u.extra_mover_rate)}),e.jsx("div",{children:o===l?e.jsx(Q,{value:u.extra_truck_rate,onValueChange:x=>f({...u,extra_truck_rate:x})}):Y(u.extra_truck_rate)}),e.jsx(W,{id:u.name,checked:u.enable,disabled:u.id===1,onCheckedChange:x=>{f({...u,enable:x})}}),e.jsxs(w,{variant:"ghost",className:"text-primary hover:text-primary",onClick:()=>{p(x=>x===l?null:l)},children:[e.jsx(Se,{}),"Edit"]})]},l))]}),e.jsx(te,{orientation:"horizontal"})]})}),e.jsx(Js,{className:"justify-end border-t pt-6",children:e.jsxs("div",{className:d("flex min-h-9 w-full gap-4 transition-opacity duration-500 sm:w-auto",{"invisible opacity-0":!c,"visible opacity-100":c}),children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{r(s),m(!1),p(null)},children:"Cancel"}),e.jsx(D,{type:"button",className:"w-full sm:w-auto",disabled:n,loading:n,onClick:async()=>{await t({rates:i}).unwrap(),m(!1),p(null),P.success("Changes saved")},children:"Save changes"})]})})]})})}function ht(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"}),e.jsx(I,{className:"h-9 w-full"})]},a))})}const gt=s=>new Date(s.getFullYear(),s.getMonth()+1,0);function Je({onSelectDate:s,className:a,classNames:t,showOutsideDays:n=!1,showFooter:i=!0,...r}){const{data:c,isLoading:m}=ba(),[o,p]=h.useState(r.today??new Date),f=new Date,u=new Date;return u.setMonth(f.getMonth()+11),e.jsxs(e.Fragment,{children:[e.jsx(Is,{month:o,onMonthChange:p,showOutsideDays:n,className:d("p-3",a),startMonth:f,endMonth:gt(u),classNames:{month:"space-y-4",months:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 relative",month_caption:"flex justify-center pt-1 relative items-center",month_grid:"w-full border-collapse space-y-1",caption_label:"text-sm font-medium",nav:"flex items-center justify-between absolute inset-x-0",button_previous:d(q({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),button_next:d(q({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),weeks:"w-full border-collapse space-y-",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2 gap-1",day_button:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:d(q({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),range_end:"day-range-end",selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",hidden:"invisible",...t},components:{Chevron:({...l})=>l.orientation==="left"?e.jsx(be,{...l,className:"h-4 w-4"}):e.jsx(ca,{...l,className:"h-4 w-4"}),Day:l=>{const{day:x}=l,g=x.date;if(m)return e.jsx("td",{children:e.jsx(I,{className:"h-8 w-8 p-0"})});if(!c)return e.jsx(e.Fragment,{});const b=g.getMonth()===o.getMonth(),v=ke(g,"yyyy-MM-dd"),j=c[v],T=(j==null?void 0:j.rate)??null,N={color:"inherit",backgroundColor:"inherit",opacity:1};return j!=null&&j.is_blocked&&(N.color="black",N.backgroundColor="#dcdcdc"),T&&(N.color=T.color,N.backgroundColor=`rgba(${ne(T==null?void 0:T.color)}, 0.1)`),b||(N.backgroundColor="#f3f3f3",N.color="#7e7e7e",N.opacity=.5),e.jsx("td",{children:e.jsx("button",{className:d(q({variant:"ghost"}),"h-8 w-8 p-0 font-semibold aria-selected:opacity-100"),disabled:!b,style:N,onClick:()=>{s(g,j)},children:g.getDate()})})}},...r}),i&&e.jsx(jt,{})]})}Je.displayName="CalendarWithRates";function jt(){const{data:s}=Ce();return e.jsx("div",{className:"w-full border-t bg-muted",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-x-4 gap-y-2 px-6 py-4 text-xs font-semibold",children:[s==null?void 0:s.map((a,t)=>e.jsx(Ge,{children:e.jsxs(Ga,{delayDuration:20,children:[e.jsx(Qa,{asChild:!0,className:"cursor-help",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:a.color,backgroundColor:`rgba(${ne(a.color)}, 0.1)`},children:[a.name,e.jsx(da,{className:"size-4"})]},a.id)}),e.jsx(Ha,{className:"min-w-60 divide-y border bg-background text-foreground shadow-lg",children:Object.keys(a.movers_rates).slice(0,3).map((n,i)=>{const r=a.movers_rates[n].hourly_rate;return e.jsxs("div",{className:"flex justify-between py-1 font-medium",children:[e.jsxs("span",{children:[n," movers & truck"]}),e.jsx("span",{children:Y(r)})]},i)})})]})},t)),e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:"#000000",backgroundColor:"#dcdcdc"},children:["Blocked",e.jsx("span",{className:"size-1.5 rounded-full",style:{backgroundColor:"#000000"}})]})]})})}function vt({className:s,...a}){return e.jsx(Ls,{"data-slot":"radio-group",className:d("grid gap-3",s),...a})}function Ee({className:s,...a}){return e.jsx(Ps,{"data-slot":"radio-group-item",className:d("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Ds,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(ua,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function yt({isOpen:s,setIsOpen:a,calendarDayInfo:t}){const{data:n}=Ce(),[i]=Na(),r=n==null?void 0:n.filter(l=>l.enable);if(!s&&!t)return null;const{id:c,rate:m,is_blocked:o}=t,p=(m==null?void 0:m.id)??0,f=ke(new Date(t.formated_date+"T00:00:00"),"PPP");async function u(l,x){const g={};x===0?(g.is_blocked=!0,g.rate_id=null):(g.rate_id=x,g.is_blocked=!1),await i({id:l,newData:g}).unwrap()}return e.jsx(X,{open:s,onOpenChange:a,children:e.jsxs(Z,{className:"sm:max-w-xs",children:[e.jsxs(ee,{children:[e.jsx(se,{children:f}),e.jsx(Te,{className:"hidden"})]}),e.jsxs(vt,{defaultValue:o?"0":p.toString(),onValueChange:l=>{u(c,parseInt(l))},className:"gap-4",children:[r==null?void 0:r.map((l,x)=>e.jsxs(le,{htmlFor:l.id.toString(),className:"flex w-full cursor-pointer items-center gap-6 rounded-md p-3 transition-all hover:ring",style:{color:l.color,backgroundColor:`rgba(${ne(l.color)}, 0.1)`},children:[e.jsx(Ee,{value:l.id.toString(),id:l.id.toString()}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:[l.name,e.jsx("span",{className:"size-2 rounded-full",style:{backgroundColor:l.color}})]})]},x)),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(le,{htmlFor:"0",className:"flex w-full cursor-pointer items-center gap-6 rounded-md bg-foreground/20 p-3 text-foreground transition-all hover:ring",children:[e.jsx(Ee,{value:"0",id:"0"}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:["Blocked",e.jsx("span",{className:"size-2 rounded-full bg-black"})]})]})})]})]})})}const bt=()=>{const s=[],a=new Date;for(let t=0;t<=11;t++){const n=new Date(a.getFullYear(),a.getMonth()+t,1);s.push(n)}return s};function Nt(){const s=bt(),[a,t]=h.useState(!1),[n,i]=h.useState();function r(c,m){t(!0),i(m)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid justify-items-center gap-y-6 xl:grid-cols-2",children:s.map((c,m)=>e.jsx(Je,{onSelectDate:r,mode:"single",today:c,disableNavigation:!0,showFooter:!1,className:"rounded-xl border",hideNavigation:!0},m))}),n&&e.jsx(yt,{isOpen:a,setIsOpen:t,calendarDayInfo:n})]})}function cn(){return e.jsx(M,{title:"Calendar Rates",children:e.jsx(z,{className:"max-w-2xl",children:e.jsx(R,{className:"py-4",children:e.jsx(Nt,{})})})})}function wt({...s}){return e.jsx(Es,{"data-slot":"select",...s})}function St({...s}){return e.jsx(Fs,{"data-slot":"select-value",...s})}function kt({className:s,children:a,...t}){return e.jsxs(zs,{"data-slot":"select-trigger",className:d("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t,children:[a,e.jsx(Rs,{asChild:!0,children:e.jsx(Oe,{className:"size-4 opacity-50"})})]})}function Ct({className:s,children:a,position:t="popper",...n}){return e.jsx(Ms,{children:e.jsxs(Us,{"data-slot":"select-content",className:d("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[e.jsx(_t,{}),e.jsx($s,{className:d("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(Tt,{})]})})}function ze({className:s,children:a,...t}){return e.jsxs(As,{"data-slot":"select-item",className:d("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Os,{children:e.jsx(ma,{className:"size-4"})})}),e.jsx(qs,{children:a})]})}function _t({className:s,...a}){return e.jsx(Vs,{"data-slot":"select-scroll-up-button",className:d("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(xa,{className:"size-4"})})}function Tt({className:s,...a}){return e.jsx(Bs,{"data-slot":"select-scroll-down-button",className:d("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Oe,{className:"size-4"})})}function It({defaultValue:s,onValueChange:a,isPending:t,items:n,placeholder:i,disabled:r,className:c="",isControlled:m=!1}){const o=m?{value:s,onValueChange:a}:{defaultValue:s,onValueChange:a};return e.jsxs(wt,{...o,children:[e.jsx(C,{children:e.jsx(kt,{disabled:r,className:d(c),children:e.jsx(St,{placeholder:i??"Select"})})}),e.jsx(Ct,{children:t?e.jsx(ze,{disabled:!0,value:"loading",className:"h-14",children:e.jsx(J,{})}):n==null?void 0:n.map(({label:p,value:f})=>e.jsx(ze,{value:f,children:p},f))})]})}const Lt="US";function Xe({className:s,type:a,handleValueChange:t,...n}){const i=r=>{const c=r.target.value,m=new fa(Lt).input(c);t(m)};return e.jsx("input",{...n,type:"tel",autoComplete:"off",inputMode:"numeric",title:"Please enter your phone number",maxLength:14,className:d("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),onChange:i})}const Pt=[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"Foreman",value:"foreman"},{label:"Driver",value:"driver"},{label:"Helper",value:"helper"}],Dt=y.object({first_name:y.string().min(2,{message:"First name must be at least 2 characters."}),last_name:y.string().min(2,{message:"Last name must be at least 2 characters."}),email_address:y.string().email({message:"Invalid email address."}),phone:y.string().refine(s=>qe(s,"US"),{message:"Invalid phone number"}),active:y.boolean().optional(),role:y.string().optional(),password:y.string().optional()});function Ze({user:s,callback:a}){const[t,{isLoading:n}]=Va(),[i,{isLoading:r}]=Ba(),c=B({mode:"onChange",reValidateMode:"onChange",resolver:K(Dt),defaultValues:{first_name:(s==null?void 0:s.first_name)??"",last_name:(s==null?void 0:s.last_name)??"",email_address:(s==null?void 0:s.email_address)??"",phone:(s==null?void 0:s.phone)??"",role:(s==null?void 0:s.role)??"",active:(s==null?void 0:s.active)??!0,password:""}});async function m(o){if(s){const p=await t({id:(s==null?void 0:s.id)??0,data:o}).unwrap();p&&(P.success(`${p.first_name} updated successfully`),c.reset({...p,password:""}))}else{const p=await i({data:o}).unwrap();p&&(P.success(`${p.first_name} created successfully`),c.reset({...p,password:""}),a&&a())}}return e.jsx(G,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(m),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{control:c.control,name:"first_name",render:({field:o})=>e.jsxs(k,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(L,{className:"col-span-2",children:"First Name"}),e.jsx(C,{children:e.jsx(_,{...o,autoComplete:"off",className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(S,{control:c.control,name:"last_name",render:({field:o})=>e.jsxs(k,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(L,{className:"col-span-2",children:"Last Name"}),e.jsx(C,{children:e.jsx(_,{...o,autoComplete:"off",className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(S,{control:c.control,name:"email_address",render:({field:o})=>e.jsxs(k,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(L,{className:"col-span-2",children:"Email"}),e.jsx(C,{children:e.jsx(_,{...o,autoComplete:"off",className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(S,{control:c.control,name:"phone",render:({field:o})=>e.jsxs(k,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(L,{className:"col-span-2",children:"Phone"}),e.jsx(C,{children:e.jsx(Xe,{...o,value:ye(o.value??""),handleValueChange:o.onChange,className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(S,{control:c.control,name:"role",render:({field:o})=>e.jsxs(k,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(L,{className:"col-span-2",children:"Position"}),e.jsx(It,{defaultValue:o.value,onValueChange:o.onChange,placeholder:"Select a role",className:"col-span-4 w-full",items:Pt.map(({label:p,value:f})=>({label:p,value:f}))})]})}),e.jsx(S,{control:c.control,name:"password",render:({field:o})=>e.jsxs(k,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(L,{className:"col-span-2",children:"Password"}),e.jsx(C,{children:e.jsx(_,{...o,autoComplete:"off",type:"password",className:"col-span-4"})}),e.jsx(E,{})]})}),e.jsx(S,{control:c.control,name:"active",render:({field:o})=>e.jsxs(k,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{className:"text-base",children:"Employee is active"}),e.jsx(et,{children:"If the employee is active, they will be able to login to the system."})]}),e.jsx(C,{children:e.jsx(W,{checked:o.value,onCheckedChange:o.onChange})})]})})]}),e.jsx(F,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c.formState.isDirty,"visible opacity-100":c.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>c.reset(),children:"Cancel"}),e.jsx(D,{type:"submit",className:"w-full sm:w-auto",disabled:n||r,loading:n||r,children:"Save changes"})]})})]})})}function Et(){const[s,a]=h.useState(!1);return e.jsxs(X,{open:s,onOpenChange:a,children:[e.jsx(_e,{asChild:!0,children:e.jsx(w,{className:"ml-auto",children:"Add User"})}),e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsx(se,{children:"Add User"})}),e.jsx("div",{className:"pt-4",children:e.jsx(Ze,{callback:()=>a(!1)})})]})]})}function zt({className:s,...a}){return e.jsx(Gs,{"data-slot":"tabs",className:d("flex flex-col gap-2",s),...a})}function Rt({className:s,...a}){return e.jsx(Qs,{"data-slot":"tabs-list",className:d("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...a})}function Ft({className:s,...a}){return e.jsx(Hs,{"data-slot":"tabs-trigger",className:d("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}const Mt=["all","admin","manager","foreman","driver","helper"];function Ut({filter:s,handleSetFilter:a}){return e.jsx(zt,{value:s,onValueChange:t=>{a(t)},children:e.jsxs(Le,{className:"pb-2",children:[e.jsx(Rt,{children:Mt.map(t=>e.jsx(Ft,{value:t,className:"capitalize",children:t},t))}),e.jsx(te,{orientation:"horizontal"})]})})}const $t=Ws("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function At({className:s,...a}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:d("w-full caption-bottom text-sm",s),...a})})}function Ot({className:s,...a}){return e.jsx("thead",{"data-slot":"table-header",className:d("[&_tr]:border-b",s),...a})}function qt({className:s,...a}){return e.jsx("tbody",{"data-slot":"table-body",className:d("[&_tr:last-child]:border-0",s),...a})}function es({className:s,...a}){return e.jsx("tr",{"data-slot":"table-row",className:d("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function A({className:s,...a}){return e.jsx("th",{"data-slot":"table-head",className:d("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function O({className:s,...a}){return e.jsx("td",{"data-slot":"table-cell",className:d("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function Vt(s,a){return`${s.charAt(0)}${a.charAt(0)}`.toUpperCase()}function Bt({users:s}){return e.jsxs(At,{className:"min-w-[750px]",children:[e.jsx(Ot,{children:e.jsxs(es,{children:[e.jsx(A,{children:"Name"}),e.jsx(A,{children:"Role"}),e.jsx(A,{children:"Phone"}),e.jsx(A,{children:"Email"}),e.jsx(A,{children:"Status"}),e.jsx(A,{className:"text-right",children:"Actions"})]})}),e.jsx(qt,{children:s.map(a=>e.jsx(Gt,{user:a},a.id))})]})}function Gt({user:s}){return e.jsxs(es,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Wa,{children:e.jsx(Ya,{children:Vt(s.first_name,s.last_name)})}),`${s.first_name} ${s.last_name}`]}),e.jsx(O,{className:"capitalize",children:s.role}),e.jsx(O,{children:s.phone?ye(s.phone):"-"}),e.jsx(O,{children:s.email_address}),e.jsx(O,{children:e.jsxs("span",{className:d($t({variant:"outline"}),"relative overflow-hidden"),children:[e.jsx("span",{className:`${s.active?"bg-[#00a455]":"bg-foreground/50"} absolute inset-0 opacity-15`}),e.jsx("span",{className:`${s.active?"text-[#00a455]":"text-foreground"} capitalize`,children:s.active?"Active":"Inactive"})]})}),e.jsx(O,{className:"text-right",children:e.jsx(w,{size:"icon",variant:"outline",asChild:!0,children:e.jsx(ve,{to:`${s.id}`,children:e.jsx(Se,{})})})})]})}function dn(){const s=Me(),{data:a,isLoading:t}=Oa(),[n,i]=h.useState("all"),r=a==null?void 0:a.filter(m=>n==="all"?m:m.role===n);function c(m){i(m)}return s.id?e.jsx(Fe,{}):e.jsx(M,{title:"Department",children:e.jsxs(z,{children:[e.jsx(H,{children:e.jsx(Et,{})}),e.jsxs(R,{className:"space-y-2",children:[e.jsx(Ut,{filter:n,handleSetFilter:c}),t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(J,{})}),r&&e.jsx(Bt,{users:r??[]})]})]})})}function un(){const{id:s}=Me(),{data:a,isLoading:t}=qa({id:s});return e.jsxs(Ie,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx(w,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(ve,{to:"/crm/settings/department",children:e.jsx(be,{})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a&&`${a==null?void 0:a.first_name} ${a==null?void 0:a.last_name}`})]}),e.jsxs("div",{className:"flex h-5 px-4 space-x-2 text-muted-foreground text-sm",children:[e.jsxs("span",{children:["Employee ID: ",(a==null?void 0:a.id)??""]}),e.jsx(F,{orientation:"vertical"}),e.jsxs("span",{children:["Creation Date:"," ",a!=null&&a.created_at?ke(a==null?void 0:a.created_at,"dd MMM, yyyy"):""]})]})]}),e.jsx("div",{className:"overflow-y-auto p-4",children:e.jsx(z,{className:"max-w-2xl",children:e.jsxs(R,{children:[t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(J,{})}),a&&e.jsx(Ze,{user:a})]})})})]})}const Qt=y.object({company_name:y.string(),company_address:y.string(),company_phone:y.string().refine(s=>qe(s,"US"),{message:"Invalid phone number"}),company_email:y.string().email(),company_website:y.string()});function Ht({data:s}){const[a,{isLoading:t}]=Xs(),n=B({resolver:K(Qt),defaultValues:{company_name:s.company_name??"",company_address:s.company_address??"",company_phone:s.company_phone??"",company_email:s.company_email??"",company_website:s.company_website??""}});async function i(r){const c=await a({data:r}).unwrap();c&&(P.success("Changes saved"),n.reset({...c}))}return e.jsx(G,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-6",children:[e.jsx(S,{control:n.control,name:"company_name",render:({field:r})=>e.jsxs(k,{children:[e.jsx(L,{children:"Company name"}),e.jsx(C,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(S,{control:n.control,name:"company_address",render:({field:r})=>e.jsxs(k,{children:[e.jsx(L,{children:"Company address"}),e.jsx(C,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(S,{control:n.control,name:"company_phone",render:({field:r})=>e.jsxs(k,{children:[e.jsx(L,{children:"Company phone"}),e.jsx(C,{children:e.jsx(Xe,{...r,value:ye(r.value??""),handleValueChange:r.onChange})}),e.jsx(E,{})]})}),e.jsx(S,{control:n.control,name:"company_email",render:({field:r})=>e.jsxs(k,{children:[e.jsx(L,{children:"Company email"}),e.jsx(C,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(S,{control:n.control,name:"company_website",render:({field:r})=>e.jsxs(k,{children:[e.jsx(L,{children:"Company website"}),e.jsx(C,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(F,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!n.formState.isDirty,"visible opacity-100":n.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>n.reset(),children:"Cancel"}),e.jsx(D,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})]})})}function Wt(){const{data:s}=Ue(),[a,{isLoading:t}]=Zs(),[n,i]=h.useState(null),[r,c]=h.useState(null),[m,o]=h.useState(!1),p=s==null?void 0:s.company_logo;async function f(v){v.preventDefault();const j=new FormData;n&&j.append("setting[company_logo]",n),await a({data:j}).unwrap()&&P.success("Changes saved")}const u=v=>{var T;const j=(T=v.target.files)==null?void 0:T[0];if(j){i(j);const N=URL.createObjectURL(j);c(N)}},l=v=>{v.preventDefault(),o(!0)},x=v=>{v.preventDefault(),o(!1)},g=v=>{var T;v.preventDefault(),o(!1);const j=(T=v.dataTransfer.files)==null?void 0:T[0];if(j&&j.type.startsWith("image/")){i(j);const N=URL.createObjectURL(j);c(N)}},b=()=>{i(null),c(null),o(!1);const v=document.getElementById("logo-upload");v&&(v.value="")};return h.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:d("relative flex h-28 w-40 cursor-pointer flex-col items-center justify-center rounded-lg transition-colors","border-2 border-dashed border-gray-300 dark:border-gray-700","hover:bg-gray-50 dark:hover:bg-gray-800/50",m&&"border-primary bg-gray-50 dark:bg-gray-800/50",(r||p)&&"h-28 w-40"),onDragOver:l,onDragLeave:x,onDrop:g,onClick:()=>{var v;return(v=document.getElementById("logo-upload"))==null?void 0:v.click()},children:r||p?e.jsx("img",{src:r||p,alt:"Company logo",className:"h-full w-full rounded-lg object-contain"}):e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 text-center",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-4 dark:bg-gray-800",children:e.jsx(pa,{className:"h-6 w-6 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-primary",children:"Click to upload"})," ","or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SVG, PNG, JPG or GIF (max. 2MB)"})]})}),e.jsx(_,{id:"logo-upload",type:"file",accept:"image/*",onChange:u,className:"hidden"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!r,"visible opacity-100":r}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(w,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:b,children:"Cancel"}),e.jsx(D,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})})]})}function mn(){const{data:s,isLoading:a}=Ue();return e.jsx(M,{title:"Company",children:a?e.jsx("div",{className:"flex h-96 max-w-xl items-center justify-center",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(z,{className:"max-w-xl",children:[e.jsx(H,{children:e.jsx(Pe,{children:"Company Information"})}),e.jsx(R,{children:e.jsx(Ht,{data:s})})]}),e.jsxs(z,{className:"max-w-xl",children:[e.jsx(H,{children:e.jsx(Pe,{children:"Branding"})}),e.jsx(R,{children:e.jsx(Wt,{})})]})]})})}export{Wa as A,cn as C,X as D,nn as E,tn as M,rn as P,on as R,F as S,Ge as T,un as U,Ra as a,Ga as b,Ve as c,Qa as d,Aa as e,Ha as f,Ya as g,ga as h,ee as i,se as j,Te as k,Z as l,ln as m,dn as n,mn as o,Ia as p,an as q,wa as r,ha as s,ka as t,Be as u};
