import{j as e,e as Ws,r as f,f as Ks,g as Xs,h as Zs,i as ea,k as sa,A as aa,l as ta,m as na,F as ra,n as ia,o as la,p as oa,q as xs,s as ca,D as da,u as ua,O as ma,v as pa,w as xa,S as ga,x as ha,y as fa,z as j,B,t as I,E as Ae,H as ja,J as va,K as ie,L as le,M as oe,N as q,Q as ce,U as de,V as ue,W as me,X as pe,Y as xe,Z as ge,_ as he,$ as ya,a0 as ba,a1 as wa,a2 as Na,a3 as Sa,a4 as _a,a5 as ka,a6 as Ca,a7 as Ta,a8 as Ia,a9 as Pa,aa as za,ab as Da,ac as Ma,ad as Ea,ae as La,af as Ra,ag as Aa,ah as $a,ai as Fa,aj as qa,ak as Oa,al as Ua,am as Ba,b as Va,an as Ya,ao as Ga,ap as Qa,aq as Ha,ar as Ja,as as Wa,at as Ka,au as Xa}from"./vendor-CV3lS3m5.js";import{b as gs,N as hs,O as $e,L as re,c as K,u as fs}from"./vendor-router-B9UsIiAi.js";import{b as O,s as We,a as Ke,c as Za,r as et,d as u,e as G,B as _,L as Ze,I as k,f as P,C as R,g as $,h as Q,i as st,S as Fe,j as qe,P as at,u as tt,k as js,l as nt,m as Le,n as rt,o as it}from"./page-auth-CabKHF1w.js";import{X as vs,b as lt,P as ot,H as ct,c as dt,T as as,D as ut,C as mt,U as pt,d as xt,e as fe,G as je,f as Oe,g as ys,h as Ue,i as bs,I as gt,j as ht,k as ts,l as ft,m as jt,n as vt,o as yt,p as bt,q as wt}from"./vendor-ui-RPHv_71o.js";import{f as H}from"./vendor-date-fns-DfMoQYqq.js";import{A as Nt,i as ws}from"./vendor-libphonenumber-js-CCC02C6p.js";import{c as ve,a as U,b as St,u as _t,d as kt}from"./vendor-redux-DjfqBDeM.js";const Ct={contract:null,changes:{},isCompleted:{1:!1,2:!1,3:!1,4:!1,5:!1},isEnabled:{1:!0,2:!1,3:!1,4:!1,5:!1},activeStep:1},Ns=ve({name:"contract",initialState:Ct,reducers:{setContract(s,a){var n,o,l,c,x,g,m;s.contract={...s.contract,...a.payload},s.isCompleted={1:!!((n=s.contract)!=null&&n.terms_signature),2:!!((o=s.contract)!=null&&o.declaration_value_signature),3:!!((l=s.contract)!=null&&l.start_time_signature)&&!!((c=s.contract)!=null&&c.end_time_signature),4:!!((x=s.contract)!=null&&x.payment_signature),5:!!((g=s.contract)!=null&&g.final_signature)&&!!((m=s.contract)!=null&&m.foreman_signature)},s.activeStep=Object.keys(s.isCompleted).findIndex(d=>!s.isCompleted[parseInt(d)])+1;const t={1:["terms_signature"],2:["declaration_value_signature"],3:["start_time_signature","end_time_signature"],4:["payment_signature"],5:["final_signature","foreman_signature"]},i=s.contract,r=d=>{const p=d-1;return p===0?!0:t[p].every(v=>!!i[v])};s.isEnabled=Object.keys(t).reduce((d,p)=>(d[parseInt(p)]=r(parseInt(p)),d),{})},updateContractField:(s,a)=>{s.changes={...s.changes,...a.payload}},resetChanges(s){s.changes={}},setActiveStep(s,a){s.activeStep=a.payload}}}),Tt=Ns.reducer,{setContract:Zr,setActiveStep:ei,updateContractField:si,resetChanges:ai}=Ns.actions,It=new Date;It.setHours(0,0,0,0);const Pt={selectedDate:new Date().toISOString(),selectedRequest:null,open:!1,parklotRequests:null},Ss=ve({name:"parklot",initialState:Pt,reducers:{setSelectedDate(s,a){s.selectedDate=a.payload},setSelectedRequest:(s,a)=>{s.selectedRequest=a.payload},setOpen:(s,a)=>{s.open=a.payload},setParklotRequests:(s,a)=>{s.parklotRequests=a.payload},updateParklotRequest:(s,a)=>{var t;s.parklotRequests=((t=s.parklotRequests)==null?void 0:t.map(i=>i.id===a.payload.id?{...i,...a.payload}:i))??null}}}),zt=Ss.reducer,{setSelectedDate:ti,setSelectedRequest:ni,setOpen:ri,setParklotRequests:ii,updateParklotRequest:li}=Ss.actions,Dt={request:null,changes:{},hasChanges:!1,parklotRequests:null},_s=ve({name:"request",initialState:Dt,reducers:{setRequest(s,a){s.request={...s.request,...a.payload}},updateField:(s,a)=>{s.changes={...s.changes,...a.payload},s.hasChanges=!!Object.keys(s.changes).length},resetChanges(s){s.changes={},s.hasChanges=!1},setParklotRequests:(s,a)=>{s.parklotRequests=a.payload}}}),Mt=_s.reducer,{setRequest:Et,updateField:oi,resetChanges:ci}=_s.actions,Lt={filter:"pending",page:1},ks=ve({name:"auth",initialState:Lt,reducers:{setFilter(s,a){s.filter=a.payload},setPage(s,a){s.page=a.payload}}}),{setFilter:Rt,setPage:_e}=ks.actions,At=ks.reducer,$t={currentModal:null,open:!1},Cs=ve({name:"modal",initialState:$t,reducers:{openModal:(s,a)=>{s.currentModal=a.payload,s.open=!0},closeModal:s=>{s.currentModal=null,s.open=!1}}}),{openModal:di,closeModal:ui}=Cs.actions,Ft=Cs.reducer,ke=U({reducerPath:"requestsApi",baseQuery:O,tagTypes:["Request","StatusCounts"],endpoints:s=>({getRequests:s.query({query:({filter:a,page:t})=>a&&t?`/requests?filter=${a}&page=${t}`:"/requests",providesTags(a){return a?[...a.requests.map(({id:t})=>({type:"Request",id:t})),{type:"Request",id:"LIST"}]:[{type:"Request",id:"LIST"}]}}),getStatusCounts:s.query({query:()=>"/requests/status_counts",providesTags:()=>[{type:"StatusCounts"}]}),getRequestById:s.query({query:({id:a})=>`/requests/${a}`,async onQueryStarted(a,{queryFulfilled:t,dispatch:i}){try{const r=await t;i(Et(r.data)),console.log("result",r)}catch(r){console.log("error",r)}},providesTags:(a,t,{id:i})=>[{type:"Request",id:i}]}),updateRequest:s.mutation({query:({id:a,data:t})=>({url:`/requests/${a}`,method:"PUT",body:{request:t}}),invalidatesTags:[{type:"Request",id:"LIST"},{type:"StatusCounts"}]}),createRequest:s.mutation({query:a=>({url:"/requests",method:"POST",body:a}),invalidatesTags:[{type:"Request",id:"LIST"}]}),createCustomer:s.mutation({query:a=>({url:"/users",method:"POST",body:{user:{...a,password:window.crypto.randomUUID()}}})}),updateCustomer:s.mutation({query:({id:a,data:t})=>({url:`/users/${a}`,method:"PUT",body:{user:t}})})})}),{useGetRequestsQuery:qt,useGetStatusCountsQuery:Ot,useCreateRequestMutation:mi}=ke,Ce=U({reducerPath:"servicesApi",baseQuery:O,tagTypes:["Service"],endpoints:s=>({getServices:s.query({query:()=>"/services",providesTags(a){return a?[...a.map(({id:t})=>({type:"Service",id:t})),{type:"Service",id:"LIST"}]:[{type:"Service",id:"LIST"}]}}),createService:s.mutation({query:a=>({url:"/services",method:"POST",body:{service:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),bulkUpdateServices:s.mutation({query:a=>({url:"/services/bulk_update",method:"POST",body:{services:a.services}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),deleteService:s.mutation({query:({id:a})=>({url:`/services/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]})})}),{useGetServicesQuery:Ts,useCreateServiceMutation:Ut,useBulkUpdateServicesMutation:Bt,useDeleteServiceMutation:Vt}=Ce,te=U({reducerPath:"calendarRatesApi",baseQuery:O,tagTypes:["CalendarRate"],endpoints:s=>({getCalendarRates:s.query({query:()=>"/calendar_rates",providesTags:a=>a?[...Object.values(a).map(t=>({type:"CalendarRate",id:t.id})),{type:"CalendarRate",id:"LIST"}]:[{type:"CalendarRate",id:"LIST"}]}),updateCalendarRate:s.mutation({query:({id:a,newData:t})=>({url:`/calendar_rates/${a}`,method:"PUT",body:{calendar_rate:t}}),invalidatesTags:(a,t,{id:i})=>t?[]:[{type:"CalendarRate",id:i}]})})}),{useGetCalendarRatesQuery:Yt,useUpdateCalendarRateMutation:Gt}=te,Te=U({reducerPath:"ratesApi",baseQuery:O,tagTypes:["Rate","CalendarRate"],endpoints:s=>({getRates:s.query({query:()=>"/rates",providesTags(a){return a?[...a.map(({id:t})=>({type:"Rate",id:t})),{type:"Rate",id:"LIST"}]:[{type:"Rate",id:"LIST"}]}}),bulkUpdateRates:s.mutation({query:a=>({url:"/rates/bulk_update",method:"POST",body:{rates:a.rates}}),invalidatesTags:(a,t)=>t?[]:[{type:"Rate",id:"LIST"}],async onQueryStarted(a,{dispatch:t,queryFulfilled:i}){try{await i,t(te.util.invalidateTags([{type:"CalendarRate",id:"LIST"}]))}catch(r){console.log("error",r)}}})})}),{useGetRatesQuery:Be,useBulkUpdateRatesMutation:Qt}=Te,Ie=U({reducerPath:"trucksApi",baseQuery:O,tagTypes:["Truck"],endpoints:s=>({getTrucks:s.query({query:()=>"/trucks",providesTags(a){return a?[...a.map(({id:t})=>({type:"Truck",id:t})),{type:"Truck",id:"LIST"}]:[{type:"Truck",id:"LIST"}]}}),createTruck:s.mutation({query:a=>({url:"/trucks",method:"POST",body:{truck:a}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),bulkUpdateTrucks:s.mutation({query:a=>({url:"/trucks/bulk_update",method:"POST",body:{trucks:a.trucks}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),deleteTruck:s.mutation({query:({id:a})=>({url:`/trucks/${a}`,method:"DELETE"}),invalidatesTags:[{type:"Truck",id:"LIST"}]})})}),{useGetTrucksQuery:Ht,useCreateTruckMutation:Jt,useBulkUpdateTrucksMutation:Wt}=Ie,Pe=U({reducerPath:"packingsApi",baseQuery:O,tagTypes:["Packing"],endpoints:s=>({getPackings:s.query({query:()=>"/packings",providesTags(a){return a?[...a.map(({id:t})=>({type:"Packing",id:t})),{type:"Packing",id:"LIST"}]:[{type:"Packing",id:"LIST"}]}}),updatePacking:s.mutation({query:({id:a,...t})=>({url:`/packings/${a}`,method:"PATCH",body:{packing:t}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),createPacking:s.mutation({query:a=>({url:"/packings",method:"POST",body:{packing:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),bulkUpdatePackings:s.mutation({query:a=>({url:"/packings/bulk_update",method:"POST",body:{packings:a.packings}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),deletePacking:s.mutation({query:({id:a})=>({url:`/packings/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]})})}),{useGetPackingsQuery:Kt,useCreatePackingMutation:Xt,useUpdatePackingMutation:Zt,useBulkUpdatePackingsMutation:en,useDeletePackingMutation:sn}=Pe,ze=U({reducerPath:"extraServicesApi",baseQuery:O,tagTypes:["ExtraService"],endpoints:s=>({getExtraServices:s.query({query:()=>"/extra_services",providesTags(a){return a?[...a.map(({id:t})=>({type:"ExtraService",id:t})),{type:"ExtraService",id:"LIST"}]:[{type:"ExtraService",id:"LIST"}]}}),createExtraService:s.mutation({query:a=>({url:"/extra_services",method:"POST",body:{extra_service:a}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),bulkUpdateExtraServices:s.mutation({query:a=>({url:"/extra_services/bulk_update",method:"POST",body:{extra_services:a.extra_services}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),deleteExtraService:s.mutation({query:({id:a})=>({url:`/extra_services/${a}`,method:"DELETE"}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]})})}),{useGetExtraServicesQuery:an,useCreateExtraServiceMutation:tn,useBulkUpdateExtraServicesMutation:nn,useDeleteExtraServiceMutation:rn}=ze,De=U({reducerPath:"employeesApi",baseQuery:O,tagTypes:["Employee"],endpoints:s=>({getEmployees:s.query({query:()=>"/employees",providesTags(a){return a?[...a.map(({id:t})=>({type:"Employee",id:t})),{type:"Employee",id:"LIST"}]:[{type:"Employee",id:"LIST"}]}}),getEmployeeById:s.query({query:({id:a})=>`/employees/${a}`,providesTags:(a,t,{id:i})=>a?[{type:"Employee",id:i}]:[{type:"Employee",id:"LIST"}]}),updateEmployee:s.mutation({query:({id:a,data:t})=>({url:`/employees/${a}`,method:"PUT",body:{employee:t}}),invalidatesTags:(a,t,{id:i})=>t?[]:[{type:"Employee",id:i},{type:"Employee",id:"LIST"}]}),createEmployee:s.mutation({query:({data:a})=>({url:"/employees",method:"POST",body:{employee:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Employee",id:"LIST"}]})})}),{useGetEmployeesQuery:ln,useGetEmployeeByIdQuery:on,useUpdateEmployeeMutation:cn,useCreateEmployeeMutation:dn}=De,Me=U({reducerPath:"moveSizesApi",baseQuery:O,tagTypes:["MoveSize"],endpoints:s=>({getMoveSizes:s.query({query:()=>"/move_sizes",providesTags(a){return a?[...a.map(({id:t})=>({type:"MoveSize",id:t})),{type:"MoveSize",id:"LIST"}]:[{type:"MoveSize",id:"LIST"}]}}),createMoveSize:s.mutation({query:a=>{var i,r,n,o;console.log("moveSize",a);const t=new FormData;return t.append("move_size[name]",a.name??""),t.append("move_size[description]",a.description??""),t.append("move_size[dispersion]",((i=a.dispersion)==null?void 0:i.toString())??""),t.append("move_size[truck_count]",((r=a.truck_count)==null?void 0:r.toString())??""),t.append("move_size[volume]",((n=a.volume)==null?void 0:n.toString())??""),t.append("move_size[weight]",((o=a.weight)==null?void 0:o.toString())??""),t.append("move_size[crew_size_settings]",JSON.stringify(a.crew_size_settings)),a.image&&t.append("move_size[image]",a.image),{url:"/move_sizes",method:"POST",body:t}},invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),updateMoveSize:s.mutation({query:({id:a,...t})=>{var r,n,o,l;console.log("moveSize",t);const i=new FormData;return i.append("move_size[name]",t.name??""),i.append("move_size[description]",t.description??""),i.append("move_size[dispersion]",((r=t.dispersion)==null?void 0:r.toString())??""),i.append("move_size[truck_count]",((n=t.truck_count)==null?void 0:n.toString())??""),i.append("move_size[volume]",((o=t.volume)==null?void 0:o.toString())??""),i.append("move_size[weight]",((l=t.weight)==null?void 0:l.toString())??""),i.append("move_size[crew_size_settings]",JSON.stringify(t.crew_size_settings)),t.image&&i.append("move_size[image]",t.image),{url:`/move_sizes/${a}`,method:"PATCH",body:i}},invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),bulkUpdateMoveSizes:s.mutation({query:a=>({url:"/move_sizes/bulk_update",method:"POST",body:{move_sizes:a.moveSizes}}),invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),deleteMoveSize:s.mutation({query:({id:a})=>({url:`/move_sizes/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]})})}),{useGetMoveSizesQuery:Is,useCreateMoveSizeMutation:un,useUpdateMoveSizeMutation:mn,useBulkUpdateMoveSizesMutation:pn,useDeleteMoveSizeMutation:xn}=Me,Ee=U({reducerPath:"entranceTypesApi",baseQuery:O,tagTypes:["EntranceType"],endpoints:s=>({getEntranceTypes:s.query({query:()=>"/entrance_types",providesTags(a){return a?[...a.map(({id:t})=>({type:"EntranceType",id:t})),{type:"EntranceType",id:"LIST"}]:[{type:"EntranceType",id:"LIST"}]}}),createEntranceType:s.mutation({query:a=>({url:"/entrance_types",method:"POST",body:{entrance_type:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"EntranceType",id:"LIST"}]}),bulkUpdateEntranceTypes:s.mutation({query:a=>({url:"/entrance_types/bulk_update",method:"POST",body:{entrance_types:a.entranceTypes}}),invalidatesTags:(a,t)=>t?[]:[{type:"EntranceType",id:"LIST"}]}),deleteEntranceType:s.mutation({query:({id:a})=>({url:`/entrance_types/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"EntranceType",id:"LIST"}]})})}),{useGetEntranceTypesQuery:ns,useCreateEntranceTypeMutation:gn,useBulkUpdateEntranceTypesMutation:hn,useDeleteEntranceTypeMutation:fn}=Ee,pi=St({reducer:{auth:Za,contract:Tt,parklot:zt,request:Mt,requests:At,modal:Ft,[Ke.reducerPath]:Ke.reducer,[ke.reducerPath]:ke.reducer,[Ce.reducerPath]:Ce.reducer,[te.reducerPath]:te.reducer,[Te.reducerPath]:Te.reducer,[Ie.reducerPath]:Ie.reducer,[Pe.reducerPath]:Pe.reducer,[ze.reducerPath]:ze.reducer,[De.reducerPath]:De.reducer,[We.reducerPath]:We.reducer,[Me.reducerPath]:Me.reducer,[Ee.reducerPath]:Ee.reducer},middleware:s=>s().concat(et,Ke.middleware,ke.middleware,Ce.middleware,te.middleware,Te.middleware,Ie.middleware,Pe.middleware,ze.middleware,De.middleware,We.middleware,Me.middleware,Ee.middleware)}),Ps=_t.withTypes(),zs=kt.withTypes();function F({className:s,orientation:a="horizontal",decorative:t=!0,...i}){return e.jsx(Ws,{"data-slot":"separator-root",decorative:t,orientation:a,className:u("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...i})}const Xe=768;function Ve(){const[s,a]=f.useState(void 0);return f.useEffect(()=>{const t=window.matchMedia(`(max-width: ${Xe-1}px)`),i=()=>{a(window.innerWidth<Xe)};return t.addEventListener("change",i),a(window.innerWidth<Xe),()=>t.removeEventListener("change",i)},[]),!!s}function L({className:s,...a}){return e.jsx("div",{"data-slot":"skeleton",className:u("bg-primary/10 animate-pulse rounded-md",s),...a})}function Ds({delayDuration:s=0,...a}){return e.jsx(Ks,{"data-slot":"tooltip-provider",delayDuration:s,...a})}function jn({...s}){return e.jsx(Ds,{children:e.jsx(Xs,{"data-slot":"tooltip",...s})})}function vn({...s}){return e.jsx(Zs,{"data-slot":"tooltip-trigger",...s})}function yn({className:s,sideOffset:a=4,children:t,...i}){return e.jsx(ea,{children:e.jsxs(sa,{"data-slot":"tooltip-content",sideOffset:a,className:u("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",s),...i,children:[t,e.jsx(aa,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function rs({className:s,...a}){return e.jsx(ta,{"data-slot":"avatar",className:u("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...a})}function Ms({className:s,...a}){return e.jsx(na,{"data-slot":"avatar-image",className:u("aspect-square size-full",s),...a})}function is({className:s,...a}){return e.jsx(ra,{"data-slot":"avatar-fallback",className:u("bg-muted flex size-full items-center justify-center rounded-full",s),...a})}function X({...s}){return e.jsx(ia,{"data-slot":"dialog",...s})}function ye({...s}){return e.jsx(la,{"data-slot":"dialog-trigger",...s})}function bn({...s}){return e.jsx(ua,{"data-slot":"dialog-portal",...s})}function Ye({...s}){return e.jsx(xs,{"data-slot":"dialog-close",className:u(G({variant:"outline"}),"mt-2 sm:mt-0"),...s})}function wn({className:s,...a}){return e.jsx(ma,{"data-slot":"dialog-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function Z({className:s,children:a,...t}){return e.jsxs(bn,{"data-slot":"dialog-portal",children:[e.jsx(wn,{}),e.jsxs(oa,{"data-slot":"dialog-content",className:u("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...t,children:[a,e.jsxs(xs,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(vs,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ee({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:u("flex flex-col gap-2 text-center sm:text-left",s),...a})}function Ge({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-footer",className:u("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function se({className:s,...a}){return e.jsx(ca,{"data-slot":"dialog-title",className:u("text-lg leading-none font-semibold",s),...a})}function be({className:s,...a}){return e.jsx(da,{"data-slot":"dialog-description",className:u("text-muted-foreground text-sm",s),...a})}function J({children:s,className:a}){return e.jsx("div",{className:u("overflow-y-auto pb-6",a),children:s})}const Nn=[{name:"Company",href:"company",icon:lt},{name:"Moving Services",href:"services",icon:ot},{name:"Extra Services",href:"extra-services",icon:ct},{name:"Packing",href:"packing",icon:dt},{name:"Trucks",href:"trucks",icon:as,prefetchUrl:"/trucks"},{name:"Rates",href:"rates",icon:ut},{name:"Calendar Rates",href:"calendar-rates",icon:mt},{name:"Department",href:"department",icon:pt},{name:"Calculator",href:"calculator",icon:xt}];function Sn(){const{pathname:s}=gs();return e.jsxs(J,{className:u("hidden lg:block lg:border-r",{block:s==="/crm/settings"}),children:[e.jsx("h2",{className:"px-6 pt-4 text-lg font-semibold",children:"Settings"}),e.jsx("div",{className:"space-y-2 p-4",children:Nn.map((a,t)=>e.jsxs(hs,{to:a.href,className:({isActive:i})=>u(G({variant:i?"secondary":"ghost",className:"w-full justify-start text-left"})),children:[e.jsx(a.icon,{className:"size-4"}),a.name]},t))})]})}function xi(){return e.jsxs("div",{className:"grid h-full lg:grid-cols-[16rem_1fr]",children:[e.jsx(Sn,{}),e.jsx($e,{})]})}function V({children:s,title:a,className:t}){return e.jsxs(J,{className:"space-y-4 bg-muted dark:bg-background",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(_,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(re,{to:"/crm/settings",children:e.jsx(fe,{})})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a})]}),e.jsx("div",{className:u("overflow-y-auto p-4",t),children:s})]})}const Y=pa,Es=f.createContext({}),w=({...s})=>e.jsx(Es.Provider,{value:{name:s.name},children:e.jsx(xa,{...s})}),Qe=()=>{const s=f.useContext(Es),a=f.useContext(Ls),{getFieldState:t}=ha(),i=fa({name:s.name}),r=t(s.name,i);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:n}=a;return{id:n,name:s.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...r}},Ls=f.createContext({});function N({className:s,...a}){const t=f.useId();return e.jsx(Ls.Provider,{value:{id:t},children:e.jsx("div",{"data-slot":"form-item",className:u("grid gap-2",s),...a})})}function C({className:s,...a}){const{error:t,formItemId:i}=Qe();return e.jsx(Ze,{"data-slot":"form-label","data-error":!!t,className:u("data-[error=true]:text-destructive-foreground",s),htmlFor:i,...a})}function S({...s}){const{error:a,formItemId:t,formDescriptionId:i,formMessageId:r}=Qe();return e.jsx(ga,{"data-slot":"form-control",id:t,"aria-describedby":a?`${i} ${r}`:`${i}`,"aria-invalid":!!a,...s})}function _n({className:s,...a}){const{formDescriptionId:t}=Qe();return e.jsx("p",{"data-slot":"form-description",id:t,className:u("text-muted-foreground text-sm",s),...a})}function A({className:s,...a}){const{error:t,formMessageId:i}=Qe(),r=t?String(t==null?void 0:t.message):a.children;return r?e.jsx("p",{"data-slot":"form-message",id:i,className:u("text-destructive-foreground text-sm",s),...a,children:r}):null}const kn=j.object({name:j.string().min(5,{message:"Service name must be at least 5 characters"})});function Cn(){const[s,{isLoading:a}]=Ut(),t=B({resolver:Ae(kn),reValidateMode:"onChange",defaultValues:{name:""}});async function i(r){await s(r).unwrap(),I.success(`${r.name} successfully added`),t.reset()}return e.jsx("div",{children:e.jsx(Y,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),className:"flex gap-4",children:[e.jsx(w,{control:t.control,name:"name",render:({field:r})=>e.jsxs(N,{className:"w-full",children:[e.jsx(S,{children:e.jsx(k,{...r,placeholder:"Service name",autoComplete:"off",className:"bg-accent"})}),e.jsx(A,{})]})}),e.jsx(P,{loading:a,disabled:a,children:"Add service"})]})})})}function we({className:s,...a}){return e.jsx(ja,{"data-slot":"switch",className:u("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(va,{"data-slot":"switch-thumb",className:u("bg-background pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function Tn({id:s,item:a,onEnabledChange:t}){const[i,{isLoading:r}]=Vt(),{attributes:n,listeners:o,setNodeRef:l,transform:c,transition:x,isDragging:g}=ie({id:s}),m={transform:le.Transform.toString(c),transition:x,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{ref:l,style:m,className:u("grid grid-cols-[max-content_1fr_max-content_max-content] border rounded-md items-center gap-2 p-2",{"bg-background shadow-lg":g}),children:[e.jsx(_,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...n,...o,children:e.jsx(je,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:a.name})}),e.jsx(we,{checked:a.enabled,onCheckedChange:d=>{t(a.id,d)}}),a.is_default?e.jsx("div",{className:"size-9"}):e.jsx(P,{loading:r,disabled:r,variant:"ghost",size:"icon",className:"hover:text-red-600",onClick:async()=>{await i({id:a.id}).unwrap(),I.success(`${a.name} successfully deleted`)},children:e.jsx(Oe,{})})]})}function In(){const{data:s,isLoading:a,isError:t}=Ts(),[i,{isLoading:r}]=Bt(),[n,o]=f.useState([]),[l,c]=f.useState(!1),x=oe(q(he),q(ge,{coordinateGetter:xe}));f.useEffect(()=>{s&&o(s)},[s]);function g(d){const{active:p,over:h}=d;if(h&&p.id!==h.id){const v=n.findIndex(b=>b.id===p.id),z=n.findIndex(b=>b.id===h.id),T=pe(n,v,z).map((b,E)=>({...b,index:E}));o(T),c(!0)}}function m(d,p){o(h=>h.map(v=>v.id===d?{...v,enabled:p}:v)),c(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:8}).map((d,p)=>e.jsx(L,{className:"h-13.5 w-full"},p))}),s&&e.jsx(ce,{sensors:x,collisionDetection:ue,onDragEnd:g,modifiers:[de],children:e.jsx(me,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(d=>e.jsx(Tn,{id:d.id,item:d,onEnabledChange:m},d.id))})})}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l,"visible opacity-100":l}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{o(s),c(!1)},children:"Cancel"}),e.jsx(P,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:async()=>{await i({services:n}).unwrap(),I.success("Changes saved"),c(!1)},children:"Save changes"})]})})]})}function gi(){return e.jsx(V,{title:"Moving Services",children:e.jsx(R,{className:"max-w-xl",children:e.jsxs($,{className:"space-y-6",children:[e.jsx(Cn,{}),e.jsx(In,{})]})})})}function Ne({className:s,children:a,...t}){return e.jsxs(ya,{"data-slot":"scroll-area",className:u("relative",s),...t,children:[e.jsx(ba,{"data-slot":"scroll-area-viewport",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1",children:a}),e.jsx(ae,{}),e.jsx(wa,{})]})}function ae({className:s,orientation:a="vertical",...t}){return e.jsx(Na,{"data-slot":"scroll-area-scrollbar",orientation:a,className:u("flex touch-none p-px transition-colors select-none",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",s),...t,children:e.jsx(Sa,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Pn(s){return(s/100).toString()}function ne(s){const{value:a,onValueChange:t,className:i,...r}=s,[n,o]=f.useState("0");return f.useEffect(()=>{o(Pn(a))},[a]),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(k,{pattern:"[0-9]+",inputMode:"numeric",value:n,onChange:l=>{const c=l.target.value.replace(/[^0-9.]/g,"");if(/^\d*\.?\d{0,2}$/.test(c)){o(c);const x=parseFloat(c)||0;t(x*100)}},className:u("pl-4",i),...r}),e.jsx("span",{className:"absolute left-2 flex bg-transparent text-sm",children:"$"})]})}function zn({id:s,item:a,onChange:t}){const[i,{isLoading:r}]=rn(),{attributes:n,listeners:o,setNodeRef:l,transform:c,transition:x,isDragging:g}=ie({id:s}),m={transform:le.Transform.toString(c),transition:x,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{ref:l,style:m,className:u("grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 p-2",{"bg-background shadow-lg":g}),children:[e.jsx(_,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...n,...o,children:e.jsx(je,{})}),e.jsx(k,{value:a.name,onChange:d=>{const p=d.target.value;t(a.id,{name:p})},name:a.name}),e.jsx(ne,{value:a.price,onValueChange:d=>{t(a.id,{price:d})}}),e.jsx(we,{checked:a.enabled,onCheckedChange:d=>{t(a.id,{enabled:d})}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(P,{disabled:r,loading:r,variant:"secondary",onClick:async()=>{await i({id:a.id}).unwrap(),I.success(`${a.name} successfully deleted`)},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"size-4"}),"Delete"]})})})]})}function Dn(){const{data:s,isLoading:a,isError:t}=an(),[i,{isLoading:r}]=nn(),[n,o]=f.useState([]),[l,c]=f.useState(!1),x=oe(q(he),q(ge,{coordinateGetter:xe}));f.useEffect(()=>{s&&o(s)},[s]);function g(d){const{active:p,over:h}=d;if(h&&p.id!==h.id){const v=n.findIndex(b=>b.id===p.id),z=n.findIndex(b=>b.id===h.id),T=pe(n,v,z).map((b,E)=>({...b,index:E}));o(T),c(!0)}}function m(d,p){o(h=>h.map(v=>v.id===d?{...v,...p}:v)),c(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch extra services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(Ne,{className:"w-full",children:[e.jsxs("div",{className:"mb-4 grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 text-sm font-medium text-muted-foreground",children:[e.jsx("p",{className:"size-9"}),e.jsx("p",{children:"Service name"}),e.jsx("p",{children:"Service cost, $"}),e.jsx("p",{children:"Enable"}),e.jsx("p",{})]}),e.jsx(F,{}),a&&e.jsx("div",{className:"space-y-2 pt-4",children:Array.from({length:5}).map((d,p)=>e.jsx(L,{className:"h-13 w-full"},p))}),s&&e.jsx(ce,{sensors:x,collisionDetection:ue,onDragEnd:g,modifiers:[de],children:e.jsx(me,{items:n,children:e.jsx("div",{className:"pt-4 min-w-[700px] space-y-2",children:n.map(d=>e.jsx(zn,{id:d.id,item:d,onChange:m},d.id))})})}),e.jsx(ae,{orientation:"horizontal"})]}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l,"visible opacity-100":l}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{o(s),c(!1)},children:"Cancel"}),e.jsx(P,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:async()=>{await i({extra_services:n}).unwrap(),c(!1),I.success("Changes saved"),c(!1)},children:"Save changes"})]})})]})}j.object({name:j.string().min(5),price:j.number().min(1),enabled:j.boolean()});function Mn(){const[s,{isLoading:a}]=tn(),[t,i]=f.useState(!1),r=B({defaultValues:{name:"",price:0,enabled:!0}});function n(){r.reset(),i(l=>!l)}async function o(l){await s(l).unwrap(),I.success(`${l.name} successfully added`),r.reset(),n()}return e.jsxs(X,{open:t,onOpenChange:n,children:[e.jsx(ye,{asChild:!0,className:"ml-auto",children:e.jsx(_,{size:"icon",children:e.jsx(ys,{})})}),e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Add extra service"}),e.jsx(be,{className:"hidden"})]}),e.jsx(Y,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(o),className:"space-y-4",children:[e.jsx(w,{control:r.control,name:"name",render:({field:l})=>e.jsxs(N,{children:[e.jsx(C,{children:"Name"}),e.jsx(S,{children:e.jsx(k,{placeholder:"Service name",...l})})]})}),e.jsx(w,{control:r.control,name:"price",render:({field:l})=>e.jsxs(N,{children:[e.jsx(C,{children:"Price"}),e.jsx(S,{children:e.jsx(ne,{name:"price",value:l.value,onValueChange:c=>{r.setValue("price",c)}})})]})}),e.jsxs(Ge,{children:[e.jsx(Ye,{children:"Cancel"}),e.jsx(P,{type:"submit",loading:a,disabled:a,children:"Add service"})]})]})})]})]})}function hi(){return e.jsx(V,{title:"Extra Services",children:e.jsxs(R,{className:"max-w-4xl gap-0",children:[e.jsx(Q,{className:"flex flex-row items-center",children:e.jsx(Mn,{})}),e.jsx($,{children:e.jsx(Dn,{})})]})})}function ls({className:s,...a}){return e.jsx("textarea",{"data-slot":"textarea",className:u("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}j.object({name:j.string(),description:j.string(),labor_increase:j.number()});function Rs({data:s}){const[a,{isLoading:t}]=Xt(),[i,{isLoading:r}]=Zt(),[n,o]=f.useState(!1),l=Ve(),c=!!s,x=B({defaultValues:{name:"",description:"",labor_increase:0}});f.useEffect(()=>{s&&x.reset(s)},[s]);function g(){x.reset(),o(d=>!d)}async function m(d){c?(await i({id:s.id,...d}).unwrap(),I.success("Packing successfully updated")):(await a(d).unwrap(),I.success("Packing successfully added")),x.reset(),g()}return e.jsxs(X,{open:n,onOpenChange:g,children:[e.jsx(ye,{asChild:!0,className:`${c?null:"ml-auto"}`,children:c?e.jsxs(_,{variant:"outline",className:"text-primary hover:text-primary",size:l?"icon":"default",children:[e.jsx(Ue,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(_,{size:"icon",children:e.jsx(ys,{})})}),e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsxs(se,{children:[c?"Edit":"Add"," packing service"]}),e.jsx(be,{className:"hidden"})]}),e.jsx(Y,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(m),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-280px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(w,{control:x.control,name:"name",render:({field:d})=>e.jsxs(N,{children:[e.jsx(C,{children:"Name"}),e.jsx(S,{children:e.jsx(k,{...d})})]})}),e.jsx(w,{control:x.control,name:"description",render:({field:d})=>e.jsxs(N,{children:[e.jsx(C,{children:"Description"}),e.jsx(S,{children:e.jsx(ls,{rows:16,...d})})]})}),e.jsx(w,{control:x.control,name:"labor_increase",render:({field:d})=>e.jsxs(N,{children:[e.jsx(C,{children:"Labor increse (%)"}),e.jsx(S,{children:e.jsx(k,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...d})})]})})]}),e.jsxs(Ge,{children:[e.jsx(Ye,{children:"Cancel"}),e.jsx(P,{type:"submit",loading:t||r,disabled:t||r,children:c?"Save changes":"Add packing"})]})]})})]})]})}function En({item:s}){const a=Ve(),[t,{isLoading:i}]=sn(),r=s.is_default,{attributes:n,listeners:o,setNodeRef:l,transform:c,transition:x,isDragging:g}=ie({id:s.id}),m={transform:le.Transform.toString(c),transition:x,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{ref:r?null:l,style:m,className:u("grid grid-cols-[max-content_1fr_auto_auto] border rounded-md items-center gap-2 p-4",{"bg-background shadow-lg":g}),children:[e.jsx(_,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",disabled:r,...r?{}:n,...r?{}:o,children:e.jsx(je,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:s.name})}),e.jsx(Rs,{data:s}),r?e.jsx(_,{variant:"ghost",disabled:!0,size:a?"icon":"default",children:e.jsx("span",{className:"hidden md:inline-flex ml-4",children:"Default"})}):null,!r&&e.jsx(P,{disabled:i,loading:i,variant:"secondary",onClick:async()=>{await t({id:s.id}).unwrap(),I.success(`${s.name} successfully deleted`)},size:a?"icon":"default",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Oe,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Delete"})]})})]})}function Ln(){const{data:s,isLoading:a,isError:t}=Kt(),[i,{isLoading:r}]=en(),[n,o]=f.useState([]),[l,c]=f.useState(!1),x=oe(q(he),q(ge,{coordinateGetter:xe}));f.useEffect(()=>{s&&o(s)},[s]);function g(m){const{active:d,over:p}=m;if(p&&d.id!==p.id){const h=n.findIndex(y=>y.id===d.id),v=n.findIndex(y=>y.id===p.id),z=pe(n,h,v).map((y,T)=>({...y,index:T}));o(z),c(!0)}}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch packings"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((m,d)=>e.jsx(L,{className:"h-17.5 w-full"},d))}),s&&e.jsx(ce,{sensors:x,collisionDetection:ue,onDragEnd:g,modifiers:[de],children:e.jsx(me,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(m=>e.jsx(En,{item:m},m.id))})})}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l,"visible opacity-100":l}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{o(s),c(!1)},children:"Cancel"}),e.jsx(P,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:async()=>{await i({packings:n}).unwrap(),c(!1),I.success("Changes saved")},children:"Save changes"})]})})]})}function fi(){return e.jsx(V,{title:"Packing Services",children:e.jsxs(R,{className:"max-w-2xl",children:[e.jsx(Q,{children:e.jsx(Rs,{})}),e.jsx($,{children:e.jsx(Ln,{})})]})})}const Rn=j.object({name:j.string().min(2,{message:"Truck name must be at least 2 characters"})});function An(){const[s,{isLoading:a}]=Jt(),t=B({resolver:Ae(Rn),reValidateMode:"onChange",defaultValues:{name:""}});async function i(r){await s(r).unwrap(),I.success(`${r.name} successfully added`),t.reset()}return e.jsx(Y,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),className:"flex gap-4",children:[e.jsx(w,{control:t.control,name:"name",render:({field:r})=>e.jsxs(N,{className:"w-full",children:[e.jsx(S,{children:e.jsx(k,{...r,placeholder:"Truck name",autoComplete:"off",className:"bg-accent"})}),e.jsx(A,{})]})}),e.jsx(P,{disabled:a,loading:a,children:"Add truck"})]})})}function $n(){const{data:s,isLoading:a,isError:t}=Ht(),[i,{isLoading:r}]=Wt(),[n,o]=f.useState([]),[l,c]=f.useState(!1);f.useEffect(()=>{s&&o(s)},[s]);async function x(){await i({trucks:n}).unwrap(),c(!1),I.success("Changes saved")}function g(m,d,p){const h=n.map(v=>v.id===m.id?{...v,[d]:p}:v);o(h),c(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch trucks"})}):e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((m,d)=>e.jsx(L,{className:"h-9 w-full"},d))}),e.jsx("div",{className:"space-y-4",children:n==null?void 0:n.map((m,d)=>e.jsxs("div",{className:"grid grid-cols-[6rem_3rem_1fr] gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(as,{className:"size-5"}),e.jsxs("span",{children:["Truck ",d+1]})]}),e.jsx(we,{checked:m.is_active,onCheckedChange:p=>{g(m,"is_active",p)}}),e.jsx(k,{value:m.name,onChange:p=>{const h=p.target.value;g(m,"name",h)}})]},m.id))}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l,"visible opacity-100":l}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{o(s),c(!1)},children:"Cancel"}),e.jsx(P,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:x,children:"Save changes"})]})})})]})}function ji(){return e.jsx(V,{title:"Trucks",children:e.jsx(R,{className:"max-w-xl",children:e.jsxs($,{className:"space-y-6",children:[e.jsx(An,{}),e.jsx($n,{})]})})})}function W(s,a={}){s||(s=0);const{currency:t="USD",notation:i="standard"}=a,r=typeof s=="string"?parseFloat(s)/100:s/100;return new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:i,maximumFractionDigits:2}).format(r)}function He(s){s=s.replace(/^#/,""),s.length===3&&(s=s.split("").map(n=>n+n).join(""));const a=parseInt(s,16),t=a>>16&255,i=a>>8&255,r=a&255;return`${t}, ${i}, ${r}`}function Fn(s){if(!s)return"To be determined";const{min:a,max:t}=s;if(a==null||t==null)return"To be determined";const i=W(a),r=W(t);return a===t?r:t===0?i:`${i} - ${r}`}const cs="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function vi(){const{data:s,isLoading:a}=Be(),[t,{isLoading:i}]=Qt(),[r,n]=f.useState([]),[o,l]=f.useState(!1),[c,x]=f.useState(null);f.useEffect(()=>{s&&n(s)},[s]);function g(m){const d=r.map(p=>p.id===m.id?m:p);n(d),l(!0)}return e.jsx(V,{title:"Rates",children:e.jsxs(R,{children:[e.jsx($,{className:"space-y-4",children:e.jsxs(Ne,{className:"w-full",children:[e.jsxs("div",{className:u("mb-4 text-muted-foreground",cs),children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:"2 movers"}),e.jsx("p",{children:"3 movers"}),e.jsx("p",{children:"4 movers"}),e.jsx("p",{children:"Extra mover"}),e.jsx("p",{children:"Extra truck"}),e.jsx("p",{children:"On/Off"}),e.jsx("p",{})]}),e.jsx(F,{}),e.jsxs("div",{className:"min-w-[900px] divide-y",children:[a&&e.jsx(qn,{}),r==null?void 0:r.map((m,d)=>e.jsxs("div",{className:u("py-4",cs),children:[c===d?e.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[e.jsx(k,{value:m.name,onChange:p=>{g({...m,name:p.target.value})}}),e.jsx(k,{type:"color",value:m.color,onChange:p=>{g({...m,color:p.target.value})},className:"px-[2px] py-0"})]}):e.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:m.color,backgroundColor:`rgba(${He(m.color)}, 0.1)`},children:[m.name,e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:m.color}})]}),Object.keys(m.movers_rates).slice(0,3).map((p,h)=>{const v=m.movers_rates[p].hourly_rate;return c===d?e.jsx(ne,{value:v,onValueChange:z=>{g({...m,movers_rates:{...m.movers_rates,[p]:{...m.movers_rates[p],hourly_rate:z}}})}},h):e.jsx("div",{children:W(v)},h)}),e.jsx("div",{children:c===d?e.jsx(ne,{value:m.extra_mover_rate,onValueChange:p=>g({...m,extra_mover_rate:p})}):W(m.extra_mover_rate)}),e.jsx("div",{children:c===d?e.jsx(ne,{value:m.extra_truck_rate,onValueChange:p=>g({...m,extra_truck_rate:p})}):W(m.extra_truck_rate)}),e.jsx(we,{id:m.name,checked:m.enable,disabled:m.id===1,onCheckedChange:p=>{g({...m,enable:p})}}),e.jsxs(_,{variant:"outline",onClick:()=>{x(p=>p===d?null:d)},children:[e.jsx(Ue,{}),"Edit"]})]},d))]}),e.jsx(ae,{orientation:"horizontal"})]})}),e.jsx(st,{className:"justify-end border-t pt-6",children:e.jsxs("div",{className:u("flex min-h-9 w-full gap-4 transition-opacity duration-500 sm:w-auto",{"invisible opacity-0":!o,"visible opacity-100":o}),children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{n(s),l(!1),x(null)},children:"Cancel"}),e.jsx(P,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await t({rates:r}).unwrap(),l(!1),x(null),I.success("Changes saved")},children:"Save changes"})]})})]})})}function qn(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"}),e.jsx(L,{className:"h-9 w-full"})]},a))})}const On=s=>new Date(s.getFullYear(),s.getMonth()+1,0);function As({onSelectDate:s,className:a,classNames:t,showOutsideDays:i=!1,showFooter:r=!0,...n}){const{data:o,isLoading:l}=Yt(),{data:c}=Be(),[x,g]=f.useState(n.today??new Date),m=new Date,d=new Date;return d.setMonth(m.getMonth()+11),e.jsxs(e.Fragment,{children:[e.jsx(_a,{month:x,onMonthChange:g,showOutsideDays:i,className:u("p-3",a),startMonth:m,endMonth:On(d),classNames:{month:"space-y-4",months:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 relative",month_caption:"flex justify-center pt-1 relative items-center",month_grid:"w-full border-collapse space-y-1",caption_label:"text-sm font-medium",nav:"flex items-center justify-between absolute inset-x-0",button_previous:u(G({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),button_next:u(G({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),weeks:"w-full border-collapse space-y-",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2 gap-1",day_button:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:u(G({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),range_end:"day-range-end",selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",hidden:"invisible",...t},components:{Chevron:({...p})=>p.orientation==="left"?e.jsx(fe,{...p,className:"h-4 w-4"}):e.jsx(bs,{...p,className:"h-4 w-4"}),Day:p=>{const{day:h}=p,v=h.date;if(l)return e.jsx("td",{children:e.jsx(L,{className:"h-8 w-8 p-0"})});if(!o)return e.jsx(e.Fragment,{});const z=v.getMonth()===x.getMonth(),y=H(v,"yyyy-MM-dd"),T=o[y],b=c==null?void 0:c.find(Je=>Je.id===(T==null?void 0:T.rate_id)),E={color:"inherit",backgroundColor:"inherit",opacity:1};return T!=null&&T.is_blocked&&(E.color="black",E.backgroundColor="#dcdcdc"),b&&(E.color=b.color,E.backgroundColor=`rgba(${He(b==null?void 0:b.color)}, 0.1)`),z||(E.backgroundColor="#f3f3f3",E.color="#7e7e7e",E.opacity=.5),e.jsx("td",{children:e.jsx("button",{className:u(G({variant:"ghost"}),"h-8 w-8 p-0 font-semibold aria-selected:opacity-100"),disabled:!z,style:E,onClick:()=>{s(v,T)},children:v.getDate()})})}},...n}),r&&e.jsx(Un,{})]})}As.displayName="CalendarWithRates";function Un(){const{data:s}=Be();return e.jsx("div",{className:"w-full border-t bg-muted",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-x-4 gap-y-2 px-6 py-4 text-xs font-semibold",children:[s==null?void 0:s.map((a,t)=>e.jsx(Ds,{children:e.jsxs(jn,{delayDuration:20,children:[e.jsx(vn,{asChild:!0,className:"cursor-help",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:a.color,backgroundColor:`rgba(${He(a.color)}, 0.1)`},children:[a.name,e.jsx(gt,{className:"size-4"})]},a.id)}),e.jsx(yn,{className:"min-w-60 divide-y border bg-background text-foreground shadow-lg",children:Object.keys(a.movers_rates).slice(0,3).map((i,r)=>{const n=a.movers_rates[i].hourly_rate;return e.jsxs("div",{className:"flex justify-between py-1 font-medium",children:[e.jsxs("span",{children:[i," movers & truck"]}),e.jsx("span",{children:W(n)})]},r)})})]})},t)),e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:"#000000",backgroundColor:"#dcdcdc"},children:["Blocked",e.jsx("span",{className:"size-1.5 rounded-full",style:{backgroundColor:"#000000"}})]})]})})}function Bn({className:s,...a}){return e.jsx(ka,{"data-slot":"radio-group",className:u("grid gap-3",s),...a})}function ds({className:s,...a}){return e.jsx(Ca,{"data-slot":"radio-group-item",className:u("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Ta,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(ht,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Vn({isOpen:s,setIsOpen:a,calendarDayInfo:t}){const{data:i}=Be(),[r]=Gt(),n=i==null?void 0:i.filter(d=>d.enable);if(!s&&!t)return null;const{id:o,rate_id:l,is_blocked:c}=t,x=l??0,g=H(new Date(t.formatted_date+"T00:00:00"),"PPP");async function m(d,p){const h={};p===0?(h.is_blocked=!0,h.rate_id=null):(h.rate_id=p,h.is_blocked=!1),await r({id:d,newData:h}).unwrap()}return e.jsx(X,{open:s,onOpenChange:a,children:e.jsxs(Z,{className:"sm:max-w-xs",children:[e.jsxs(ee,{children:[e.jsx(se,{children:g}),e.jsx(be,{className:"hidden"})]}),e.jsxs(Bn,{defaultValue:c?"0":x.toString(),onValueChange:d=>{m(o,parseInt(d))},className:"gap-4",children:[n==null?void 0:n.map((d,p)=>e.jsxs(Ze,{htmlFor:d.id.toString(),className:"flex w-full cursor-pointer items-center gap-6 rounded-md p-3 transition-all hover:ring",style:{color:d.color,backgroundColor:`rgba(${He(d.color)}, 0.1)`},children:[e.jsx(ds,{value:d.id.toString(),id:d.id.toString()}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:[d.name,e.jsx("span",{className:"size-2 rounded-full",style:{backgroundColor:d.color}})]})]},p)),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(Ze,{htmlFor:"0",className:"flex w-full cursor-pointer items-center gap-6 rounded-md bg-foreground/20 p-3 text-foreground transition-all hover:ring",children:[e.jsx(ds,{value:"0",id:"0"}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:["Blocked",e.jsx("span",{className:"size-2 rounded-full bg-black"})]})]})})]})]})})}const Yn=()=>{const s=[],a=new Date;for(let t=0;t<=11;t++){const i=new Date(a.getFullYear(),a.getMonth()+t,1);s.push(i)}return s};function Gn(){const s=Yn(),[a,t]=f.useState(!1),[i,r]=f.useState();function n(o,l){t(!0),r(l)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid justify-items-center gap-y-6 xl:grid-cols-2",children:s.map((o,l)=>e.jsx(As,{onSelectDate:n,mode:"single",today:o,disableNavigation:!0,showFooter:!1,className:"rounded-xl border",hideNavigation:!0},l))}),i&&e.jsx(Vn,{isOpen:a,setIsOpen:t,calendarDayInfo:i})]})}function yi(){return e.jsx(V,{title:"Calendar Rates",children:e.jsx(R,{className:"max-w-2xl",children:e.jsx($,{className:"py-4",children:e.jsx(Gn,{})})})})}function Qn({...s}){return e.jsx(Ia,{"data-slot":"select",...s})}function Hn({...s}){return e.jsx(Da,{"data-slot":"select-value",...s})}function Jn({className:s,children:a,...t}){return e.jsxs(Pa,{"data-slot":"select-trigger",className:u("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t,children:[a,e.jsx(za,{asChild:!0,children:e.jsx(ts,{className:"size-4 opacity-50"})})]})}function Wn({className:s,children:a,position:t="popper",...i}){return e.jsx(Ma,{children:e.jsxs(Ea,{"data-slot":"select-content",className:u("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...i,children:[e.jsx(Kn,{}),e.jsx(La,{className:u("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(Xn,{})]})})}function us({className:s,children:a,...t}){return e.jsxs(Ra,{"data-slot":"select-item",className:u("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Aa,{children:e.jsx(ft,{className:"size-4"})})}),e.jsx($a,{children:a})]})}function Kn({className:s,...a}){return e.jsx(Fa,{"data-slot":"select-scroll-up-button",className:u("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(jt,{className:"size-4"})})}function Xn({className:s,...a}){return e.jsx(qa,{"data-slot":"select-scroll-down-button",className:u("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(ts,{className:"size-4"})})}function Zn({defaultValue:s,onValueChange:a,isPending:t,items:i,placeholder:r,disabled:n,className:o="",isControlled:l=!1}){const c=l?{value:s,onValueChange:a}:{defaultValue:s,onValueChange:a};return e.jsxs(Qn,{...c,children:[e.jsx(S,{children:e.jsx(Jn,{disabled:n,className:u(o),children:e.jsx(Hn,{placeholder:r??"Select"})})}),e.jsx(Wn,{children:t?e.jsx(us,{disabled:!0,value:"loading",className:"h-14",children:e.jsx(Fe,{})}):i==null?void 0:i.map(({label:x,value:g})=>e.jsx(us,{value:g,children:x},g))})]})}const er="US";function $s({className:s,type:a,handleValueChange:t,...i}){const r=n=>{const o=n.target.value,l=new Nt(er).input(o);t(l)};return e.jsx("input",{...i,type:"tel",autoComplete:"off",inputMode:"numeric",title:"Please enter your phone number",maxLength:14,className:u("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),onChange:r})}const sr=[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"Foreman",value:"foreman"},{label:"Driver",value:"driver"},{label:"Helper",value:"helper"}],ar=j.object({first_name:j.string().min(2,{message:"First name must be at least 2 characters."}),last_name:j.string().min(2,{message:"Last name must be at least 2 characters."}),email_address:j.string().email({message:"Invalid email address."}),phone:j.string().refine(s=>ws(s,"US"),{message:"Invalid phone number"}),active:j.boolean().optional(),role:j.string().optional(),password:j.string().optional()});function Fs({user:s,callback:a}){const[t,{isLoading:i}]=cn(),[r,{isLoading:n}]=dn(),o=B({mode:"onChange",reValidateMode:"onChange",resolver:Ae(ar),defaultValues:{first_name:(s==null?void 0:s.first_name)??"",last_name:(s==null?void 0:s.last_name)??"",email_address:(s==null?void 0:s.email_address)??"",phone:(s==null?void 0:s.phone)??"",role:(s==null?void 0:s.role)??"",active:(s==null?void 0:s.active)??!0,password:""}});async function l(c){if(s){const x=await t({id:(s==null?void 0:s.id)??0,data:c}).unwrap();x&&(I.success(`${x.first_name} updated successfully`),o.reset({...x,password:""}))}else{const x=await r({data:c}).unwrap();x&&(I.success(`${x.first_name} created successfully`),o.reset({...x,password:""}),a&&a())}}return e.jsx(Y,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{control:o.control,name:"first_name",render:({field:c})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"First Name"}),e.jsx(S,{children:e.jsx(k,{...c,autoComplete:"off",className:"col-span-4"})}),e.jsx(A,{className:"col-span-2"})]})}),e.jsx(w,{control:o.control,name:"last_name",render:({field:c})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Last Name"}),e.jsx(S,{children:e.jsx(k,{...c,autoComplete:"off",className:"col-span-4"})}),e.jsx(A,{className:"col-span-2"})]})}),e.jsx(w,{control:o.control,name:"email_address",render:({field:c})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Email"}),e.jsx(S,{children:e.jsx(k,{...c,autoComplete:"off",className:"col-span-4"})}),e.jsx(A,{className:"col-span-2"})]})}),e.jsx(w,{control:o.control,name:"phone",render:({field:c})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Phone"}),e.jsx(S,{children:e.jsx($s,{...c,value:qe(c.value??""),handleValueChange:c.onChange,className:"col-span-4"})}),e.jsx(A,{className:"col-span-2"})]})}),e.jsx(w,{control:o.control,name:"role",render:({field:c})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Position"}),e.jsx(Zn,{defaultValue:c.value,onValueChange:c.onChange,placeholder:"Select a role",className:"col-span-4 w-full",items:sr.map(({label:x,value:g})=>({label:x,value:g}))})]})}),e.jsx(w,{control:o.control,name:"password",render:({field:c})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(C,{className:"col-span-2",children:"Password"}),e.jsx(S,{children:e.jsx(at,{...c,autoComplete:"off",className:"col-span-4"})}),e.jsx(A,{})]})}),e.jsx(w,{control:o.control,name:"active",render:({field:c})=>e.jsxs(N,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(C,{className:"text-base",children:"Employee is active"}),e.jsx(_n,{children:"If the employee is active, they will be able to login to the system."})]}),e.jsx(S,{children:e.jsx(we,{checked:c.value,onCheckedChange:c.onChange})})]})})]}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!o.formState.isDirty,"visible opacity-100":o.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>o.reset(),children:"Cancel"}),e.jsx(P,{type:"submit",className:"w-full sm:w-auto",disabled:i||n,loading:i||n,children:"Save changes"})]})})]})})}function tr(){const[s,a]=f.useState(!1);return e.jsxs(X,{open:s,onOpenChange:a,children:[e.jsx(ye,{asChild:!0,children:e.jsx(_,{className:"ml-auto",children:"Add User"})}),e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsx(se,{children:"Add User"})}),e.jsx("div",{className:"pt-4",children:e.jsx(Fs,{callback:()=>a(!1)})})]})]})}function qs({className:s,...a}){return e.jsx(Oa,{"data-slot":"tabs",className:u("flex flex-col gap-2",s),...a})}function Os({className:s,...a}){return e.jsx(Ua,{"data-slot":"tabs-list",className:u("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...a})}function Us({className:s,...a}){return e.jsx(Ba,{"data-slot":"tabs-trigger",className:u("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}const nr=["all","admin","manager","foreman","driver","helper"];function rr({filter:s,handleSetFilter:a}){return e.jsx(qs,{value:s,onValueChange:t=>{a(t)},children:e.jsxs(Ne,{className:"pb-2",children:[e.jsx(Os,{children:nr.map(t=>e.jsx(Us,{value:t,className:"capitalize",children:t},t))}),e.jsx(ae,{orientation:"horizontal"})]})})}const Bs=Va("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-semibold w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Vs({className:s,...a}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:u("w-full caption-bottom text-sm",s),...a})})}function Ys({className:s,...a}){return e.jsx("thead",{"data-slot":"table-header",className:u("[&_tr]:border-b",s),...a})}function Gs({className:s,...a}){return e.jsx("tbody",{"data-slot":"table-body",className:u("[&_tr:last-child]:border-0",s),...a})}function Re({className:s,...a}){return e.jsx("tr",{"data-slot":"table-row",className:u("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function D({className:s,...a}){return e.jsx("th",{"data-slot":"table-head",className:u("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function M({className:s,...a}){return e.jsx("td",{"data-slot":"table-cell",className:u("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function ir(s,a){return`${s.charAt(0)}${a.charAt(0)}`.toUpperCase()}function lr({users:s}){return e.jsxs(Vs,{className:"min-w-[750px]",children:[e.jsx(Ys,{children:e.jsxs(Re,{children:[e.jsx(D,{children:"Name"}),e.jsx(D,{children:"Role"}),e.jsx(D,{children:"Phone"}),e.jsx(D,{children:"Email"}),e.jsx(D,{children:"Status"}),e.jsx(D,{className:"text-right",children:"Actions"})]})}),e.jsx(Gs,{children:s.map(a=>e.jsx(or,{user:a},a.id))})]})}function or({user:s}){return e.jsxs(Re,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(rs,{children:e.jsx(is,{children:ir(s.first_name,s.last_name)})}),`${s.first_name} ${s.last_name}`]}),e.jsx(M,{className:"capitalize",children:s.role}),e.jsx(M,{children:s.phone?qe(s.phone):"-"}),e.jsx(M,{children:s.email_address}),e.jsx(M,{children:e.jsxs("span",{className:u(Bs({variant:"outline"}),"relative overflow-hidden border-transparent"),children:[e.jsx("span",{className:`${s.active?"bg-[#00a455]":"bg-foreground/50"} absolute inset-0 opacity-15`}),e.jsx("span",{className:`${s.active?"text-[#00a455]":"text-foreground"} capitalize`,children:s.active?"Active":"Inactive"})]})}),e.jsx(M,{className:"text-right",children:e.jsx(_,{size:"icon",variant:"outline",asChild:!0,children:e.jsx(re,{to:`${s.id}`,children:e.jsx(Ue,{})})})})]})}function bi(){const s=K(),{data:a,isLoading:t}=ln(),[i,r]=f.useState("all"),n=a==null?void 0:a.filter(l=>i==="all"?l:l.role===i);function o(l){r(l)}return s.id?e.jsx($e,{}):e.jsx(V,{title:"Department",children:e.jsxs(R,{children:[e.jsx(Q,{children:e.jsx(tr,{})}),e.jsxs($,{className:"space-y-2",children:[e.jsx(rr,{filter:i,handleSetFilter:o}),t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(Fe,{})}),n&&e.jsx(lr,{users:n??[]})]})]})})}function wi(){const{id:s}=K(),{data:a,isLoading:t}=on({id:s});return e.jsxs(J,{className:"space-y-4 bg-muted dark:bg-background",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx(_,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(re,{to:"/crm/settings/department",children:e.jsx(fe,{})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a&&`${a==null?void 0:a.first_name} ${a==null?void 0:a.last_name}`})]}),e.jsxs("div",{className:"flex h-5 px-4 space-x-2 text-muted-foreground text-sm",children:[e.jsxs("span",{children:["Employee ID: ",(a==null?void 0:a.id)??""]}),e.jsx(F,{orientation:"vertical"}),e.jsxs("span",{children:["Creation Date:"," ",a!=null&&a.created_at?H(a==null?void 0:a.created_at,"dd MMM, yyyy"):""]})]})]}),e.jsx("div",{className:"overflow-y-auto p-4",children:e.jsx(R,{className:"max-w-2xl",children:e.jsxs($,{children:[t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(Fe,{})}),a&&e.jsx(Fs,{user:a})]})})})]})}const cr=j.object({company_name:j.string(),company_address:j.string(),company_phone:j.string().refine(s=>ws(s,"US"),{message:"Invalid phone number"}),company_email:j.string().email(),company_website:j.string()});function dr({data:s}){const[a,{isLoading:t}]=tt(),i=B({resolver:Ae(cr),defaultValues:{company_name:s.company_name??"",company_address:s.company_address??"",company_phone:s.company_phone??"",company_email:s.company_email??"",company_website:s.company_website??""}});async function r(n){const o=await a({data:n}).unwrap();o&&(I.success("Changes saved"),i.reset({...o}))}return e.jsx(Y,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(r),className:"space-y-6",children:[e.jsx(w,{control:i.control,name:"company_name",render:({field:n})=>e.jsxs(N,{children:[e.jsx(C,{children:"Company name"}),e.jsx(S,{children:e.jsx(k,{...n,autoComplete:"off"})}),e.jsx(A,{})]})}),e.jsx(w,{control:i.control,name:"company_address",render:({field:n})=>e.jsxs(N,{children:[e.jsx(C,{children:"Company address"}),e.jsx(S,{children:e.jsx(k,{...n,autoComplete:"off"})}),e.jsx(A,{})]})}),e.jsx(w,{control:i.control,name:"company_phone",render:({field:n})=>e.jsxs(N,{children:[e.jsx(C,{children:"Company phone"}),e.jsx(S,{children:e.jsx($s,{...n,value:qe(n.value??""),handleValueChange:n.onChange})}),e.jsx(A,{})]})}),e.jsx(w,{control:i.control,name:"company_email",render:({field:n})=>e.jsxs(N,{children:[e.jsx(C,{children:"Company email"}),e.jsx(S,{children:e.jsx(k,{...n,autoComplete:"off"})}),e.jsx(A,{})]})}),e.jsx(w,{control:i.control,name:"company_website",render:({field:n})=>e.jsxs(N,{children:[e.jsx(C,{children:"Company website"}),e.jsx(S,{children:e.jsx(k,{...n,autoComplete:"off"})}),e.jsx(A,{})]})}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!i.formState.isDirty,"visible opacity-100":i.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>i.reset(),children:"Cancel"}),e.jsx(P,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})]})})}j.object({image:j.instanceof(File).nullable()});function ur(s){const a=s.target.files&&s.target.files[0],t=a?URL.createObjectURL(a):"";return{file:a,displayUrl:t}}function mr(){const{data:s}=js(),[a,{isLoading:t}]=nt(),[i,r]=f.useState(null),n=B({defaultValues:{image:null}});async function o(l){await a({image:l.image}).unwrap(),I.success("Changes saved"),n.reset()}return f.useEffect(()=>{s&&r(s.company_logo)},[s]),e.jsx(Y,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(o),className:"space-y-6",children:[e.jsx(w,{control:n.control,name:"image",render:({field:{value:l,onChange:c,...x}})=>e.jsxs(N,{children:[e.jsx(C,{children:"Logo"}),e.jsx(S,{children:e.jsx(k,{...x,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:g=>{const{file:m,displayUrl:d}=ur(g);r(d),c(m)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:i&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:i,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!n.formState.isDirty,"visible opacity-100":n.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{r((s==null?void 0:s.company_logo)||null),n.reset()},children:"Cancel"}),e.jsx(P,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})]})})}function Ni(){const{data:s,isLoading:a}=js();return e.jsx(V,{title:"Company",children:a?e.jsx("div",{className:"flex h-96 max-w-xl items-center justify-center",children:e.jsx(Fe,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(R,{className:"max-w-xl",children:[e.jsx(Q,{children:e.jsx(Le,{children:"Company Information"})}),e.jsx($,{children:e.jsx(dr,{data:s})})]}),e.jsxs(R,{className:"max-w-xl",children:[e.jsx(Q,{children:e.jsx(Le,{children:"Branding"})}),e.jsx($,{children:e.jsx(mr,{})})]})]})})}function pr({value:s,onChange:a}){const{data:t}=ns();if(!t)return null;const i=(r,n,o)=>{const l=s.map((c,x)=>c.map((g,m)=>x===r&&m===n?o:g));a(l)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col rounded-md overflow-hidden border",children:[e.jsx("div",{className:"bg-slate-900 text-white text-center p-1.5 font-semibold text-sm",children:"TO STAIRS"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-slate-900 text-white p-4 flex flex-col items-center justify-center w-8",children:e.jsx("div",{className:"transform -rotate-90 whitespace-nowrap font-semibold text-sm",children:"FROM STAIRS"})}),e.jsxs("div",{className:"bg-background p-4 flex-1",children:[e.jsxs("div",{className:"grid mb-4",style:{gridTemplateColumns:`repeat(${t.length+1}, 1fr)`},children:[e.jsx("div",{}),t.map((r,n)=>e.jsx("div",{className:"flex items-center justify-center text-muted-foreground font-medium text-sm",children:r.name.slice(0,3)},`col-${n}`))]}),e.jsx("div",{className:"grid gap-2",children:t.map((r,n)=>e.jsxs("div",{className:"grid gap-2 items-center",style:{gridTemplateColumns:`repeat(${t.length+1}, 1fr)`},children:[e.jsx("div",{className:"text-muted-foreground text-sm font-medium text-center",children:r.name.slice(0,3)}),t.map((o,l)=>e.jsx(k,{name:`cell-${n}-${l}`,type:"number",className:"w-full p-0 text-center",inputMode:"numeric",value:s[n][l],onChange:c=>i(n,l,Number(c.target.value))},`cell-${n}-${l}`))]},`row-${n}`))})]})]})]})})}function xr({...s}){return e.jsx(Ya,{"data-slot":"alert-dialog",...s})}function gr({...s}){return e.jsx(Ga,{"data-slot":"alert-dialog-trigger",...s})}function hr({...s}){return e.jsx(Ka,{"data-slot":"alert-dialog-portal",...s})}function fr({className:s,...a}){return e.jsx(Xa,{"data-slot":"alert-dialog-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function jr({className:s,...a}){return e.jsxs(hr,{children:[e.jsx(fr,{}),e.jsx(Qa,{"data-slot":"alert-dialog-content",className:u("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a})]})}function vr({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:u("flex flex-col gap-2 text-center sm:text-left",s),...a})}function yr({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:u("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function br({className:s,...a}){return e.jsx(Ha,{"data-slot":"alert-dialog-title",className:u("text-lg font-semibold",s),...a})}function wr({className:s,...a}){return e.jsx(Ja,{"data-slot":"alert-dialog-description",className:u("text-muted-foreground text-sm",s),...a})}function Nr({className:s,...a}){return e.jsx(Wa,{className:u(G({variant:"outline"}),s),...a})}const ms=[[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,3,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2]];function Sr(s,a){const t=s.length,i=s[0].length,r=a.length,n=a[0].length,o=[];for(let l=0;l<r;l++){o[l]=[];for(let c=0;c<n;c++)l<t&&c<i?o[l][c]=s[l][c]:o[l][c]=2}return o}j.object({name:j.string(),description:j.string(),dispersion:j.number(),truck_count:j.number(),volume:j.number(),weight:j.number(),crew_size_settings:j.array(j.array(j.number())),image:j.instanceof(File)});function _r(s){const a=s.target.files&&s.target.files[0],t=a?URL.createObjectURL(a):"";return{file:a,displayUrl:t}}function Qs({data:s}){const{data:a}=ns(),[t,{isLoading:i}]=un(),[r,{isLoading:n}]=mn(),[o,{isLoading:l}]=xn(),[c,x]=f.useState(!1),g=Ve(),m=!!s,[d,p]=f.useState(null),h=B({defaultValues:{name:"",description:"",dispersion:0,truck_count:0,volume:0,weight:0,crew_size_settings:ms,image:void 0}});f.useEffect(()=>{s&&(h.reset({name:s.name,description:s.description,dispersion:s.dispersion,truck_count:s.truck_count,volume:s.volume,weight:s.weight,crew_size_settings:s.crew_size_settings.length>0?s.crew_size_settings:ms}),p(s.image_url))},[s]);function v(){h.reset(),x(y=>!y)}async function z(y){m?(await r({id:s.id,...y}).unwrap(),I.success("Changes successfully saved")):(await t(y).unwrap(),I.success("Move size successfully added")),h.reset(),v()}return e.jsxs(X,{open:c,onOpenChange:v,children:[e.jsx(ye,{asChild:!0,className:`${m?null:"ml-auto"}`,children:m?e.jsxs(_,{variant:"outline",className:"text-primary hover:text-primary",size:g?"icon":"default",children:[e.jsx(Ue,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(_,{children:"Add move size"})}),e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsxs(se,{children:[m?"Edit":"Add"," move size"]}),e.jsx(be,{className:"hidden"})]}),e.jsx(Y,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(z),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-280px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(w,{control:h.control,name:"image",render:({field:{value:y,onChange:T,...b}})=>e.jsxs(N,{children:[e.jsx(C,{children:"Image"}),e.jsx(S,{children:e.jsx(k,{...b,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:E=>{const{file:Je,displayUrl:Js}=_r(E);p(Js),T(Je)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:d&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:d,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})}),e.jsx(w,{control:h.control,name:"name",render:({field:y})=>e.jsxs(N,{children:[e.jsx(C,{children:"Name"}),e.jsx(S,{children:e.jsx(k,{...y,autoComplete:"off"})})]})}),e.jsx(w,{control:h.control,name:"description",render:({field:y})=>e.jsxs(N,{children:[e.jsx(C,{children:"Description"}),e.jsx(S,{children:e.jsx(ls,{...y,rows:16,autoComplete:"off"})})]})}),e.jsx(w,{control:h.control,name:"dispersion",render:({field:y})=>e.jsxs(N,{children:[e.jsx(C,{children:"Dispersion %"}),e.jsx(S,{children:e.jsx(k,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(w,{control:h.control,name:"truck_count",render:({field:y})=>e.jsxs(N,{children:[e.jsx(C,{children:"Trucks count for this size"}),e.jsx(S,{children:e.jsx(k,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(w,{control:h.control,name:"volume",render:({field:y})=>e.jsxs(N,{children:[e.jsx(C,{children:"Volume"}),e.jsx(S,{children:e.jsx(k,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(w,{control:h.control,name:"weight",render:({field:y})=>e.jsxs(N,{children:[e.jsx(C,{children:"Weight"}),e.jsx(S,{children:e.jsx(k,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...y})})]})}),e.jsx(w,{control:h.control,name:"crew_size_settings",render:({field:y})=>e.jsxs(N,{children:[e.jsx("p",{className:"text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",children:"Crew size settings"}),e.jsx(S,{children:e.jsx(pr,{value:Sr(y.value,Array((a==null?void 0:a.length)??0).fill(null).map(()=>Array((a==null?void 0:a.length)??0).fill(2))),onChange:y.onChange})})]})})]}),e.jsxs(Ge,{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{children:m&&e.jsxs(xr,{children:[e.jsx(gr,{asChild:!0,children:e.jsx(_,{variant:"outline",className:"mt-2 sm:mt-0 w-full",children:"Delete"})}),e.jsxs(jr,{children:[e.jsxs(vr,{children:[e.jsx(br,{children:"Are you absolutely sure?"}),e.jsx(wr,{children:"Are you sure you want to delete this move size?"})]}),e.jsxs(yr,{children:[e.jsx(Nr,{children:"No, cancel"}),e.jsx(P,{type:"button",loading:l,disabled:l,className:"mt-2 sm:mt-0",onClick:async()=>{await o({id:s==null?void 0:s.id}).unwrap(),I.success("Move size successfully deleted"),v()},children:"Yes, delete"})]})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Ye,{children:"Cancel"}),e.jsx(P,{type:"submit",loading:i||n,disabled:i||n,children:m?"Save changes":"Add move size"})]})]})]})})]})]})}function kr({item:s}){const{attributes:a,listeners:t,setNodeRef:i,transform:r,transition:n,isDragging:o}=ie({id:s.id}),l={transform:le.Transform.toString(r),transition:n,zIndex:o?1e3:"auto",position:o?"relative":"static"};return e.jsxs("div",{className:"flex items-center gap-2",ref:i,style:l,children:[e.jsx(je,{className:"size-5 min-w-5 cursor-grab text-muted-foreground",...a,...t}),e.jsx("div",{className:"@container w-full",children:e.jsxs("div",{className:u("grid w-full grid-cols-[max-content_1fr_max-content] @lg:grid-cols-9 border rounded-md items-center gap-4 p-4",{"bg-background shadow-lg":o}),children:[e.jsx("div",{children:e.jsx("img",{src:s.image_url??"https://www.thehighlands.org/sites/default/files/styles/hero/public/one-bedroom-3d.png?itok=1Y5yuPSu",alt:s.name,className:"size-10 object-cover"})}),e.jsxs("div",{className:"overflow-hidden @lg:col-span-4",children:[e.jsx("p",{className:"truncate font-semibold",children:s.name}),e.jsx("p",{className:"truncate text-sm",children:s.description})]}),e.jsxs("div",{className:"hidden @lg:flex @lg:col-span-2 gap-4",children:[e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(as,{className:"size-4"}),e.jsx("p",{className:"truncate text-sm font-medium",children:s.truck_count??1})]}),e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(vt,{className:"size-4"}),e.jsxs("p",{className:"truncate text-sm font-medium",children:[s.volume||100," cbf"]})]})]}),e.jsx("div",{className:"flex justify-end @lg:col-span-2",children:e.jsx(Qs,{data:s})})]})})]})}function Cr(){const{data:s,isLoading:a,isError:t}=Is(),[i,{isLoading:r}]=pn(),[n,o]=f.useState([]),[l,c]=f.useState(!1),x=oe(q(he),q(ge,{coordinateGetter:xe}));f.useEffect(()=>{s&&o(s)},[s]);function g(m){const{active:d,over:p}=m;if(p&&d.id!==p.id){const h=n.findIndex(T=>T.id===d.id),v=n.findIndex(T=>T.id===p.id),y=pe(n,h,v).map((T,b)=>({...T,index:b}));o(y),c(!0)}}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch move sizes"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((m,d)=>e.jsx(L,{className:"h-19.5 w-full"},d))}),s&&e.jsx(ce,{sensors:x,collisionDetection:ue,onDragEnd:g,modifiers:[de],children:e.jsx(me,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(m=>e.jsx(kr,{item:m},m.id))})})}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l,"visible opacity-100":l}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{o(s),c(!1)},children:"Cancel"}),e.jsx(P,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:async()=>{const m=n.map(({id:d,index:p})=>({id:d,index:p}));await i({moveSizes:m}).unwrap(),I.success("Changes saved"),c(!1)},children:"Save changes"})]})})]})}j.object({name:j.string().min(5),form_name:j.string().min(1)});function Tr(){const[s,{isLoading:a}]=gn(),[t,i]=f.useState(!1),r=B({defaultValues:{name:"",form_name:""}});function n(){r.reset(),i(l=>!l)}async function o(l){await s(l).unwrap(),I.success(`${l.name} successfully added`),r.reset(),n()}return e.jsxs(X,{open:t,onOpenChange:n,children:[e.jsx(ye,{asChild:!0,className:"ml-auto",children:e.jsx(_,{children:"Add stairs"})}),e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Add stairs"}),e.jsx(be,{className:"hidden"})]}),e.jsx(Y,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(o),className:"space-y-4",children:[e.jsx(w,{control:r.control,name:"name",render:({field:l})=>e.jsxs(N,{children:[e.jsx(C,{children:"Name"}),e.jsx(S,{children:e.jsx(k,{placeholder:"Name",...l})})]})}),e.jsx(w,{control:r.control,name:"form_name",render:({field:l})=>e.jsxs(N,{children:[e.jsx(C,{children:"Form name"}),e.jsx(S,{children:e.jsx(k,{placeholder:"Form name",...l})})]})}),e.jsxs(Ge,{children:[e.jsx(Ye,{children:"Cancel"}),e.jsx(P,{type:"submit",loading:a,disabled:a,children:"Add service"})]})]})})]})]})}function Ir({item:s,onChange:a}){const[t,{isLoading:i}]=fn(),r=Ve(),{attributes:n,listeners:o,setNodeRef:l,transform:c,transition:x,isDragging:g}=ie({id:s.id}),m={transform:le.Transform.toString(c),transition:x,zIndex:g?1e3:"auto",position:g?"relative":"static"};return e.jsxs("div",{className:"flex items-center gap-2",ref:l,style:m,children:[e.jsx(je,{className:"size-5 min-w-5 cursor-grab text-muted-foreground",...n,...o}),e.jsxs("div",{className:u("grid auto-cols-auto grid-flow-col gap-2",{"bg-background":g}),children:[e.jsx(k,{type:"text",value:s.name,onChange:d=>{a(s.id,{name:d.target.value})}}),e.jsx(k,{type:"text",value:s.form_name,onChange:d=>{a(s.id,{form_name:d.target.value})}}),e.jsx(P,{loading:i,disabled:i,variant:"secondary",size:r?"icon":"default",onClick:()=>{t({id:s.id})},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"size-4"}),r?null:"Delete"]})})]})]})}function Pr(){const{data:s,isLoading:a,isError:t}=ns(),[i,{isLoading:r}]=hn(),[n,o]=f.useState([]),[l,c]=f.useState(!1),x=oe(q(he),q(ge,{coordinateGetter:xe}));f.useEffect(()=>{s&&o(s)},[s]);function g(d){const{active:p,over:h}=d;if(h&&p.id!==h.id){const v=n.findIndex(b=>b.id===p.id),z=n.findIndex(b=>b.id===h.id),T=pe(n,v,z).map((b,E)=>({...b,index:E}));o(T),c(!0)}}function m(d,p){o(h=>h.map(v=>v.id===d?{...v,...p}:v)),c(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch stairs"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((d,p)=>e.jsx(L,{className:"h-9"},p))}),s&&e.jsx(ce,{sensors:x,collisionDetection:ue,onDragEnd:g,modifiers:[de],children:e.jsx(me,{items:n,children:e.jsx("div",{className:"space-y-4",children:n.map(d=>e.jsx(Ir,{item:d,onChange:m},d.id))})})}),e.jsx(F,{}),e.jsx("div",{className:u("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l,"visible opacity-100":l}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(_,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{o(s),c(!1)},children:"Cancel"}),e.jsx(P,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:async()=>{await i({entranceTypes:n}).unwrap(),I.success("Changes saved"),c(!1)},children:"Save changes"})]})})]})}function Si(){return K().id?e.jsx($e,{}):e.jsx(V,{title:"Calculator",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(R,{className:"max-w-3xl",children:[e.jsxs(Q,{className:"flex flex-row justify-between",children:[e.jsx(Le,{children:"Move Size"}),e.jsx(Qs,{})]}),e.jsx($,{children:e.jsx(Cr,{})})]}),e.jsxs(R,{className:"max-w-3xl",children:[e.jsxs(Q,{className:"flex flex-row justify-between",children:[e.jsx(Le,{children:"Stairs"}),e.jsx(Tr,{})]}),e.jsx($,{children:e.jsx(Pr,{})})]})]})})}const zr={pending:"Pending",pending_info:"Pending Info",pending_date:"Pending Date",hold:"Hold",not_confirmed:"Not Confirmed",confirmed:"Confirmed",not_available:"Not Available",completed:"Completed",spam:"Spam",canceled:"Canceled",refused:"Refused",closed:"Closed",expired:"Expired",archived:"Archived"};Object.entries(zr).map(([s,a])=>({label:a,value:s}));const Dr={all:"All Requests",pending:"Pending",not_confirmed:"Not Confirmed",confirmed:"Confirmed",not_available:"Not Available",completed:"Completed",spam:"Spam",canceled:"Canceled",refused:"Refused",closed:"Closed",expired:"Expired",archived:"Archived"},Mr=Object.entries(Dr).map(([s,a])=>({label:a,value:s})),es={all:"text-foreground",pending:"text-amber-500",pending_info:"text-red-500",pending_date:"text-red-500",hold:"text-amber-500",not_confirmed:"text-indigo-500",confirmed:"text-[#00a455]",not_available:"text-foreground",completed:"text-[#26a9f4]",spam:"text-foreground",canceled:"text-red-500",refused:"text-foreground",closed:"text-foreground",expired:"text-foreground",archived:"text-foreground"},ss={all:"bg-muted-foreground",pending:"bg-amber-500",pending_info:"bg-red-500",pending_date:"bg-red-500",hold:"bg-amber-500",not_confirmed:"bg-indigo-500",confirmed:"bg-[#00a455]",not_available:"bg-foreground",completed:"bg-[#26a9f4]",spam:"bg-muted-foreground",canceled:"bg-red-500",refused:"bg-muted-foreground",closed:"bg-muted-foreground",expired:"bg-muted-foreground",archived:"bg-muted-foreground"};function Er(){const s=[];for(let a=0;a<24;a++)for(let t=0;t<60;t+=15){const i=a*60+t;s.push({value:i,label:`${a.toString()}:${t.toString().padStart(2,"0")}`})}return s}const Lr=s=>{const a=[];for(let t=0;t<24*60;t+=15){const i=Math.floor(t/60),r=t%60,n=new Date(0,0,0,i,r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});a.push({label:n,value:t})}return a};Lr();Er();const ps={"Moving & Storage":"/svg-icons/warehouse.svg","Overnight Truck Storage":"/svg-icons/truck.svg"};function Rr({requests:s}){const a=fs(),[t,i]=f.useState(null),{data:r}=Ts(),{data:n}=Is();function o(l){t===l?a(`/crm/requests/${l}`):i(l)}return e.jsx("div",{className:"min-h-[calc(100vh-200px)]",children:e.jsxs(Vs,{className:"min-w-[1850px]",children:[e.jsx(Ys,{children:e.jsxs(Re,{children:[e.jsx(D,{children:"#"}),e.jsx(D,{children:"Status"}),e.jsx(D,{children:"Service"}),e.jsx(D,{children:"Move date"}),e.jsx(D,{children:"Customer, phone"}),e.jsx(D,{children:"Moving from"}),e.jsx(D,{children:"Moving to"}),e.jsx(D,{children:"Size of move"}),e.jsx(D,{children:"Crew"}),e.jsx(D,{children:"Created at"}),e.jsx(D,{children:"Updated at"}),e.jsx(D,{className:"text-right",children:"Est. Quote"})]})}),e.jsx(Gs,{children:s==null?void 0:s.map(l=>{var z,y,T;const c=r==null?void 0:r.find(b=>b.id===l.service_id),x=n==null?void 0:n.find(b=>b.id===l.move_size_id),g=l.customer?`${(z=l.customer)==null?void 0:z.first_name} ${(y=l.customer)==null?void 0:y.last_name}`:"",m=(c==null?void 0:c.name)==="Moving & Storage"||(c==null?void 0:c.name)==="Overnight Truck Storage",d=l.is_moving_from_storage,p=l==null?void 0:l.has_paired_request,h=m&&d&&p,v=m&&!d&&p;return e.jsxs(Re,{className:u("h-16 text-xs font-medium hover:cursor-pointer",t===l.id&&"bg-muted"),onClick:()=>o(l==null?void 0:l.id),onSelect:()=>o(l==null?void 0:l.id),children:[e.jsx(M,{className:"text-sm font-bold",children:l.id}),e.jsx(M,{children:e.jsxs("span",{className:u(Bs({variant:"outline"}),"relative overflow-hidden border-transparent py-1 px-2"),children:[e.jsx("span",{className:`${ss[l.status]} absolute inset-0 opacity-15`}),e.jsx("span",{className:`${es[l.status]} capitalize flex items-center gap-2`,children:l.status.replace("_"," ")}),e.jsx("div",{className:`${ss[l.status]} size-2 rounded-full`})]})}),e.jsx(M,{children:c==null?void 0:c.name}),e.jsxs(M,{children:[rt(l.moving_date),e.jsx("br",{}),e.jsx(Ar,{movingDate:l.moving_date})]}),e.jsxs(M,{children:[g??"",e.jsx("br",{}),qe((T=l.customer)==null?void 0:T.phone)]}),e.jsx(M,{children:h?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:ps[(c==null?void 0:c.name)??""],className:"size-6"}),"From storage"]}):e.jsxs(e.Fragment,{children:["Brookline,",e.jsx("br",{}),"MA, 02446"]})}),e.jsx(M,{className:"items-center gap-2",children:v?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:ps[(c==null?void 0:c.name)??""],className:"size-6"}),"To storage"]}):e.jsxs(e.Fragment,{children:["Boston",e.jsx("br",{}),"MA, 02123"]})}),e.jsx(M,{children:x==null?void 0:x.name}),e.jsx(M,{children:l.crew_size&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(yt,{className:"size-4"}),l.crew_size]})}),e.jsx(M,{children:H(l.created_at,"P")}),e.jsx(M,{children:H(l.updated_at,"P")}),e.jsx(M,{className:"text-right",children:Fn(l.total_price)})]},l.id)})})]})})}function Ar({movingDate:s}){if(!s)return null;const a=new Date;a.setHours(0,0,0,0);const t=new Date(s);t.setHours(0,0,0,0);const i=t.getTime()-a.getTime(),r=Math.ceil(i/(1e3*60*60*24));if(r<0)return null;let n;switch(r){case 0:n="today";break;case 1:n="tomorrow";break;default:n=`in ${r} days`}const o=r<2?"text-destructive":"text-green-600";return e.jsx("span",{className:o,children:n})}function $r({className:s,...a}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:u("mx-auto flex w-full justify-center",s),...a})}function Fr({className:s,...a}){return e.jsx("ul",{"data-slot":"pagination-content",className:u("flex flex-row items-center gap-1",s),...a})}function Se({...s}){return e.jsx("li",{"data-slot":"pagination-item",...s})}function os({className:s,isActive:a,size:t="icon",...i}){return e.jsx("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:u(G({variant:a?"outline":"ghost",size:t}),s),...i})}function qr({className:s,...a}){return e.jsxs(os,{"aria-label":"Go to previous page",size:"default",className:u("gap-1 px-2.5 sm:pl-2.5",s),...a,children:[e.jsx(fe,{}),e.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function Or({className:s,...a}){return e.jsxs(os,{"aria-label":"Go to next page",size:"default",className:u("gap-1 px-2.5 sm:pr-2.5",s),...a,children:[e.jsx("span",{className:"hidden sm:block",children:"Next"}),e.jsx(bs,{})]})}function Ur({className:s,...a}){return e.jsxs("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:u("flex size-9 items-center justify-center",s),...a,children:[e.jsx(bt,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]})}function Br({totalPages:s}){const a=zs(),t=Ps(r=>r.requests.page),i=it(t,s);return e.jsxs(Ne,{className:"mx-auto w-full whitespace-nowrap",children:[e.jsx($r,{className:"py-2",children:e.jsxs(Fr,{children:[e.jsx(Se,{className:"cursor-pointer",children:e.jsx(qr,{onClick:r=>{r.preventDefault(),t>1&&a(_e(t-1))}})}),i.map((r,n)=>r==="..."?e.jsx(Se,{children:e.jsx(Ur,{})},n):e.jsx(Se,{className:"cursor-pointer",children:e.jsx(os,{onClick:()=>{console.log("Page"),a(_e(Number(r)))},isActive:t===r,children:r})},n)),e.jsx(Se,{className:"cursor-pointer",children:e.jsx(Or,{onClick:()=>{t<s&&a(_e(t+1))}})})]})}),e.jsx(ae,{orientation:"horizontal"})]})}function _i(){const s=zs(),{filter:a,page:t}=Ps(n=>n.requests),{data:i}=Ot(),{data:r}=qt({filter:a,page:t});return e.jsxs(J,{className:"h-full p-4",children:[e.jsx(qs,{value:a,onValueChange:n=>{s(Rt(n)),s(_e(1))},children:e.jsxs(Ne,{children:[e.jsx(Os,{className:"h-12",children:Mr.map(n=>e.jsxs(Us,{value:n.value,className:u("h-full w-[180px] space-x-2",`data-[state=active]:${es[n.value]}`,es[n.value]),children:[e.jsx("span",{children:n.label}),e.jsx("span",{className:`${ss[n.value]} rounded-full px-1 text-xs font-semibold text-muted`,children:(i==null?void 0:i[n.value])??"0"})]},n.value))}),e.jsx(ae,{orientation:"horizontal"})]})}),e.jsx(Rr,{requests:(r==null?void 0:r.requests)??[]}),r&&e.jsx(Br,{totalPages:r.total_pages})]})}function Vr({id:s}){const a=fs();function t(){a(-1)}function i(){a(-1)}return e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{children:["Request ",s]}),e.jsxs("div",{className:"flex gap-2 self-end",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:i,children:e.jsx(ts,{})}),e.jsx(_,{variant:"outline",size:"icon",onClick:t,children:e.jsx(vs,{})})]})]})})}function ki(){const{id:s}=K();return e.jsxs(J,{children:[e.jsx(Vr,{id:s}),e.jsxs("div",{className:"grid grid-cols-2 w-full gap-4",children:[e.jsx(R,{children:e.jsxs("div",{children:["RequestPage ",s]})}),e.jsx(R,{children:e.jsxs("div",{children:["RequestPage ",s]})})]})]})}const Hs=[{id:"conv1",profile:"https://randomuser.me/api/portraits/men/32.jpg",username:"alex_dev",fullName:"Alex John",title:"Senior Backend Dev",messages:[{sender:"You",message:"See you later, Alex!",timestamp:"2024-08-24T11:15:15"},{sender:"Alex",message:"Alright, talk to you later!",timestamp:"2024-08-24T11:11:30"},{sender:"You",message:"For sure. Anyway, I should get back to reviewing the project.",timestamp:"2024-08-23T09:26:50"},{sender:"Alex",message:"Yeah, let me know what you think.",timestamp:"2024-08-23T09:25:15"},{sender:"You",message:"Oh, nice! I've been waiting for that. I'll check it out later.",timestamp:"2024-08-23T09:24:30"},{sender:"Alex",message:"They've added a dark mode option! It looks really sleek.",timestamp:"2024-08-23T09:23:10"},{sender:"You",message:"No, not yet. What's new?",timestamp:"2024-08-23T09:22:00"},{sender:"Alex",message:"By the way, have you seen the new feature update?",timestamp:"2024-08-23T09:21:05"},{sender:"You",message:"Will do! Thanks, Alex.",timestamp:"2024-08-23T09:20:10"},{sender:"Alex",message:"Great! Let me know if you need any help.",timestamp:"2024-08-23T09:19:20"},{sender:"You",message:"Almost done. Just need to review a few things.",timestamp:"2024-08-23T09:18:45"},{sender:"Alex",message:"I'm good, thanks! Did you finish the project?",timestamp:"2024-08-23T09:17:10"},{sender:"You",message:"Hey Alex, I'm doing well! How about you?",timestamp:"2024-08-23T09:16:30"},{sender:"Alex",message:"Hey Bob, how are you doing?",timestamp:"2024-08-23T09:15:00"}]},{id:"conv2",profile:"https://randomuser.me/api/portraits/women/45.jpg",username:"taylor.codes",fullName:"Taylor Grande",title:"Tech Lead",messages:[{sender:"Taylor",message:"Yeah, it's really well-explained. You should give it a try.",timestamp:"2024-08-23T10:35:00"},{sender:"You",message:"Not yet, is it good?",timestamp:"2024-08-23T10:32:00"},{sender:"Taylor",message:"Hey, did you check out that new tutorial?",timestamp:"2024-08-23T10:30:00"}]},{id:"conv3",profile:"https://randomuser.me/api/portraits/men/54.jpg",username:"john_stack",fullName:"John Doe",title:"QA",messages:[{sender:"You",message:"Yep, see ya. ",timestamp:"2024-08-22T18:59:00"},{sender:"John",message:"Great, see you then!",timestamp:"2024-08-22T18:55:00"},{sender:"You",message:"Yes, same time as usual. I'll send the invite shortly.",timestamp:"2024-08-22T18:50:00"},{sender:"John",message:"Are we still on for the meeting tomorrow?",timestamp:"2024-08-22T18:45:00"}]},{id:"conv4",profile:"https://randomuser.me/api/portraits/women/29.jpg",username:"megan_frontend",fullName:"Megan Flux",title:"Jr Developer",messages:[{sender:"You",message:"Sure ",timestamp:"2024-08-23T11:30:00"},{sender:"Megan",message:"Thanks, appreciate it!",timestamp:"2024-08-23T11:30:00"},{sender:"You",message:"Sure thing! I'll take a look in the next hour.",timestamp:"2024-08-23T11:25:00"},{sender:"Megan",message:"Hey! Do you have time to review my PR today?",timestamp:"2024-08-23T11:20:00"}]},{id:"conv5",profile:"https://randomuser.me/api/portraits/men/72.jpg",username:"dev_david",fullName:"David Brown",title:"Senior UI/UX Designer",messages:[{sender:"You",message:"Great, I'll review them now!",timestamp:"2024-08-23T12:00:00"},{sender:"David",message:"Just sent you the files. Let me know if you need any changes.",timestamp:"2024-08-23T11:58:00"},{sender:"David",message:"I finished the design for the dashboard. Thoughts?",timestamp:"2024-08-23T11:55:00"}]},{id:"conv6",profile:"https://randomuser.me/api/portraits/women/68.jpg",username:"julia.design",fullName:"Julia Carter",title:"Product Designer",messages:[{sender:"Julia",message:"Same here! It's coming together nicely.",timestamp:"2024-08-22T14:10:00"},{sender:"You",message:"I'm really excited to see the final product!",timestamp:"2024-08-22T14:15:00"},{sender:"You",message:"How's the project looking on your end?",timestamp:"2024-08-22T14:05:00"}]},{id:"conv7",profile:"https://randomuser.me/api/portraits/men/24.jpg",username:"brad_dev",fullName:"Brad Wilson",title:"CEO",messages:[{sender:"Brad",message:"Got it! Thanks for the update.",timestamp:"2024-08-23T15:45:00"},{sender:"You",message:"The release has been delayed to next week.",timestamp:"2024-08-23T15:40:00"},{sender:"Brad",message:"Hey, any news on the release?",timestamp:"2024-08-23T15:35:00"}]},{id:"conv8",profile:"https://randomuser.me/api/portraits/women/34.jpg",username:"katie_ui",fullName:"Katie Lee",title:"QA",messages:[{sender:"Katie",message:"I'll join the call in a few minutes.",timestamp:"2024-08-23T09:50:00"},{sender:"You",message:"Perfect! We'll start as soon as you're in.",timestamp:"2024-08-23T09:48:00"},{sender:"Katie",message:"Is the meeting still on?",timestamp:"2024-08-23T09:45:00"}]},{id:"conv9",profile:"https://randomuser.me/api/portraits/men/67.jpg",username:"matt_fullstack",fullName:"Matt Green",title:"Full-stack Dev",messages:[{sender:"Matt",message:"Sure thing, I'll send over the updates shortly.",timestamp:"2024-08-23T10:25:00"},{sender:"You",message:"Could you update the backend as well?",timestamp:"2024-08-23T10:23:00"},{sender:"Matt",message:"The frontend updates are done. How does it look?",timestamp:"2024-08-23T10:20:00"}]},{id:"conv10",profile:"https://randomuser.me/api/portraits/women/56.jpg",username:"sophie_dev",fullName:"Sophie Alex",title:"Jr. Frontend Dev",messages:[{sender:"You",message:"Thanks! I'll review your code and get back to you.",timestamp:"2024-08-23T16:10:00"},{sender:"Sophie",message:"Let me know if you need anything else.",timestamp:"2024-08-23T16:05:00"},{sender:"Sophie",message:"The feature is implemented. Can you review it?",timestamp:"2024-08-23T16:00:00"}]}];function Yr(){const{pathname:s}=gs();return e.jsx(J,{className:u("hidden lg:block p-4",{block:s==="/crm/messages"}),children:e.jsx("div",{className:"",children:Hs.map(a=>{const{id:t,profile:i,username:r,messages:n,fullName:o}=a;return e.jsxs(e.Fragment,{children:[e.jsx(hs,{to:`/crm/messages/${t}`,className:({isActive:l})=>u("flex w-full rounded-md px-2 py-2 text-left text-sm hover:bg-secondary/75",{"sm:bg-muted":l}),children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(rs,{children:[e.jsx(Ms,{src:i,alt:r}),e.jsx(is,{children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"col-start-2 row-span-2 font-medium",children:o}),e.jsx("span",{className:"col-start-2 row-span-2 row-start-2 line-clamp-2 text-ellipsis text-muted-foreground",children:n[n.length-1].message})]})]})}),e.jsx(F,{className:"my-1"})]},t)})})})}function Ci(){const{id:s}=K();return e.jsxs("div",{className:"grid h-full lg:grid-cols-[22rem_1fr]",children:[e.jsx(Yr,{}),s?e.jsx($e,{}):e.jsx("div",{className:"p-4",children:e.jsx("div",{className:u("inset-0 h-full hidden w-full items-center justify-center lg:flex rounded-xl border bg-primary-foreground shadow-sm"),children:e.jsx("p",{className:"font-semibold",children:"Select a request"})})})]})}function Ti(){const{id:s}=K(),a=Hs.find(({id:r})=>r===s),t=a,i=a==null?void 0:a.messages.reduce((r,n)=>{const o=H(n.timestamp,"d MMM, yyyy");return r[o]||(r[o]=[]),r[o].push(n),r},{});return e.jsx(J,{className:"p-4",children:e.jsxs("div",{className:u("absolute inset-0 h-full left-full z-50 overflow-hidden hidden w-full flex-1 flex-col sm:rounded-xl sm:border bg-muted dark:bg-background shadow-sm transition-all duration-200 sm:static sm:z-auto sm:flex",t&&"left-0 flex"),children:[e.jsxs("div",{className:"flex flex-none justify-between bg-background p-4 shadow-xs",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(_,{variant:"outline",size:"icon",asChild:!0,className:"-ml-2 h-full lg:hidden",children:e.jsx(re,{to:"/crm/messages",children:e.jsx(fe,{})})}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[e.jsxs(rs,{className:"size-9 lg:size-11",children:[e.jsx(Ms,{src:a==null?void 0:a.profile,alt:a==null?void 0:a.username}),e.jsx(is,{children:a==null?void 0:a.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"col-start-2 row-span-2 text-sm font-medium lg:text-base",children:a==null?void 0:a.fullName}),e.jsx("span",{className:"col-start-2 row-span-2 row-start-2 line-clamp-1 block max-w-32 text-ellipsis text-nowrap text-xs text-muted-foreground lg:max-w-none lg:text-sm",children:a==null?void 0:a.title})]})]})]}),e.jsx("div",{className:"-mr-1 flex items-center gap-1 lg:gap-2",children:e.jsx(_,{asChild:!0,children:e.jsx(re,{to:`/crm/requests/${a==null?void 0:a.id}`,children:"Open request"})})})]}),e.jsxs("div",{className:"flex flex-1 flex-col rounded-md",children:[e.jsx("div",{className:"flex size-full flex-1 px-4",children:e.jsx("div",{className:"chat-text-container relative -mr-4 flex flex-1 flex-col overflow-y-hidden",children:e.jsx("div",{className:"chat-flex flex h-40 w-full flex-grow flex-col-reverse justify-start gap-4 overflow-y-auto py-2 pb-4 pr-4",children:i&&Object.keys(i).map(r=>e.jsxs(e.Fragment,{children:[i[r].map((n,o)=>e.jsxs("div",{className:u("chat-box max-w-72 break-words px-3 py-2 shadow-lg",n.sender==="You"?"self-end rounded-[16px_16px_0_16px] bg-primary text-primary-foreground":"self-start rounded-[16px_16px_16px_0] bg-secondary"),children:[n.message," ",e.jsx("span",{className:u("mt-1 block text-xs font-light italic text-muted-foreground",n.sender==="You"&&"text-right"),children:H(n.timestamp,"h:mm a")})]},`${n.sender}-${n.timestamp}-${o}`)),e.jsx("div",{className:"text-center text-xs",children:r})]},r))})})}),e.jsx("div",{className:"bg-background p-4 pb-12",children:e.jsxs("form",{className:"flex w-full flex-none gap-2",children:[e.jsx(ls,{placeholder:"Type your message...",wrap:"off",className:"resize-none bg-secondary",rows:10}),e.jsx(P,{disabled:!1,loading:!1,type:"submit",className:"uppercase",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(wt,{}),e.jsx("span",{className:"hidden sm:block",children:"Send"})]})})]})})]})]})})}export{rs as A,bi as B,yi as C,X as D,hi as E,Ni as F,Si as G,xi as H,zs as I,ui as J,Ti as M,fi as P,_i as R,F as S,Ds as T,wi as U,Ce as a,Ee as b,te as c,jn as d,ze as e,vn as f,yn as g,Ps as h,is as i,mi as j,Ts as k,ee as l,Me as m,se as n,be as o,Pe as p,Z as q,Te as r,pi as s,Ie as t,Ve as u,ki as v,Ci as w,gi as x,ji as y,vi as z};
