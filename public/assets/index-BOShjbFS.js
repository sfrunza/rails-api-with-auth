import{c as k,a as b,k as Te,l as we,m as ke,j as a,n as $,N as B,o as _e,r as c,p as G,q as W,D as Y,s as X,v as J,X as Z,w as ee,x as te,y as qe,z as Ne,A as Ce,B as Re,E as Pe,F as Ee,H as Le,S as Ie,J as De,u as U,K as Oe,Q as Ae,U as Me,V as ze,W as $e,Y as Be,Z as Ue,_ as ae,$ as Fe,a0 as se,a1 as R,t as Q,a2 as Ke,O as Qe,a3 as He,a4 as Ve,a5 as Ge,a6 as We,b as w,a7 as Ye}from"./vendor-react-Bwc5d2A5.js";import{b as v,a as q,c as Xe,r as Je,s as Ze,L as et,F as tt,R as at,A as st,d as i,B as re,e as rt,u as nt,D as ne,f as ie,g as oe,h as it,i as ot,j as dt,S as lt,k as ct,M as ut,T as pt}from"./page-auth-BmRwFqOn.js";import{C as F,a as mt,D as de,E as gt}from"./vendor-CWilo8l4.js";import{E as ht}from"./page-error-hiCJUcoy.js";import{A as ft}from"./page-account-D0HxsfVk.js";import"./vendor-redux-CiqK6azd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const xt={contract:null,changes:{},isCompleted:{1:!1,2:!1,3:!1,4:!1,5:!1},isEnabled:{1:!0,2:!1,3:!1,4:!1,5:!1},activeStep:1},le=k({name:"contract",initialState:xt,reducers:{setContract(e,t){var o,d,u,f,m,x,j;e.contract={...e.contract,...t.payload},e.isCompleted={1:!!((o=e.contract)!=null&&o.terms_signature),2:!!((d=e.contract)!=null&&d.declaration_value_signature),3:!!((u=e.contract)!=null&&u.start_time_signature)&&!!((f=e.contract)!=null&&f.end_time_signature),4:!!((m=e.contract)!=null&&m.payment_signature),5:!!((x=e.contract)!=null&&x.final_signature)&&!!((j=e.contract)!=null&&j.foreman_signature)},e.activeStep=Object.keys(e.isCompleted).findIndex(g=>!e.isCompleted[parseInt(g)])+1;const s={1:["terms_signature"],2:["declaration_value_signature"],3:["start_time_signature","end_time_signature"],4:["payment_signature"],5:["final_signature","foreman_signature"]},r=e.contract,n=g=>{const h=g-1;return h===0?!0:s[h].every(T=>!!r[T])};e.isEnabled=Object.keys(s).reduce((g,h)=>(g[parseInt(h)]=n(parseInt(h)),g),{})},updateContractField:(e,t)=>{e.changes={...e.changes,...t.payload}},resetChanges(e){e.changes={}},setActiveStep(e,t){e.activeStep=t.payload}}}),yt=le.reducer,{setContract:Fa,setActiveStep:Ka,updateContractField:Qa,resetChanges:Ha}=le.actions,bt=new Date;bt.setHours(0,0,0,0);const vt={selectedDate:new Date().toISOString(),selectedRequest:null,open:!1,parklotRequests:null},ce=k({name:"parklot",initialState:vt,reducers:{setSelectedDate(e,t){e.selectedDate=t.payload},setSelectedRequest:(e,t)=>{e.selectedRequest=t.payload},setOpen:(e,t)=>{e.open=t.payload},setParklotRequests:(e,t)=>{e.parklotRequests=t.payload},updateParklotRequest:(e,t)=>{var s;e.parklotRequests=((s=e.parklotRequests)==null?void 0:s.map(r=>r.id===t.payload.id?{...r,...t.payload}:r))??null}}}),jt=ce.reducer,{setSelectedDate:Va,setSelectedRequest:Ga,setOpen:Wa,setParklotRequests:Ya,updateParklotRequest:Xa}=ce.actions,St={request:null,changes:{},hasChanges:!1,parklotRequests:null},ue=k({name:"request",initialState:St,reducers:{setRequest(e,t){e.request={...e.request,...t.payload}},updateField:(e,t)=>{e.changes={...e.changes,...t.payload},e.hasChanges=!!Object.keys(e.changes).length},resetChanges(e){e.changes={},e.hasChanges=!1},setParklotRequests:(e,t)=>{e.parklotRequests=t.payload}}}),Tt=ue.reducer,{setRequest:wt,updateField:Ja,resetChanges:Za}=ue.actions,kt={filter:"pending",page:1},pe=k({name:"auth",initialState:kt,reducers:{setFilter(e,t){e.filter=t.payload},setPage(e,t){e.page=t.payload}}}),{setFilter:es,setPage:ts}=pe.actions,_t=pe.reducer,qt={currentModal:null,open:!1},me=k({name:"modal",initialState:qt,reducers:{openModal:(e,t)=>{e.currentModal=t.payload,e.open=!0},closeModal:e=>{e.currentModal=null,e.open=!1}}}),{openModal:as,closeModal:Nt}=me.actions,Ct=me.reducer,P=b({reducerPath:"requestsApi",baseQuery:v,tagTypes:["Request","StatusCounts"],endpoints:e=>({getRequests:e.query({query:({filter:t,page:s})=>t&&s?`/requests?filter=${t}&page=${s}`:"/requests",providesTags(t){return t?[...t.requests.map(({id:s})=>({type:"Request",id:s})),{type:"Request",id:"LIST"}]:[{type:"Request",id:"LIST"}]}}),getStatusCounts:e.query({query:()=>"/requests/status_counts",providesTags:()=>[{type:"StatusCounts"}]}),getRequestById:e.query({query:({id:t})=>`/requests/${t}`,async onQueryStarted(t,{queryFulfilled:s,dispatch:r}){try{const n=await s;r(wt(n.data)),console.log("result",n)}catch(n){console.log("error",n)}},providesTags:(t,s,{id:r})=>[{type:"Request",id:r}]}),updateRequest:e.mutation({query:({id:t,data:s})=>({url:`/requests/${t}`,method:"PUT",body:{request:s}}),invalidatesTags:[{type:"Request",id:"LIST"},{type:"StatusCounts"}]}),createRequest:e.mutation({query:t=>({url:"/requests",method:"POST",body:t}),invalidatesTags:[{type:"Request",id:"LIST"}]}),createCustomer:e.mutation({query:t=>({url:"/users",method:"POST",body:{user:{...t,password:window.crypto.randomUUID()}}})}),updateCustomer:e.mutation({query:({id:t,data:s})=>({url:`/users/${t}`,method:"PUT",body:{user:s}})})})}),E=b({reducerPath:"servicesApi",baseQuery:v,tagTypes:["Service"],endpoints:e=>({getServices:e.query({query:({})=>"/services",providesTags(t){return t?[...t.map(({id:s})=>({type:"Service",id:s})),{type:"Service",id:"LIST"}]:[{type:"Service",id:"LIST"}]}}),createService:e.mutation({query:t=>({url:"/services",method:"POST",body:{service:t}}),invalidatesTags:(t,s)=>s?[]:[{type:"Service",id:"LIST"}]}),bulkUpdateServices:e.mutation({query:t=>({url:"/services/bulk_update",method:"POST",body:{services:t.services}}),invalidatesTags:(t,s)=>s?[]:[{type:"Service",id:"LIST"}]}),deleteService:e.mutation({query:({id:t})=>({url:`/services/${t}`,method:"DELETE"}),invalidatesTags:(t,s)=>s?[]:[{type:"Service",id:"LIST"}]})})}),N=b({reducerPath:"calendarRatesApi",baseQuery:v,tagTypes:["CalendarRate"],endpoints:e=>({getCalendarRates:e.query({query:()=>"/calendar_rates",providesTags:t=>t?[...Object.values(t).map(s=>({type:"CalendarRate",id:s.id})),{type:"CalendarRate",id:"LIST"}]:[{type:"CalendarRate",id:"LIST"}]}),updateCalendarRate:e.mutation({query:({id:t,newData:s})=>({url:`/calendar_rates/${t}`,method:"PUT",body:{calendar_rate:s}}),invalidatesTags:(t,s,{id:r})=>s?[]:[{type:"CalendarRate",id:r}]})})}),L=b({reducerPath:"ratesApi",baseQuery:v,tagTypes:["Rate","CalendarRate"],endpoints:e=>({getRates:e.query({query:({})=>"/rates",providesTags(t){return t?[...t.map(({id:s})=>({type:"Rate",id:s})),{type:"Rate",id:"LIST"}]:[{type:"Rate",id:"LIST"}]}}),bulkUpdateRates:e.mutation({query:t=>({url:"/rates/bulk_update",method:"POST",body:{rates:t.rates}}),invalidatesTags:(t,s)=>s?[]:[{type:"Rate",id:"LIST"}],async onQueryStarted(t,{dispatch:s,queryFulfilled:r}){try{await r,s(N.util.invalidateTags([{type:"CalendarRate",id:"LIST"}]))}catch(n){console.log("error",n)}}})})}),I=b({reducerPath:"trucksApi",baseQuery:v,tagTypes:["Truck"],endpoints:e=>({getTrucks:e.query({query:({})=>"/trucks",providesTags(t){return t?[...t.map(({id:s})=>({type:"Truck",id:s})),{type:"Truck",id:"LIST"}]:[{type:"Truck",id:"LIST"}]}}),createTruck:e.mutation({query:t=>({url:"/trucks",method:"POST",body:{truck:t}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),bulkUpdateTrucks:e.mutation({query:t=>({url:"/trucks/bulk_update",method:"POST",body:{trucks:t.trucks}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),deleteTruck:e.mutation({query:({id:t})=>({url:`/trucks/${t}`,method:"DELETE"}),invalidatesTags:[{type:"Truck",id:"LIST"}]})})}),D=b({reducerPath:"packingsApi",baseQuery:v,tagTypes:["Packing"],endpoints:e=>({getPackings:e.query({query:({})=>"/packings",providesTags(t){return t?[...t.map(({id:s})=>({type:"Packing",id:s})),{type:"Packing",id:"LIST"}]:[{type:"Packing",id:"LIST"}]}}),updatePacking:e.mutation({query:({id:t,...s})=>({url:`/packings/${t}`,method:"PATCH",body:{packing:s}}),invalidatesTags:(t,s,{id:r})=>[{type:"Packing",id:"LIST"},{type:"Packing",id:r}]}),createPacking:e.mutation({query:t=>({url:"/packings",method:"POST",body:{packing:t}}),invalidatesTags:[{type:"Packing",id:"LIST"}]}),bulkUpdatePackings:e.mutation({query:t=>({url:"/packings/bulk_update",method:"POST",body:{packings:t.packings}}),invalidatesTags:[{type:"Packing",id:"LIST"}]}),deletePacking:e.mutation({query:({id:t})=>({url:`/packings/${t}`,method:"DELETE"}),invalidatesTags:[{type:"Packing",id:"LIST"}]})})}),O=b({reducerPath:"extraServicesApi",baseQuery:v,tagTypes:["ExtraService"],endpoints:e=>({getExtraServices:e.query({query:({})=>"/extra_services",providesTags(t){return t?[...t.map(({id:s})=>({type:"ExtraService",id:s})),{type:"ExtraService",id:"LIST"}]:[{type:"ExtraService",id:"LIST"}]}}),createExtraService:e.mutation({query:t=>({url:"/extra_services",method:"POST",body:{extra_service:t}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),bulkUpdateExtraServices:e.mutation({query:t=>({url:"/extra_services/bulk_update",method:"POST",body:{extra_services:t.extra_services}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),deleteExtraService:e.mutation({query:({id:t})=>({url:`/extra_services/${t}`,method:"DELETE"}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]})})}),A=b({reducerPath:"employeesApi",baseQuery:v,tagTypes:["Employee"],endpoints:e=>({getEmployees:e.query({query:()=>"/employees",providesTags(t){return t?[...t.map(({id:s})=>({type:"Employee",id:s})),{type:"Employee",id:"LIST"}]:[{type:"Employee",id:"LIST"}]}}),getEmployeeById:e.query({query:({id:t})=>`/employees/${t}`,providesTags:(t,s,{id:r})=>t?[{type:"Employee",id:r}]:[{type:"Employee",id:"LIST"}]}),updateEmployee:e.mutation({query:({id:t,data:s})=>({url:`/employees/${t}`,method:"PUT",body:{employee:s}}),invalidatesTags:(t,s,{id:r})=>s?[]:[{type:"Employee",id:r},{type:"Employee",id:"LIST"}]}),createEmployee:e.mutation({query:({data:t})=>({url:"/employees",method:"POST",body:{employee:t}}),invalidatesTags:(t,s)=>s?[]:[{type:"Employee",id:"LIST"}]})})}),M=b({reducerPath:"settingsApi",baseQuery:v,tagTypes:["Setting"],endpoints:e=>({getSettings:e.query({query:()=>"/settings",providesTags:["Setting"]}),bulkUpdateSettings:e.mutation({query:({data:t})=>({url:"/settings/bulk_update",method:"POST",body:{setting:t}}),invalidatesTags:(t,s)=>s?[]:["Setting"]}),updateLogo:e.mutation({query:({data:t})=>({url:"/settings/bulk_update",method:"POST",body:t}),invalidatesTags:["Setting"]})})}),C=Te({reducer:{auth:Xe,contract:yt,parklot:jt,request:Tt,requests:_t,modal:Ct,[q.reducerPath]:q.reducer,[P.reducerPath]:P.reducer,[E.reducerPath]:E.reducer,[N.reducerPath]:N.reducer,[L.reducerPath]:L.reducer,[I.reducerPath]:I.reducer,[D.reducerPath]:D.reducer,[O.reducerPath]:O.reducer,[A.reducerPath]:A.reducer,[M.reducerPath]:M.reducer},middleware:e=>e().concat(Je,q.middleware,P.middleware,E.middleware,N.middleware,L.middleware,I.middleware,D.middleware,O.middleware,A.middleware,M.middleware)}),K=we.withTypes(),Rt=ke.withTypes();function ge(){return a.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:a.jsx("p",{children:"Global Loading..."})})}const Pt=async()=>{const{user:e}=C.getState().auth;return F.get("session_id")||e?$("/"):null},Et=async()=>F.get("session_id")?(await C.dispatch(q.endpoints.verify.initiate()).unwrap()).error?(C.dispatch(Ze(null)),$("/auth/login")):null:$("/auth/login"),Lt=[{path:"auth",element:a.jsx(st,{}),loader:Pt,hydrateFallbackElement:a.jsx(ge,{}),children:[{index:!0,element:a.jsx(B,{to:"/auth/login"})},{path:"login",element:a.jsx(et,{})},{path:"forgot-password",element:a.jsx(tt,{})},{path:"reset-password",element:a.jsx(at,{})}]}];function It({className:e,orientation:t="horizontal",decorative:s=!0,...r}){return a.jsx(_e,{"data-slot":"separator-root",decorative:s,orientation:t,className:i("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const z=768;function he(){const[e,t]=c.useState(void 0);return c.useEffect(()=>{const s=window.matchMedia(`(max-width: ${z-1}px)`),r=()=>{t(window.innerWidth<z)};return s.addEventListener("change",r),t(window.innerWidth<z),()=>s.removeEventListener("change",r)},[]),!!e}function Dt({...e}){return a.jsx(G,{"data-slot":"sheet",...e})}function Ot({...e}){return a.jsx(ee,{"data-slot":"sheet-portal",...e})}function At({className:e,...t}){return a.jsx(te,{"data-slot":"sheet-overlay",className:i("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...t})}function Mt({className:e,children:t,side:s="right",...r}){return a.jsxs(Ot,{children:[a.jsx(At,{}),a.jsxs(X,{"data-slot":"sheet-content",className:i("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",s==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",s==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",s==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",s==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,a.jsxs(J,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[a.jsx(Z,{className:"size-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function zt({className:e,...t}){return a.jsx("div",{"data-slot":"sheet-header",className:i("flex flex-col gap-1.5 p-4",e),...t})}function $t({className:e,...t}){return a.jsx(W,{"data-slot":"sheet-title",className:i("text-foreground font-semibold",e),...t})}function Bt({className:e,...t}){return a.jsx(Y,{"data-slot":"sheet-description",className:i("text-muted-foreground text-sm",e),...t})}function fe({delayDuration:e=0,...t}){return a.jsx(qe,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Ut({...e}){return a.jsx(fe,{children:a.jsx(Ne,{"data-slot":"tooltip",...e})})}function Ft({...e}){return a.jsx(Ce,{"data-slot":"tooltip-trigger",...e})}function Kt({className:e,sideOffset:t=4,children:s,...r}){return a.jsx(Re,{children:a.jsxs(Pe,{"data-slot":"tooltip-content",sideOffset:t,className:i("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",e),...r,children:[s,a.jsx(Ee,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Qt="sidebar_state",Ht=60*60*24*7,Vt="16rem",Gt="18rem",Wt="3rem",Yt="b",xe=c.createContext(null);function _(){const e=c.useContext(xe);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function Xt({defaultOpen:e=!0,open:t,onOpenChange:s,className:r,style:n,children:o,...d}){const u=he(),[f,m]=c.useState(!1),[x,j]=c.useState(e),g=t??x,h=c.useCallback(l=>{const y=typeof l=="function"?l(g):l;s?s(y):j(y),document.cookie=`${Qt}=${y}; path=/; max-age=${Ht}`},[s,g]),S=c.useCallback(()=>u?m(l=>!l):h(l=>!l),[u,h,m]);c.useEffect(()=>{const l=y=>{y.key===Yt&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),S())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[S]);const T=g?"expanded":"collapsed",p=c.useMemo(()=>({state:T,open:g,setOpen:h,isMobile:u,openMobile:f,setOpenMobile:m,toggleSidebar:S}),[T,g,h,u,f,m,S]);return a.jsx(xe.Provider,{value:p,children:a.jsx(fe,{delayDuration:0,children:a.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Vt,"--sidebar-width-icon":Wt,...n},className:i("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...d,children:o})})})}function Jt({side:e="left",variant:t="sidebar",collapsible:s="offcanvas",className:r,children:n,...o}){const{isMobile:d,state:u,openMobile:f,setOpenMobile:m}=_();return s==="none"?a.jsx("div",{"data-slot":"sidebar",className:i("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",r),...o,children:n}):d?a.jsxs(Dt,{open:f,onOpenChange:m,...o,children:[a.jsxs(zt,{className:"sr-only",children:[a.jsx($t,{children:"Sidebar"}),a.jsx(Bt,{children:"Displays the mobile sidebar."})]}),a.jsx(Mt,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":Gt},side:e,children:a.jsx("div",{className:"flex h-full w-full flex-col",children:n})})]}):a.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":u,"data-collapsible":u==="collapsed"?s:"","data-variant":t,"data-side":e,"data-slot":"sidebar",children:[a.jsx("div",{className:i("relative h-svh w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),a.jsx("div",{className:i("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...o,children:a.jsx("div",{"data-sidebar":"sidebar",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:n})})]})}function Zt({className:e,onClick:t,...s}){const{toggleSidebar:r}=_();return a.jsxs(re,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:i("",e),onClick:n=>{t==null||t(n),r()},...s,children:[a.jsx(Le,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function ea({className:e,...t}){const{toggleSidebar:s}=_();return a.jsx("button",{"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:s,title:"Toggle Sidebar",className:i("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})}function ta({className:e,...t}){return a.jsx("main",{"data-slot":"sidebar-inset",className:i("bg-background relative flex min-h-svh flex-1 flex-col","peer-data-[variant=inset]:min-h-[calc(100svh-(--spacing(4)))] md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",e),...t})}function aa({className:e,...t}){return a.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:i("flex flex-col gap-2 p-2",e),...t})}function sa({className:e,...t}){return a.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:i("flex flex-col gap-2 p-2",e),...t})}function ra({className:e,...t}){return a.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:i("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t})}function na({className:e,...t}){return a.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:i("relative flex w-full min-w-0 flex-col p-2",e),...t})}function ye({className:e,...t}){return a.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:i("flex w-full min-w-0 flex-col gap-1",e),...t})}function be({className:e,...t}){return a.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:i("group/menu-item relative",e),...t})}const ia=mt("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function ve({asChild:e=!1,isActive:t=!1,variant:s="default",size:r="default",tooltip:n,className:o,...d}){const u=e?Ie:"button",{isMobile:f,state:m}=_(),x=a.jsx(u,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":t,className:i(ia({variant:s,size:r}),o),...d});return n?(typeof n=="string"&&(n={children:n}),a.jsxs(Ut,{children:[a.jsx(Ft,{asChild:!0,children:x}),a.jsx(Kt,{side:"right",align:"center",hidden:m!=="collapsed"||f,...n})]})):x}function oa({items:e}){const t=De(),{setOpenMobile:s,isMobile:r}=_(),n=U();function o(d){r&&s(!1),n(d,{replace:!0})}return a.jsx(na,{children:a.jsx(ye,{children:e.map(d=>a.jsx(be,{children:a.jsxs(ve,{tooltip:d.title,isActive:t.pathname===`/crm/${d.url}`,onClick:()=>o(d.url),children:[d.icon&&a.jsx(d.icon,{}),a.jsx("span",{children:d.title})]})},d.title))})})}function da({className:e,...t}){return a.jsx(Oe,{"data-slot":"avatar",className:i("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function la({className:e,...t}){return a.jsx(Ae,{"data-slot":"avatar-fallback",className:i("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const ca=()=>{const e=K(rt);return c.useMemo(()=>({user:e}),[e])};function H(){const{user:e}=ca(),t=U(),[s,{isLoading:r}]=nt();return a.jsx(ye,{children:a.jsx(be,{children:a.jsxs(ne,{modal:!1,children:[a.jsx(ie,{asChild:!0,children:a.jsxs(ve,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[a.jsx(da,{className:"h-8 w-8 rounded-md",children:a.jsxs(la,{className:"rounded-md bg-foreground text-background",children:[e==null?void 0:e.first_name[0],e==null?void 0:e.last_name[0]]})}),a.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[a.jsxs("span",{className:"truncate font-semibold",children:[e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]}),a.jsx("span",{className:"truncate text-xs",children:e==null?void 0:e.email})]}),a.jsx(Me,{className:"ml-auto size-4"})]})}),a.jsx(oe,{align:"end",sideOffset:4,children:a.jsxs(it,{onClick:async()=>{await s().unwrap(),t("/auth/login")},disabled:r,children:[a.jsx(ze,{}),"Log out"]})})]})})})}const ua=[{title:"Requests",url:"requests",icon:$e},{title:"Dispatch",url:"#",icon:Be},{title:"Settings",url:"#",icon:Ue},{title:"Messages",url:"#",icon:ae}];function pa({...e}){return a.jsxs(Jt,{collapsible:"icon",...e,children:[a.jsx(aa,{children:a.jsx(H,{})}),a.jsx(ra,{children:a.jsx(oa,{items:ua})}),a.jsx(sa,{children:a.jsx(H,{})}),a.jsx(ea,{})]})}function ma(){return a.jsxs(ne,{children:[a.jsx(ie,{asChild:!0,children:a.jsx(ot,{loading:!1,disabled:!1,children:a.jsxs("span",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"hidden md:inline-flex",children:"Create Request"}),a.jsx("span",{className:"inline-flex md:hidden",children:"New"}),a.jsx(Fe,{className:"size-5"})]})})}),a.jsx(oe,{className:"w-56",children:a.jsx(dt,{children:"placeholder"})})]})}function ga({...e}){return a.jsx(G,{"data-slot":"dialog",...e})}function ha({...e}){return a.jsx(ee,{"data-slot":"dialog-portal",...e})}function fa({className:e,...t}){return a.jsx(te,{"data-slot":"dialog-overlay",className:i("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...t})}function xa({className:e,children:t,...s}){return a.jsxs(ha,{"data-slot":"dialog-portal",children:[a.jsx(fa,{}),a.jsxs(X,{"data-slot":"dialog-content",className:i("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[t,a.jsxs(J,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(Z,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ya({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-header",className:i("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ba({className:e,...t}){return a.jsx(W,{"data-slot":"dialog-title",className:i("text-lg leading-none font-semibold",e),...t})}function va({className:e,...t}){return a.jsx(Y,{"data-slot":"dialog-description",className:i("text-muted-foreground text-sm",e),...t})}function ja({className:e,...t}){return a.jsx(R,{"data-slot":"command",className:i("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function Sa({title:e="Command Palette",description:t="Search for a command to run...",children:s,...r}){return a.jsxs(ga,{...r,children:[a.jsxs(ya,{className:"sr-only",children:[a.jsx(ba,{children:e}),a.jsx(va,{children:t})]}),a.jsx(xa,{className:"overflow-hidden p-0",children:a.jsx(ja,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:s})})]})}function Ta({className:e,isLoading:t,...s}){return a.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[t?a.jsx(lt,{className:"size-4 shrink-0 opacity-50"}):a.jsx(se,{className:"size-4 shrink-0 opacity-50"}),a.jsx(R.Input,{"data-slot":"command-input",className:i("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...s})]})}function wa({className:e,...t}){return a.jsx(R.List,{"data-slot":"command-list",className:i("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function V({...e}){return a.jsx(R.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}const je=de.create({baseURL:"http://localhost:3001/api/v1",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});je.interceptors.response.use(e=>e,e=>{var t,s;if(de.isAxiosError(e)){const r=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.error)||"An unexpected error occurred.";Q.error(r)}else Q.error("Network error. Please try again.");return Promise.reject(e)});const ka=500,_a="k",qa=({item:e,onSelect:t})=>a.jsx("div",{className:"cursor-pointer px-4 py-2 text-sm transition-colors hover:bg-muted",onClick:t,children:Object.keys(e.data).map(s=>{const r=e.data[s],n=e.highlighting[s];return a.jsxs("div",{className:"grid grid-cols-[7rem_1fr] items-center leading-6",children:[a.jsxs("span",{className:"capitalize text-muted-foreground",children:[s.replace("_"," "),":"]}),n?a.jsx("span",{dangerouslySetInnerHTML:{__html:n}}):a.jsx("span",{children:r})]},s)})});function Na(){const e=U(),t=he(),[s,r]=c.useState(!1),[n,o]=c.useState(""),[d,u]=c.useState([]),[f,m]=c.useState(!1),[x,j]=c.useState(null),g=c.useCallback(async p=>{if(!p.trim()){u([]),m(!1);return}try{const l=await je.get(`/search?query=${encodeURIComponent(p)}`);u(l.data),j(null)}catch(l){console.error(l),u([]),j("Failed to fetch search results")}finally{m(!1)}},[]),h=c.useCallback(gt(ka,g,{atBegin:!1}),[g]),S=p=>{m(!0),o(p),h(p)},T=p=>{r(!1),e(`/dashboard/requests/${p}`)};return c.useEffect(()=>{const p=l=>{l.key===_a&&(l.metaKey||l.ctrlKey)&&(l.preventDefault(),r(y=>!y))};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[]),a.jsxs(a.Fragment,{children:[a.jsxs(re,{onClick:()=>r(!0),variant:"outline",size:t?"icon":"default",children:[a.jsx(se,{}),a.jsx("span",{className:"hidden md:block",children:"Search anything..."}),a.jsxs("kbd",{className:"pointer-events-none hidden h-5 select-none items-center gap-0.5 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100 md:flex",children:[a.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),a.jsxs(Sa,{open:s,onOpenChange:r,children:[a.jsx(Ta,{isLoading:f,placeholder:"Search anything",value:n,onValueChange:S}),a.jsxs(wa,{className:"max-h-[470px]",children:[x&&a.jsx(V,{children:x}),!x&&d.length<1&&a.jsx(V,{children:"No results found."}),a.jsx("div",{className:"divide-y",children:d.map((p,l)=>a.jsx(qa,{item:p,onSelect:()=>T(p.data.id)},`${p.data.id}-${l}`))})]})]})]})}function Ca(){return a.jsx("div",{className:"relative",children:a.jsxs(Ke,{to:"#",className:({isActive:e})=>i(ct({variant:e?"secondary":"outline",size:"icon"})),children:[a.jsx(ae,{}),a.jsx("span",{className:"sr-only",children:"Messages"})]})})}const Ra={editDeposit:()=>a.jsx("div",{children:"edit deposit"}),editMoveSize:()=>a.jsx("div",{children:"edit deposit"}),editPacking:()=>a.jsx("div",{children:"edit deposit"}),extraStop:()=>a.jsx("div",{children:"edit deposit"}),closeRequest:()=>a.jsx("div",{children:"edit deposit"})};function Pa(){const e=Rt(),{currentModal:t}=K(n=>n.modal),s=()=>{e(Nt())};if(!t)return null;const r=Ra[t];return r?a.jsx(r,{onClose:s}):null}function Se(){const e=F.get("sidebar_state")!=="false";return a.jsxs(Xt,{defaultOpen:e,children:[a.jsx(pa,{}),a.jsx(Ea,{})]})}function Ea(){return a.jsxs(ta,{children:[a.jsx("header",{className:"sticky top-0 flex shrink-0 items-center gap-2 border-b bg-background p-4",children:a.jsxs("div",{className:"flex w-full justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zt,{className:"-ml-1"}),a.jsx(It,{orientation:"vertical",className:"mr-2 h-4"}),a.jsx(ma,{}),a.jsx(Na,{})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ca,{}),a.jsx(ut,{})]})]})}),a.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4",children:[a.jsx(Qe,{}),a.jsx(Pa,{})]})]})}function La({allowedRoles:e,children:t}){const s=K(r=>r.auth.user);return s&&e.includes(s.role)?t:a.jsx(B,{to:"/auth/login",replace:!0})}const Ia={path:"/crm",loader:Et,element:a.jsx(La,{allowedRoles:["admin","manager"],children:a.jsx(Se,{})}),hydrateFallbackElement:a.jsx(ge,{}),children:[{index:!0,element:a.jsx(B,{to:"/crm/requests",replace:!0})},{path:"requests",element:a.jsx("div",{children:"Requests"})}]},Da=He([{path:"/",element:a.jsxs("div",{className:"flex flex-col gap-10",children:["Hello world!",a.jsx(w,{to:"/auth/login",children:"Login"}),a.jsx(w,{to:"/crm",children:"crm"}),a.jsx(w,{to:"/account",children:"account"}),a.jsx(w,{to:"/testing",children:"testing"}),a.jsx(w,{to:"/schedule",children:"schedule"})]}),errorElement:a.jsx(ht,{})},{path:"/account",element:a.jsx(ft,{})},{path:"/crm",element:a.jsx(Se,{})},...Lt,Ia]);function Oa(){return a.jsx(Ve,{store:C,children:a.jsxs(pt,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[a.jsx(Ge,{router:Da}),a.jsx(We,{position:"top-center",richColors:!0})]})})}Ye.createRoot(document.getElementById("root")).render(a.jsx(c.StrictMode,{children:a.jsx(Oa,{})}));
