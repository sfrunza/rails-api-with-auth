import{j as e,aw as E,m as pe,q as he,D as me,o as ge,p as fe,s as xe,O as be,r as u,S as je,b as ve,ax as I,ay as H,t as F,az as ye,aA as we,aB as Se}from"./vendor-CakjQFVf.js";import{r as z,e as B,b as Ne,u as L,N as _e,O as Ce,f as Re,R as qe,L as S}from"./vendor-router-DhmCPj6V.js";import{c as _,a as ke,b as Pe,u as De,d as Me,P as Te}from"./vendor-redux-PRo0f0lO.js";import{b as Ae,s as N,l as R,m as Ee,r as Ie,n as Le,F as Oe,R as ze,A as Be,c as d,B as G,o as $e,p as Fe,D as V,q as Q,t as W,v as Y,d as Ue,w as Ke,S as He,a as Ge,M as Ve,T as Qe}from"./page-auth-DxaTgTTW.js";import{e as O,a as q,p as k,t as P,r as D,c as M,s as T,u as X,T as We,b as Ye,d as Xe,f as Je,A as Ze,g as et,h as tt,D as at,i as st,j as rt,k as nt,l as it,S as ot,M as dt,E as lt,P as ct,m as ut,R as pt,C as ht,U as mt,n as gt,o as ft,q as xt}from"./page-crm-CVURLkCm.js";import{X as bt,n as jt,o as vt,p as yt,q as wt,T as St,a as Nt,r as J,j as _t,s as Z}from"./vendor-ui-PXennpt_.js";import{E as Ct}from"./page-error-T0ESdkKq.js";import{A as Rt}from"./page-account-DeT_SrzU.js";import"./vendor-date-fns-BWtotJsy.js";import"./vendor-libphonenumber-js-1k7QeoIm.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const qt={contract:null,changes:{},isCompleted:{1:!1,2:!1,3:!1,4:!1,5:!1},isEnabled:{1:!0,2:!1,3:!1,4:!1,5:!1},activeStep:1},ee=_({name:"contract",initialState:qt,reducers:{setContract(t,a){var o,i,c,f,h,x,v;t.contract={...t.contract,...a.payload},t.isCompleted={1:!!((o=t.contract)!=null&&o.terms_signature),2:!!((i=t.contract)!=null&&i.declaration_value_signature),3:!!((c=t.contract)!=null&&c.start_time_signature)&&!!((f=t.contract)!=null&&f.end_time_signature),4:!!((h=t.contract)!=null&&h.payment_signature),5:!!((x=t.contract)!=null&&x.final_signature)&&!!((v=t.contract)!=null&&v.foreman_signature)},t.activeStep=Object.keys(t.isCompleted).findIndex(m=>!t.isCompleted[parseInt(m)])+1;const s={1:["terms_signature"],2:["declaration_value_signature"],3:["start_time_signature","end_time_signature"],4:["payment_signature"],5:["final_signature","foreman_signature"]},n=t.contract,r=m=>{const g=m-1;return g===0?!0:s[g].every(w=>!!n[w])};t.isEnabled=Object.keys(s).reduce((m,g)=>(m[parseInt(g)]=r(parseInt(g)),m),{})},updateContractField:(t,a)=>{t.changes={...t.changes,...a.payload}},resetChanges(t){t.changes={}},setActiveStep(t,a){t.activeStep=a.payload}}}),kt=ee.reducer,{setContract:Va,setActiveStep:Qa,updateContractField:Wa,resetChanges:Ya}=ee.actions,Pt=new Date;Pt.setHours(0,0,0,0);const Dt={selectedDate:new Date().toISOString(),selectedRequest:null,open:!1,parklotRequests:null},te=_({name:"parklot",initialState:Dt,reducers:{setSelectedDate(t,a){t.selectedDate=a.payload},setSelectedRequest:(t,a)=>{t.selectedRequest=a.payload},setOpen:(t,a)=>{t.open=a.payload},setParklotRequests:(t,a)=>{t.parklotRequests=a.payload},updateParklotRequest:(t,a)=>{var s;t.parklotRequests=((s=t.parklotRequests)==null?void 0:s.map(n=>n.id===a.payload.id?{...n,...a.payload}:n))??null}}}),Mt=te.reducer,{setSelectedDate:Xa,setSelectedRequest:Ja,setOpen:Za,setParklotRequests:es,updateParklotRequest:ts}=te.actions,Tt={request:null,changes:{},hasChanges:!1,parklotRequests:null},ae=_({name:"request",initialState:Tt,reducers:{setRequest(t,a){t.request={...t.request,...a.payload}},updateField:(t,a)=>{t.changes={...t.changes,...a.payload},t.hasChanges=!!Object.keys(t.changes).length},resetChanges(t){t.changes={},t.hasChanges=!1},setParklotRequests:(t,a)=>{t.parklotRequests=a.payload}}}),At=ae.reducer,{setRequest:Et,updateField:as,resetChanges:ss}=ae.actions,It={filter:"pending",page:1},se=_({name:"auth",initialState:It,reducers:{setFilter(t,a){t.filter=a.payload},setPage(t,a){t.page=a.payload}}}),{setFilter:rs,setPage:ns}=se.actions,Lt=se.reducer,Ot={currentModal:null,open:!1},re=_({name:"modal",initialState:Ot,reducers:{openModal:(t,a)=>{t.currentModal=a.payload,t.open=!0},closeModal:t=>{t.currentModal=null,t.open=!1}}}),{openModal:is,closeModal:zt}=re.actions,Bt=re.reducer,A=ke({reducerPath:"requestsApi",baseQuery:Ae,tagTypes:["Request","StatusCounts"],endpoints:t=>({getRequests:t.query({query:({filter:a,page:s})=>a&&s?`/requests?filter=${a}&page=${s}`:"/requests",providesTags(a){return a?[...a.requests.map(({id:s})=>({type:"Request",id:s})),{type:"Request",id:"LIST"}]:[{type:"Request",id:"LIST"}]}}),getStatusCounts:t.query({query:()=>"/requests/status_counts",providesTags:()=>[{type:"StatusCounts"}]}),getRequestById:t.query({query:({id:a})=>`/requests/${a}`,async onQueryStarted(a,{queryFulfilled:s,dispatch:n}){try{const r=await s;n(Et(r.data)),console.log("result",r)}catch(r){console.log("error",r)}},providesTags:(a,s,{id:n})=>[{type:"Request",id:n}]}),updateRequest:t.mutation({query:({id:a,data:s})=>({url:`/requests/${a}`,method:"PUT",body:{request:s}}),invalidatesTags:[{type:"Request",id:"LIST"},{type:"StatusCounts"}]}),createRequest:t.mutation({query:a=>({url:"/requests",method:"POST",body:a}),invalidatesTags:[{type:"Request",id:"LIST"}]}),createCustomer:t.mutation({query:a=>({url:"/users",method:"POST",body:{user:{...a,password:window.crypto.randomUUID()}}})}),updateCustomer:t.mutation({query:({id:a,data:s})=>({url:`/users/${a}`,method:"PUT",body:{user:s}})})})}),{useCreateRequestMutation:$t}=A,b=Pe({reducer:{auth:Ee,contract:kt,parklot:Mt,request:At,requests:Lt,modal:Bt,[R.reducerPath]:R.reducer,[A.reducerPath]:A.reducer,[T.reducerPath]:T.reducer,[M.reducerPath]:M.reducer,[D.reducerPath]:D.reducer,[P.reducerPath]:P.reducer,[k.reducerPath]:k.reducer,[q.reducerPath]:q.reducer,[O.reducerPath]:O.reducer,[N.reducerPath]:N.reducer},middleware:t=>t().concat(Ie,R.middleware,A.middleware,T.middleware,M.middleware,D.middleware,P.middleware,k.middleware,q.middleware,O.middleware,N.middleware)}),$=De.withTypes(),Ft=Me.withTypes();function ne(){return e.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:e.jsx("p",{children:"Global Loading..."})})}const Ut=async()=>{b.dispatch(N.util.prefetch("getSettings",void 0,{force:!0}));const{user:t}=b.getState().auth;return E.get("session_id")||t?z("/"):null},Kt=async()=>{if(b.dispatch(N.util.prefetch("getSettings",void 0,{force:!0})),!E.get("session_id"))return z("/auth/login");const a=await b.dispatch(R.endpoints.verify.initiate());return a.error?(E.remove("session_id"),z("/auth/login")):(a.data&&Ht(),null)};async function Ht(){await new Promise(t=>setTimeout(t,2e3)),b.dispatch(T.endpoints.getServices.initiate()).unwrap(),b.dispatch(D.endpoints.getRates.initiate()).unwrap(),b.dispatch(M.endpoints.getCalendarRates.initiate()).unwrap(),b.dispatch(P.endpoints.getTrucks.initiate()).unwrap(),b.dispatch(k.endpoints.getPackings.initiate()).unwrap(),b.dispatch(q.endpoints.getExtraServices.initiate())}const Gt=[{path:"auth",element:e.jsx(Be,{}),loader:Ut,hydrateFallbackElement:e.jsx(ne,{}),children:[{index:!0,element:e.jsx(B,{to:"/auth/login"})},{path:"login",element:e.jsx(Le,{})},{path:"forgot-password",element:e.jsx(Oe,{})},{path:"reset-password",element:e.jsx(ze,{})}]}];function Vt({...t}){return e.jsx(pe,{"data-slot":"sheet",...t})}function Qt({...t}){return e.jsx(xe,{"data-slot":"sheet-portal",...t})}function Wt({className:t,...a}){return e.jsx(be,{"data-slot":"sheet-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...a})}function Yt({className:t,children:a,side:s="right",...n}){return e.jsxs(Qt,{children:[e.jsx(Wt,{}),e.jsxs(ge,{"data-slot":"sheet-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",s==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",s==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",s==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",s==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[a,e.jsxs(fe,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(bt,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Xt({className:t,...a}){return e.jsx("div",{"data-slot":"sheet-header",className:d("flex flex-col gap-1.5 p-4",t),...a})}function Jt({className:t,...a}){return e.jsx(he,{"data-slot":"sheet-title",className:d("text-foreground font-semibold",t),...a})}function Zt({className:t,...a}){return e.jsx(me,{"data-slot":"sheet-description",className:d("text-muted-foreground text-sm",t),...a})}const ea="sidebar_state",ta=60*60*24*7,aa="16rem",sa="18rem",ra="3rem",na="b",ie=u.createContext(null);function C(){const t=u.useContext(ie);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function ia({defaultOpen:t=!0,open:a,onOpenChange:s,className:n,style:r,children:o,...i}){const c=X(),[f,h]=u.useState(!1),[x,v]=u.useState(t),m=a??x,g=u.useCallback(l=>{const j=typeof l=="function"?l(m):l;s?s(j):v(j),document.cookie=`${ea}=${j}; path=/; max-age=${ta}`},[s,m]),y=u.useCallback(()=>c?h(l=>!l):g(l=>!l),[c,g,h]);u.useEffect(()=>{const l=j=>{j.key===na&&(j.metaKey||j.ctrlKey)&&(j.preventDefault(),y())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[y]);const w=m?"expanded":"collapsed",p=u.useMemo(()=>({state:w,open:m,setOpen:g,isMobile:c,openMobile:f,setOpenMobile:h,toggleSidebar:y}),[w,m,g,c,f,h,y]);return e.jsx(ie.Provider,{value:p,children:e.jsx(We,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":aa,"--sidebar-width-icon":ra,...r},className:d("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",n),...i,children:o})})})}function oa({side:t="left",variant:a="sidebar",collapsible:s="offcanvas",className:n,children:r,...o}){const{isMobile:i,state:c,openMobile:f,setOpenMobile:h}=C();return s==="none"?e.jsx("div",{"data-slot":"sidebar",className:d("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",n),...o,children:r}):i?e.jsxs(Vt,{open:f,onOpenChange:h,...o,children:[e.jsxs(Xt,{className:"sr-only",children:[e.jsx(Jt,{children:"Sidebar"}),e.jsx(Zt,{children:"Displays the mobile sidebar."})]}),e.jsx(Yt,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":sa},side:t,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:r})})]}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":c,"data-collapsible":c==="collapsed"?s:"","data-variant":a,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{className:d("relative h-svh w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{className:d("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:e.jsx("div",{"data-sidebar":"sidebar",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:r})})]})}function da({className:t,onClick:a,...s}){const{toggleSidebar:n}=C();return e.jsxs(G,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:d("",t),onClick:r=>{a==null||a(r),n()},...s,children:[e.jsx(jt,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function la({className:t,...a}){const{toggleSidebar:s}=C();return e.jsx("button",{"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:s,title:"Toggle Sidebar",className:d("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...a})}function ca({className:t,...a}){return e.jsx("main",{"data-slot":"sidebar-inset",className:d("bg-background relative flex min-h-svh flex-1 flex-col","peer-data-[variant=inset]:min-h-[calc(100svh-(--spacing(4)))] md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t),...a})}function ua({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:d("flex flex-col gap-2 p-2",t),...a})}function pa({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:d("flex flex-col gap-2 p-2",t),...a})}function ha({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:d("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...a})}function ma({className:t,...a}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:d("relative flex w-full min-w-0 flex-col p-2",t),...a})}function oe({className:t,...a}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:d("flex w-full min-w-0 flex-col gap-1",t),...a})}function de({className:t,...a}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:d("group/menu-item relative",t),...a})}const ga=ve("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function le({asChild:t=!1,isActive:a=!1,variant:s="default",size:n="default",tooltip:r,className:o,...i}){const c=t?je:"button",{isMobile:f,state:h}=C(),x=e.jsx(c,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":n,"data-active":a,className:d(ga({variant:s,size:n}),o),...i});return r?(typeof r=="string"&&(r={children:r}),e.jsxs(Ye,{children:[e.jsx(Xe,{asChild:!0,children:x}),e.jsx(Je,{side:"right",align:"center",hidden:h!=="collapsed"||f,...r})]})):x}function fa({items:t}){const a=Ne(),{setOpenMobile:s,isMobile:n}=C(),r=L();function o(i){n&&s(!1),r(i,{replace:!0})}return e.jsx(ma,{children:e.jsx(oe,{children:t.map(i=>e.jsx(de,{children:e.jsxs(le,{tooltip:i.title,isActive:a.pathname===`/crm/${i.url}`,onClick:()=>o(i.url),children:[i.icon&&e.jsx(i.icon,{}),e.jsx("span",{children:i.title})]})},i.title))})})}const xa=()=>{const t=$($e);return u.useMemo(()=>({user:t}),[t])};function U(){const{user:t}=xa(),a=L(),[s,{isLoading:n}]=Fe();return e.jsx(oe,{children:e.jsx(de,{children:e.jsxs(V,{modal:!1,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(le,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsx(Ze,{className:"h-8 w-8 rounded-md",children:e.jsxs(et,{className:"rounded-md bg-foreground text-background",children:[t==null?void 0:t.first_name[0],t==null?void 0:t.last_name[0]]})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsxs("span",{className:"truncate font-semibold",children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx("span",{className:"truncate text-xs",children:t==null?void 0:t.email_address})]}),e.jsx(vt,{className:"ml-auto size-4"})]})}),e.jsx(W,{align:"end",sideOffset:4,children:e.jsxs(Y,{onClick:async()=>{await s().unwrap(),a("/auth/login")},disabled:n,children:[e.jsx(yt,{}),"Log out"]})})]})})})}const ba=[{title:"Requests",url:"requests",icon:wt},{title:"Dispatch",url:"dispatch",icon:St},{title:"Settings",url:"settings",icon:Nt},{title:"Messages",url:"messages",icon:J}];function ja({...t}){return e.jsxs(oa,{collapsible:"icon",...t,children:[e.jsx(ua,{children:e.jsx(U,{})}),e.jsx(ha,{children:e.jsx(fa,{items:ba})}),e.jsx(pa,{children:e.jsx(U,{})}),e.jsx(la,{})]})}function va(){const t=L(),[a,{isLoading:s}]=$t(),{data:n}=tt(),r=n==null?void 0:n.filter(i=>i.enabled);async function o(i){const c=await a({service_id:i}).unwrap();t(`/dashboard/requests/${c.id}`)}return e.jsxs(V,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(Ue,{loading:s,disabled:s||(r==null?void 0:r.length)===0,children:e.jsxs("span",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"hidden md:inline-flex",children:"Create Request"}),e.jsx("span",{className:"inline-flex md:hidden",children:"New"}),e.jsx(_t,{className:"size-5"})]})})}),e.jsx(W,{className:"w-56",children:e.jsx(Ke,{children:r==null?void 0:r.map((i,c)=>e.jsx(Y,{className:"cursor-pointer",onClick:()=>o(i.id),children:i.name},c))})})]})}function ya({className:t,...a}){return e.jsx(I,{"data-slot":"command",className:d("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...a})}function wa({title:t="Command Palette",description:a="Search for a command to run...",children:s,...n}){return e.jsxs(at,{...n,children:[e.jsxs(st,{className:"sr-only",children:[e.jsx(rt,{children:t}),e.jsx(nt,{children:a})]}),e.jsx(it,{className:"overflow-hidden p-0",children:e.jsx(ya,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:s})})]})}function Sa({className:t,isLoading:a,...s}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[a?e.jsx(He,{className:"size-4 shrink-0 opacity-50"}):e.jsx(Z,{className:"size-4 shrink-0 opacity-50"}),e.jsx(I.Input,{"data-slot":"command-input",className:d("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...s})]})}function Na({className:t,...a}){return e.jsx(I.List,{"data-slot":"command-list",className:d("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...a})}function K({...t}){return e.jsx(I.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}const ce=H.create({baseURL:"http://localhost:3001/api/v1",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});ce.interceptors.response.use(t=>t,t=>{var a,s;if(H.isAxiosError(t)){const n=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.error)||"An unexpected error occurred.";F.error(n)}else F.error("Network error. Please try again.");return Promise.reject(t)});const _a=500,Ca="k",Ra=({item:t,onSelect:a})=>e.jsx("div",{className:"cursor-pointer px-4 py-2 text-sm transition-colors hover:bg-muted",onClick:a,children:Object.keys(t.data).map(s=>{const n=t.data[s],r=t.highlighting[s];return e.jsxs("div",{className:"grid grid-cols-[7rem_1fr] items-center leading-6",children:[e.jsxs("span",{className:"capitalize text-muted-foreground",children:[s.replace("_"," "),":"]}),r?e.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):e.jsx("span",{children:n})]},s)})});function qa(){const t=L(),a=X(),[s,n]=u.useState(!1),[r,o]=u.useState(""),[i,c]=u.useState([]),[f,h]=u.useState(!1),[x,v]=u.useState(null),m=u.useCallback(async p=>{if(!p.trim()){c([]),h(!1);return}try{const l=await ce.get(`/search?query=${encodeURIComponent(p)}`);c(l.data),v(null)}catch(l){console.error(l),c([]),v("Failed to fetch search results")}finally{h(!1)}},[]),g=u.useCallback(ye(_a,m,{atBegin:!1}),[m]),y=p=>{h(!0),o(p),g(p)},w=p=>{n(!1),t(`/dashboard/requests/${p}`)};return u.useEffect(()=>{const p=l=>{l.key===Ca&&(l.metaKey||l.ctrlKey)&&(l.preventDefault(),n(j=>!j))};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(G,{onClick:()=>n(!0),variant:"outline",size:a?"icon":"default",children:[e.jsx(Z,{}),e.jsx("span",{className:"hidden md:block",children:"Search anything..."}),e.jsxs("kbd",{className:"pointer-events-none hidden h-5 select-none items-center gap-0.5 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100 md:flex",children:[e.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),e.jsxs(wa,{open:s,onOpenChange:n,children:[e.jsx(Sa,{isLoading:f,placeholder:"Search anything",value:r,onValueChange:y}),e.jsxs(Na,{className:"max-h-[470px]",children:[x&&e.jsx(K,{children:x}),!x&&i.length<1&&e.jsx(K,{children:"No results found."}),e.jsx("div",{className:"divide-y",children:i.map((p,l)=>e.jsx(Ra,{item:p,onSelect:()=>w(p.data.id)},`${p.data.id}-${l}`))})]})]})]})}function ka(){return e.jsx("div",{className:"relative",children:e.jsxs(_e,{to:"/crm/messages",className:({isActive:t})=>d(Ge({variant:t?"secondary":"outline",size:"icon"})),children:[e.jsx(J,{}),e.jsx("span",{className:"sr-only",children:"Messages"})]})})}function ue(){const t=E.get("sidebar_state")!=="false";return e.jsxs(ia,{defaultOpen:t,children:[e.jsx(ja,{}),e.jsx(Pa,{})]})}function Pa(){return e.jsxs(ca,{children:[e.jsx("header",{className:"z-50 flex h-16 w-full items-center border-b bg-background px-4",children:e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"-ml-1"}),e.jsx(ot,{orientation:"vertical",className:"mr-2 h-4"}),e.jsx(va,{}),e.jsx(qa,{})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ka,{}),e.jsx(Ve,{})]})]})}),e.jsx("div",{className:"h-[calc(100svh-4rem)] overflow-hidden",children:e.jsx(Ce,{})})]})}function Da({allowedRoles:t,children:a}){const s=$(n=>n.auth.user);return s&&t.includes(s.role)?a:e.jsx(B,{to:"/auth/login",replace:!0})}const Ma={path:"/crm",loader:Kt,element:e.jsx(Da,{allowedRoles:["admin","manager"],children:e.jsx(ue,{})}),hydrateFallbackElement:e.jsx(ne,{}),children:[{index:!0,element:e.jsx(B,{to:"/crm/requests",replace:!0})},{path:"requests",element:e.jsx("div",{children:"Requests"})},{path:"dispatch",element:e.jsx("div",{children:"Dispatch"})},{path:"settings",element:e.jsx(xt,{}),children:[{path:"services",element:e.jsx(dt,{})},{path:"extra-services",element:e.jsx(lt,{})},{path:"packing",element:e.jsx(ct,{})},{path:"trucks",element:e.jsx(ut,{})},{path:"rates",element:e.jsx(pt,{})},{path:"calendar-rates",element:e.jsx(ht,{})},{path:"department",element:e.jsx(gt,{}),children:[{path:":id",element:e.jsx(mt,{})}]},{path:"company",element:e.jsx(ft,{})}]},{path:"messages",element:e.jsx("div",{children:"Messages"})}]},Ta={editDeposit:()=>e.jsx("div",{children:"edit deposit"}),editMoveSize:()=>e.jsx("div",{children:"edit deposit"}),editPacking:()=>e.jsx("div",{children:"edit deposit"}),extraStop:()=>e.jsx("div",{children:"edit deposit"}),closeRequest:()=>e.jsx("div",{children:"edit deposit"})};function Aa(){const t=Ft(),{currentModal:a}=$(r=>r.modal),s=()=>{t(zt())};if(!a)return null;const n=Ta[a];return n?e.jsx(n,{onClose:s}):null}const Ea=Re([{path:"/",element:e.jsxs("div",{className:"flex flex-col gap-10",children:["Hello world!",e.jsx(S,{to:"/auth/login",children:"Login"}),e.jsx(S,{to:"/crm",children:"crm"}),e.jsx(S,{to:"/account",children:"account"}),e.jsx(S,{to:"/testing",children:"testing"}),e.jsx(S,{to:"/schedule",children:"schedule"})]}),errorElement:e.jsx(Ct,{})},{path:"/account",element:e.jsx(Rt,{})},{path:"/crm",element:e.jsx(ue,{})},...Gt,Ma]);function Ia(){return e.jsx(Te,{store:b,children:e.jsxs(Qe,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[e.jsx(qe,{router:Ea}),e.jsx(we,{position:"top-center",richColors:!0}),e.jsx(Aa,{})]})})}Se.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Ia,{})}));
