import{j as e,e as rs,r as h,f as is,g as ls,h as os,i as cs,k as ds,A as us,l as ms,F as xs,m as ps,n as fs,o as gs,p as Ve,q as hs,D as js,s as vs,O as ys,u as bs,v as ws,S as Ns,w as Ss,x as ks,z as v,y as V,t as I,B as ae,E as Cs,H as _s,J as te,K as ne,L as re,M as U,N as ie,Q as le,U as oe,V as ce,W as de,X as ue,Y as me,Z as xe,_ as Ts,$ as zs,a0 as Is,a1 as Ds,a2 as Ls,a3 as Es,a4 as Ps,a5 as Ms,a6 as Rs,a7 as Fs,a8 as Us,a9 as As,aa as $s,ab as Os,ac as qs,ad as Vs,ae as Bs,af as Gs,ag as Qs,ah as Hs,ai as Ws,aj as Ys,ak as Js,al as Ks,b as Xs,am as Zs,an as ea,ao as sa,ap as aa,aq as ta,ar as na,as as ra,at as ia}from"./vendor-Oy3yQvpb.js";import{b as la,N as oa,O as Se,L as ke,c as Ce}from"./vendor-router-BOglXYhN.js";import{b as A,c as d,a as O,B as T,L as Ne,I as _,d as L,C as P,e as M,f as q,g as ca,S as pe,h as _e,u as da,i as Te,j as ua,k as se}from"./page-auth-D4N8GfLA.js";import{X as ma,a as xa,P as pa,H as fa,b as ga,T as ze,D as ha,C as ja,U as va,c as ya,d as Ie,G as fe,e as De,f as Be,g as ge,h as ba,I as wa,i as Na,j as Ge,k as Sa,l as ka,m as Ca,n as _a}from"./vendor-ui-BiEMLtw4.js";import{a as $}from"./vendor-redux-BIS1gR2s.js";import{f as Le}from"./vendor-date-fns-BWtotJsy.js";import{A as Ta,i as Qe}from"./vendor-libphonenumber-js-1k7QeoIm.js";const za=$({reducerPath:"servicesApi",baseQuery:A,tagTypes:["Service"],endpoints:s=>({getServices:s.query({query:()=>"/services",providesTags(a){return a?[...a.map(({id:t})=>({type:"Service",id:t})),{type:"Service",id:"LIST"}]:[{type:"Service",id:"LIST"}]}}),createService:s.mutation({query:a=>({url:"/services",method:"POST",body:{service:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),bulkUpdateServices:s.mutation({query:a=>({url:"/services/bulk_update",method:"POST",body:{services:a.services}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),deleteService:s.mutation({query:({id:a})=>({url:`/services/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]})})}),{useGetServicesQuery:Ia,useCreateServiceMutation:Da,useBulkUpdateServicesMutation:La,useDeleteServiceMutation:Ea}=za,He=$({reducerPath:"calendarRatesApi",baseQuery:A,tagTypes:["CalendarRate"],endpoints:s=>({getCalendarRates:s.query({query:()=>"/calendar_rates",providesTags:a=>a?[...Object.values(a).map(t=>({type:"CalendarRate",id:t.id})),{type:"CalendarRate",id:"LIST"}]:[{type:"CalendarRate",id:"LIST"}]}),updateCalendarRate:s.mutation({query:({id:a,newData:t})=>({url:`/calendar_rates/${a}`,method:"PUT",body:{calendar_rate:t}}),invalidatesTags:(a,t,{id:n})=>t?[]:[{type:"CalendarRate",id:n}]})})}),{useGetCalendarRatesQuery:Pa,useUpdateCalendarRateMutation:Ma}=He,Ra=$({reducerPath:"ratesApi",baseQuery:A,tagTypes:["Rate","CalendarRate"],endpoints:s=>({getRates:s.query({query:()=>"/rates",providesTags(a){return a?[...a.map(({id:t})=>({type:"Rate",id:t})),{type:"Rate",id:"LIST"}]:[{type:"Rate",id:"LIST"}]}}),bulkUpdateRates:s.mutation({query:a=>({url:"/rates/bulk_update",method:"POST",body:{rates:a.rates}}),invalidatesTags:(a,t)=>t?[]:[{type:"Rate",id:"LIST"}],async onQueryStarted(a,{dispatch:t,queryFulfilled:n}){try{await n,t(He.util.invalidateTags([{type:"CalendarRate",id:"LIST"}]))}catch(i){console.log("error",i)}}})})}),{useGetRatesQuery:Ee,useBulkUpdateRatesMutation:Fa}=Ra,Ua=$({reducerPath:"trucksApi",baseQuery:A,tagTypes:["Truck"],endpoints:s=>({getTrucks:s.query({query:()=>"/trucks",providesTags(a){return a?[...a.map(({id:t})=>({type:"Truck",id:t})),{type:"Truck",id:"LIST"}]:[{type:"Truck",id:"LIST"}]}}),createTruck:s.mutation({query:a=>({url:"/trucks",method:"POST",body:{truck:a}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),bulkUpdateTrucks:s.mutation({query:a=>({url:"/trucks/bulk_update",method:"POST",body:{trucks:a.trucks}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),deleteTruck:s.mutation({query:({id:a})=>({url:`/trucks/${a}`,method:"DELETE"}),invalidatesTags:[{type:"Truck",id:"LIST"}]})})}),{useGetTrucksQuery:Aa,useCreateTruckMutation:$a,useBulkUpdateTrucksMutation:Oa}=Ua,qa=$({reducerPath:"packingsApi",baseQuery:A,tagTypes:["Packing"],endpoints:s=>({getPackings:s.query({query:()=>"/packings",providesTags(a){return a?[...a.map(({id:t})=>({type:"Packing",id:t})),{type:"Packing",id:"LIST"}]:[{type:"Packing",id:"LIST"}]}}),updatePacking:s.mutation({query:({id:a,...t})=>({url:`/packings/${a}`,method:"PATCH",body:{packing:t}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),createPacking:s.mutation({query:a=>({url:"/packings",method:"POST",body:{packing:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),bulkUpdatePackings:s.mutation({query:a=>({url:"/packings/bulk_update",method:"POST",body:{packings:a.packings}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),deletePacking:s.mutation({query:({id:a})=>({url:`/packings/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]})})}),{useGetPackingsQuery:Va,useCreatePackingMutation:Ba,useUpdatePackingMutation:Ga,useBulkUpdatePackingsMutation:Qa,useDeletePackingMutation:Ha}=qa,Wa=$({reducerPath:"extraServicesApi",baseQuery:A,tagTypes:["ExtraService"],endpoints:s=>({getExtraServices:s.query({query:()=>"/extra_services",providesTags(a){return a?[...a.map(({id:t})=>({type:"ExtraService",id:t})),{type:"ExtraService",id:"LIST"}]:[{type:"ExtraService",id:"LIST"}]}}),createExtraService:s.mutation({query:a=>({url:"/extra_services",method:"POST",body:{extra_service:a}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),bulkUpdateExtraServices:s.mutation({query:a=>({url:"/extra_services/bulk_update",method:"POST",body:{extra_services:a.extra_services}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),deleteExtraService:s.mutation({query:({id:a})=>({url:`/extra_services/${a}`,method:"DELETE"}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]})})}),{useGetExtraServicesQuery:Ya,useCreateExtraServiceMutation:Ja,useBulkUpdateExtraServicesMutation:Ka,useDeleteExtraServiceMutation:Xa}=Wa,Za=$({reducerPath:"employeesApi",baseQuery:A,tagTypes:["Employee"],endpoints:s=>({getEmployees:s.query({query:()=>"/employees",providesTags(a){return a?[...a.map(({id:t})=>({type:"Employee",id:t})),{type:"Employee",id:"LIST"}]:[{type:"Employee",id:"LIST"}]}}),getEmployeeById:s.query({query:({id:a})=>`/employees/${a}`,providesTags:(a,t,{id:n})=>a?[{type:"Employee",id:n}]:[{type:"Employee",id:"LIST"}]}),updateEmployee:s.mutation({query:({id:a,data:t})=>({url:`/employees/${a}`,method:"PUT",body:{employee:t}}),invalidatesTags:(a,t,{id:n})=>t?[]:[{type:"Employee",id:n},{type:"Employee",id:"LIST"}]}),createEmployee:s.mutation({query:({data:a})=>({url:"/employees",method:"POST",body:{employee:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Employee",id:"LIST"}]})})}),{useGetEmployeesQuery:et,useGetEmployeeByIdQuery:st,useUpdateEmployeeMutation:at,useCreateEmployeeMutation:tt}=Za,nt=$({reducerPath:"moveSizesApi",baseQuery:A,tagTypes:["MoveSize"],endpoints:s=>({getMoveSizes:s.query({query:()=>"/move_sizes",providesTags(a){return a?[...a.map(({id:t})=>({type:"MoveSize",id:t})),{type:"MoveSize",id:"LIST"}]:[{type:"MoveSize",id:"LIST"}]}}),createMoveSize:s.mutation({query:a=>{var n,i,r,l;console.log("moveSize",a);const t=new FormData;return t.append("move_size[name]",a.name??""),t.append("move_size[description]",a.description??""),t.append("move_size[dispersion]",((n=a.dispersion)==null?void 0:n.toString())??""),t.append("move_size[truck_count]",((i=a.truck_count)==null?void 0:i.toString())??""),t.append("move_size[volume]",((r=a.volume)==null?void 0:r.toString())??""),t.append("move_size[weight]",((l=a.weight)==null?void 0:l.toString())??""),t.append("move_size[crew_size_settings]",JSON.stringify(a.crew_size_settings)),a.image&&t.append("move_size[image]",a.image),{url:"/move_sizes",method:"POST",body:t}},invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),updateMoveSize:s.mutation({query:({id:a,...t})=>{var i,r,l,x;console.log("moveSize",t);const n=new FormData;return n.append("move_size[name]",t.name??""),n.append("move_size[description]",t.description??""),n.append("move_size[dispersion]",((i=t.dispersion)==null?void 0:i.toString())??""),n.append("move_size[truck_count]",((r=t.truck_count)==null?void 0:r.toString())??""),n.append("move_size[volume]",((l=t.volume)==null?void 0:l.toString())??""),n.append("move_size[weight]",((x=t.weight)==null?void 0:x.toString())??""),n.append("move_size[crew_size_settings]",JSON.stringify(t.crew_size_settings)),t.image&&n.append("move_size[image]",t.image),{url:`/move_sizes/${a}`,method:"PATCH",body:n}},invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),bulkUpdateMoveSizes:s.mutation({query:a=>({url:"/move_sizes/bulk_update",method:"POST",body:{move_sizes:a.moveSizes}}),invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),deleteMoveSize:s.mutation({query:({id:a})=>({url:`/move_sizes/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]})})}),{useGetMoveSizesQuery:rt,useCreateMoveSizeMutation:it,useUpdateMoveSizeMutation:lt,useBulkUpdateMoveSizesMutation:ot,useDeleteMoveSizeMutation:ct}=nt;function R({className:s,orientation:a="horizontal",decorative:t=!0,...n}){return e.jsx(rs,{"data-slot":"separator-root",decorative:t,orientation:a,className:d("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...n})}const we=768;function Pe(){const[s,a]=h.useState(void 0);return h.useEffect(()=>{const t=window.matchMedia(`(max-width: ${we-1}px)`),n=()=>{a(window.innerWidth<we)};return t.addEventListener("change",n),a(window.innerWidth<we),()=>t.removeEventListener("change",n)},[]),!!s}function D({className:s,...a}){return e.jsx("div",{"data-slot":"skeleton",className:d("bg-primary/10 animate-pulse rounded-md",s),...a})}function We({delayDuration:s=0,...a}){return e.jsx(is,{"data-slot":"tooltip-provider",delayDuration:s,...a})}function dt({...s}){return e.jsx(We,{children:e.jsx(ls,{"data-slot":"tooltip",...s})})}function ut({...s}){return e.jsx(os,{"data-slot":"tooltip-trigger",...s})}function mt({className:s,sideOffset:a=4,children:t,...n}){return e.jsx(cs,{children:e.jsxs(ds,{"data-slot":"tooltip-content",sideOffset:a,className:d("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",s),...n,children:[t,e.jsx(us,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function xt({className:s,...a}){return e.jsx(ms,{"data-slot":"avatar",className:d("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...a})}function pt({className:s,...a}){return e.jsx(xs,{"data-slot":"avatar-fallback",className:d("bg-muted flex size-full items-center justify-center rounded-full",s),...a})}function Y({...s}){return e.jsx(ps,{"data-slot":"dialog",...s})}function he({...s}){return e.jsx(fs,{"data-slot":"dialog-trigger",...s})}function ft({...s}){return e.jsx(vs,{"data-slot":"dialog-portal",...s})}function Me({...s}){return e.jsx(Ve,{"data-slot":"dialog-close",className:d(O({variant:"outline"}),"mt-2 sm:mt-0"),...s})}function gt({className:s,...a}){return e.jsx(ys,{"data-slot":"dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function J({className:s,children:a,...t}){return e.jsxs(ft,{"data-slot":"dialog-portal",children:[e.jsx(gt,{}),e.jsxs(gs,{"data-slot":"dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...t,children:[a,e.jsxs(Ve,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ma,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function K({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",s),...a})}function Re({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-footer",className:d("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function X({className:s,...a}){return e.jsx(hs,{"data-slot":"dialog-title",className:d("text-lg leading-none font-semibold",s),...a})}function je({className:s,...a}){return e.jsx(js,{"data-slot":"dialog-description",className:d("text-muted-foreground text-sm",s),...a})}function Fe({children:s,className:a}){return e.jsx("div",{className:d("overflow-y-auto pb-6",a),children:s})}const ht=[{name:"Company",href:"company",icon:xa},{name:"Moving Services",href:"services",icon:pa},{name:"Extra Services",href:"extra-services",icon:fa},{name:"Packing",href:"packing",icon:ga},{name:"Trucks",href:"trucks",icon:ze,prefetchUrl:"/trucks"},{name:"Rates",href:"rates",icon:ha},{name:"Calendar Rates",href:"calendar-rates",icon:ja},{name:"Department",href:"department",icon:va},{name:"Calculator",href:"calculator",icon:ya}];function jt(){const{pathname:s}=la();return e.jsxs(Fe,{className:d("hidden lg:block lg:border-r",{block:s==="/crm/settings"}),children:[e.jsx("h2",{className:"px-6 pt-4 text-lg font-semibold",children:"Settings"}),e.jsx("div",{className:"space-y-2 p-4",children:ht.map((a,t)=>e.jsxs(oa,{to:a.href,className:({isActive:n})=>d(O({variant:n?"secondary":"ghost",className:"w-full justify-start text-left"})),children:[e.jsx(a.icon,{className:"size-4"}),a.name]},t))})]})}function Mn(){return e.jsxs("div",{className:"grid h-full lg:grid-cols-[20rem_1fr]",children:[e.jsx(jt,{}),e.jsx(Se,{})]})}function F({children:s,title:a,className:t}){return e.jsxs(Fe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(T,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(ke,{to:"/crm/settings",children:e.jsx(Ie,{})})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a})]}),e.jsx("div",{className:d("overflow-y-auto p-4",t),children:s})]})}const B=bs,Ye=h.createContext({}),N=({...s})=>e.jsx(Ye.Provider,{value:{name:s.name},children:e.jsx(ws,{...s})}),ve=()=>{const s=h.useContext(Ye),a=h.useContext(Je),{getFieldState:t}=Ss(),n=ks({name:s.name}),i=t(s.name,n);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:r}=a;return{id:r,name:s.name,formItemId:`${r}-form-item`,formDescriptionId:`${r}-form-item-description`,formMessageId:`${r}-form-item-message`,...i}},Je=h.createContext({});function S({className:s,...a}){const t=h.useId();return e.jsx(Je.Provider,{value:{id:t},children:e.jsx("div",{"data-slot":"form-item",className:d("grid gap-2",s),...a})})}function z({className:s,...a}){const{error:t,formItemId:n}=ve();return e.jsx(Ne,{"data-slot":"form-label","data-error":!!t,className:d("data-[error=true]:text-destructive-foreground",s),htmlFor:n,...a})}function k({...s}){const{error:a,formItemId:t,formDescriptionId:n,formMessageId:i}=ve();return e.jsx(Ns,{"data-slot":"form-control",id:t,"aria-describedby":a?`${n} ${i}`:`${n}`,"aria-invalid":!!a,...s})}function vt({className:s,...a}){const{formDescriptionId:t}=ve();return e.jsx("p",{"data-slot":"form-description",id:t,className:d("text-muted-foreground text-sm",s),...a})}function E({className:s,...a}){const{error:t,formMessageId:n}=ve(),i=t?String(t==null?void 0:t.message):a.children;return i?e.jsx("p",{"data-slot":"form-message",id:n,className:d("text-destructive-foreground text-sm",s),...a,children:i}):null}const yt=v.object({name:v.string().min(5,{message:"Service name must be at least 5 characters"})});function bt(){const[s,{isLoading:a}]=Da(),t=V({resolver:ae(yt),reValidateMode:"onChange",defaultValues:{name:""}});async function n(i){await s(i).unwrap(),I.success(`${i.name} successfully added`),t.reset()}return e.jsx("div",{children:e.jsx(B,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(n),className:"flex gap-4",children:[e.jsx(N,{control:t.control,name:"name",render:({field:i})=>e.jsxs(S,{className:"w-full",children:[e.jsx(k,{children:e.jsx(_,{...i,placeholder:"Service name",autoComplete:"off",className:"bg-accent"})}),e.jsx(E,{})]})}),e.jsx(L,{loading:a,disabled:a,children:"Add service"})]})})})}function Z({className:s,...a}){return e.jsx(Cs,{"data-slot":"switch",className:d("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(_s,{"data-slot":"switch-thumb",className:d("bg-background pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function wt({id:s,item:a,onEnabledChange:t}){const[n,{isLoading:i}]=Ea(),{attributes:r,listeners:l,setNodeRef:x,transform:c,transition:p,isDragging:f}=te({id:s}),u={transform:ne.Transform.toString(c),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:x,style:u,className:d("grid grid-cols-[max-content_1fr_max-content_max-content] border rounded-md items-center gap-2 p-2",{"bg-background shadow-lg":f}),children:[e.jsx(T,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...r,...l,children:e.jsx(fe,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:a.name})}),e.jsx(Z,{checked:a.enabled,onCheckedChange:o=>{t(a.id,o)}}),a.is_default?e.jsx("div",{className:"size-9"}):e.jsx(L,{loading:i,disabled:i,variant:"ghost",size:"icon",className:"hover:text-red-600",onClick:async()=>{await n({id:a.id}).unwrap(),I.success(`${a.name} successfully deleted`)},children:e.jsx(De,{})})]})}function Nt(){const{data:s,isLoading:a,isError:t}=Ia(),[n,{isLoading:i}]=La(),[r,l]=h.useState([]),[x,c]=h.useState(!1),p=re(U(xe),U(me,{coordinateGetter:ue}));h.useEffect(()=>{s&&l(s)},[s]);function f(o){const{active:m,over:j}=o;if(j&&m.id!==j.id){const b=r.findIndex(w=>w.id===m.id),g=r.findIndex(w=>w.id===j.id),C=de(r,b,g).map((w,H)=>({...w,index:H}));l(C),c(!0)}}function u(o,m){l(j=>j.map(b=>b.id===o?{...b,enabled:m}:b)),c(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:8}).map((o,m)=>e.jsx(D,{className:"h-13.5 w-full"},m))}),s&&e.jsx(ie,{sensors:p,collisionDetection:oe,onDragEnd:f,modifiers:[le],children:e.jsx(ce,{items:r,children:e.jsx("div",{className:"space-y-2",children:r.map(o=>e.jsx(wt,{id:o.id,item:o,onEnabledChange:u},o.id))})})}),e.jsx(R,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!x,"visible opacity-100":x}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),c(!1)},children:"Cancel"}),e.jsx(L,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await n({services:r}).unwrap(),I.success("Changes saved"),c(!1)},children:"Save changes"})]})})]})}function Rn(){return e.jsx(F,{title:"Moving Services",children:e.jsx(P,{className:"max-w-xl",children:e.jsxs(M,{className:"space-y-6",children:[e.jsx(bt,{}),e.jsx(Nt,{})]})})})}function Ue({className:s,children:a,...t}){return e.jsxs(Ts,{"data-slot":"scroll-area",className:d("relative",s),...t,children:[e.jsx(zs,{"data-slot":"scroll-area-viewport",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1",children:a}),e.jsx(ye,{}),e.jsx(Is,{})]})}function ye({className:s,orientation:a="vertical",...t}){return e.jsx(Ds,{"data-slot":"scroll-area-scrollbar",orientation:a,className:d("flex touch-none p-px transition-colors select-none",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",s),...t,children:e.jsx(Ls,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function St(s){return(s/100).toString()}function W(s){const{value:a,onValueChange:t,className:n,...i}=s,[r,l]=h.useState("0");return h.useEffect(()=>{l(St(a))},[a]),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(_,{pattern:"[0-9]+",inputMode:"numeric",value:r,onChange:x=>{const c=x.target.value.replace(/[^0-9.]/g,"");if(/^\d*\.?\d{0,2}$/.test(c)){l(c);const p=parseFloat(c)||0;t(p*100)}},className:d("pl-4",n),...i}),e.jsx("span",{className:"absolute left-2 flex bg-transparent text-sm",children:"$"})]})}function kt({id:s,item:a,onChange:t}){const[n,{isLoading:i}]=Xa(),{attributes:r,listeners:l,setNodeRef:x,transform:c,transition:p,isDragging:f}=te({id:s}),u={transform:ne.Transform.toString(c),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:x,style:u,className:d("grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 p-2",{"bg-background shadow-lg":f}),children:[e.jsx(T,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...r,...l,children:e.jsx(fe,{})}),e.jsx(_,{value:a.name,onChange:o=>{const m=o.target.value;t(a.id,{name:m})},name:a.name}),e.jsx(W,{value:a.price,onValueChange:o=>{t(a.id,{price:o})}}),e.jsx(Z,{checked:a.enabled,onCheckedChange:o=>{t(a.id,{enabled:o})}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(L,{disabled:i,loading:i,variant:"secondary",onClick:async()=>{await n({id:a.id}).unwrap(),I.success(`${a.name} successfully deleted`)},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"size-4"}),"Delete"]})})})]})}function Ct(){const{data:s,isLoading:a,isError:t}=Ya(),[n,{isLoading:i}]=Ka(),[r,l]=h.useState([]),[x,c]=h.useState(!1),p=re(U(xe),U(me,{coordinateGetter:ue}));h.useEffect(()=>{s&&l(s)},[s]);function f(o){const{active:m,over:j}=o;if(j&&m.id!==j.id){const b=r.findIndex(w=>w.id===m.id),g=r.findIndex(w=>w.id===j.id),C=de(r,b,g).map((w,H)=>({...w,index:H}));l(C),c(!0)}}function u(o,m){l(j=>j.map(b=>b.id===o?{...b,...m}:b)),c(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch extra services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(Ue,{className:"w-full",children:[e.jsxs("div",{className:"mb-4 grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 text-sm font-medium text-muted-foreground",children:[e.jsx("p",{className:"size-9"}),e.jsx("p",{children:"Service name"}),e.jsx("p",{children:"Service cost, $"}),e.jsx("p",{children:"Enable"}),e.jsx("p",{})]}),e.jsx(R,{}),a&&e.jsx(_t,{}),s&&e.jsx(ie,{sensors:p,collisionDetection:oe,onDragEnd:f,modifiers:[le],children:e.jsx(ce,{items:r,children:e.jsx("div",{className:"pt-4 min-w-[700px] space-y-2",children:r.map(o=>e.jsx(kt,{id:o.id,item:o,onChange:u},o.id))})})}),e.jsx(ye,{orientation:"horizontal"})]}),e.jsx(R,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!x,"visible opacity-100":x}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),c(!1)},children:"Cancel"}),e.jsx(L,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await n({extra_services:r}).unwrap(),c(!1),I.success("Changes saved"),c(!1)},children:"Save changes"})]})})]})}function _t(){return e.jsx("div",{className:"space-y-4 py-6",children:Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"grid grid-cols-[max-content_3fr_1fr_1fr_1fr] gap-4",children:[e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"})]},a))})}v.object({name:v.string().min(5),price:v.number().min(1),enabled:v.boolean()});function Tt(){const[s,{isLoading:a}]=Ja(),[t,n]=h.useState(!1),i=V({defaultValues:{name:"",price:0,enabled:!0}});function r(){i.reset(),n(x=>!x)}async function l(x){await s(x).unwrap(),I.success(`${x.name} successfully added`),i.reset(),r()}return e.jsxs(Y,{open:t,onOpenChange:r,children:[e.jsx(he,{asChild:!0,className:"ml-auto",children:e.jsx(T,{size:"icon",children:e.jsx(Be,{})})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(X,{children:"Add extra service"}),e.jsx(je,{className:"hidden"})]}),e.jsx(B,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsx(N,{control:i.control,name:"name",render:({field:x})=>e.jsxs(S,{children:[e.jsx(z,{children:"Name"}),e.jsx(k,{children:e.jsx(_,{placeholder:"Service name",...x})})]})}),e.jsx(N,{control:i.control,name:"price",render:({field:x})=>e.jsxs(S,{children:[e.jsx(z,{children:"Price"}),e.jsx(k,{children:e.jsx(W,{name:"price",value:x.value,onValueChange:c=>{i.setValue("price",c)}})})]})}),e.jsxs(Re,{children:[e.jsx(Me,{children:"Cancel"}),e.jsx(L,{type:"submit",loading:a,disabled:a,children:"Add service"})]})]})})]})]})}function Fn(){return e.jsx(F,{title:"Extra Services",children:e.jsxs(P,{className:"max-w-4xl gap-0",children:[e.jsx(q,{className:"flex flex-row items-center",children:e.jsx(Tt,{})}),e.jsx(M,{children:e.jsx(Ct,{})})]})})}function Ke({className:s,...a}){return e.jsx("textarea",{"data-slot":"textarea",className:d("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}v.object({name:v.string(),description:v.string(),labor_increase:v.number()});function Xe({data:s}){const[a,{isLoading:t}]=Ba(),[n,{isLoading:i}]=Ga(),[r,l]=h.useState(!1),x=Pe(),c=!!s,p=V({defaultValues:{name:"",description:"",labor_increase:0}});h.useEffect(()=>{s&&p.reset(s)},[s]);function f(){p.reset(),l(o=>!o)}async function u(o){c?(await n({id:s.id,...o}).unwrap(),I.success("Packing successfully updated")):(await a(o).unwrap(),I.success("Packing successfully added")),p.reset(),f()}return e.jsxs(Y,{open:r,onOpenChange:f,children:[e.jsx(he,{asChild:!0,className:`${c?null:"ml-auto"}`,children:c?e.jsxs(T,{variant:"outline",className:"text-primary hover:text-primary",size:x?"icon":"default",children:[e.jsx(ge,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(T,{size:"icon",children:e.jsx(Be,{})})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsxs(X,{children:[c?"Edit":"Add"," packing service"]}),e.jsx(je,{className:"hidden"})]}),e.jsx(B,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(u),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-250px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(N,{control:p.control,name:"name",render:({field:o})=>e.jsxs(S,{children:[e.jsx(z,{children:"Name"}),e.jsx(k,{children:e.jsx(_,{...o})})]})}),e.jsx(N,{control:p.control,name:"description",render:({field:o})=>e.jsxs(S,{children:[e.jsx(z,{children:"Description"}),e.jsx(k,{children:e.jsx(Ke,{rows:16,...o})})]})}),e.jsx(N,{control:p.control,name:"labor_increase",render:({field:o})=>e.jsxs(S,{children:[e.jsx(z,{children:"Labor increse (%)"}),e.jsx(k,{children:e.jsx(_,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...o})})]})})]}),e.jsxs(Re,{children:[e.jsx(Me,{children:"Cancel"}),e.jsx(L,{type:"submit",loading:t||i,disabled:t||i,children:c?"Save changes":"Add packing"})]})]})})]})]})}function zt({item:s}){const a=Pe(),[t,{isLoading:n}]=Ha(),i=s.is_default,{attributes:r,listeners:l,setNodeRef:x,transform:c,transition:p,isDragging:f}=te({id:s.id}),u={transform:ne.Transform.toString(c),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:i?null:x,style:u,className:d("grid grid-cols-[max-content_1fr_auto_auto] border rounded-md items-center gap-2 p-4",{"bg-background shadow-lg":f}),children:[e.jsx(T,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",disabled:i,...i?{}:r,...i?{}:l,children:e.jsx(fe,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:s.name})}),e.jsx(Xe,{data:s}),i?e.jsx(T,{variant:"ghost",disabled:!0,size:a?"icon":"default",children:e.jsx("span",{className:"hidden md:inline-flex ml-4",children:"Default"})}):null,!i&&e.jsx(L,{disabled:n,loading:n,variant:"secondary",onClick:async()=>{await t({id:s.id}).unwrap(),I.success(`${s.name} successfully deleted`)},size:a?"icon":"default",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(De,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Delete"})]})})]})}function It(){const{data:s,isLoading:a,isError:t}=Va(),[n,{isLoading:i}]=Qa(),[r,l]=h.useState([]),[x,c]=h.useState(!1),p=re(U(xe),U(me,{coordinateGetter:ue}));h.useEffect(()=>{s&&l(s)},[s]);function f(u){const{active:o,over:m}=u;if(m&&o.id!==m.id){const j=r.findIndex(y=>y.id===o.id),b=r.findIndex(y=>y.id===m.id),g=de(r,j,b).map((y,C)=>({...y,index:C}));l(g),c(!0)}}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch packings"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((u,o)=>e.jsx(D,{className:"h-11 w-full"},o))}),s&&e.jsx(ie,{sensors:p,collisionDetection:oe,onDragEnd:f,modifiers:[le],children:e.jsx(ce,{items:r,children:e.jsx("div",{className:"space-y-2",children:r.map(u=>e.jsx(zt,{item:u},u.id))})})}),e.jsx(R,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!x,"visible opacity-100":x}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),c(!1)},children:"Cancel"}),e.jsx(L,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await n({packings:r}).unwrap(),c(!1),I.success("Changes saved")},children:"Save changes"})]})})]})}function Un(){return e.jsx(F,{title:"Packing Services",children:e.jsxs(P,{className:"max-w-2xl",children:[e.jsx(q,{children:e.jsx(Xe,{})}),e.jsx(M,{children:e.jsx(It,{})})]})})}const Dt=v.object({name:v.string().min(2,{message:"Truck name must be at least 2 characters"})});function Lt(){const[s,{isLoading:a}]=$a(),t=V({resolver:ae(Dt),reValidateMode:"onChange",defaultValues:{name:""}});async function n(i){await s(i).unwrap(),I.success(`${i.name} successfully added`),t.reset()}return e.jsx(B,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(n),className:"flex gap-4",children:[e.jsx(N,{control:t.control,name:"name",render:({field:i})=>e.jsxs(S,{className:"w-full",children:[e.jsx(k,{children:e.jsx(_,{...i,placeholder:"Truck name",autoComplete:"off",className:"bg-accent"})}),e.jsx(E,{})]})}),e.jsx(L,{disabled:a,loading:a,children:"Add truck"})]})})}function Et(){const{data:s,isLoading:a,isError:t}=Aa(),[n,{isLoading:i}]=Oa(),[r,l]=h.useState([]),[x,c]=h.useState(!1);h.useEffect(()=>{s&&l(s)},[s]);async function p(){await n({trucks:r}).unwrap(),c(!1),I.success("Changes saved")}function f(u,o,m){const j=r.map(b=>b.id===u.id?{...b,[o]:m}:b);l(j),c(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch trucks"})}):e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[a&&e.jsx(e.Fragment,{children:Array.from({length:3}).map((u,o)=>e.jsx(D,{className:"h-9 w-full"},o))}),r==null?void 0:r.map((u,o)=>e.jsxs("div",{className:"grid grid-cols-[6rem_3rem_1fr] gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(ze,{className:"size-5"}),e.jsxs("span",{children:["Truck ",o+1]})]}),e.jsx(Z,{checked:u.is_active,onCheckedChange:m=>{f(u,"is_active",m)}}),e.jsx(_,{value:u.name,onChange:m=>{const j=m.target.value;f(u,"name",j)}})]},u.id))]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!x,"visible opacity-100":x}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),c(!1)},children:"Cancel"}),e.jsx(L,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:p,children:"Save changes"})]})})})]})}function An(){return e.jsx(F,{title:"Trucks",children:e.jsx(P,{className:"max-w-xl",children:e.jsxs(M,{className:"space-y-6",children:[e.jsx(Lt,{}),e.jsx(Et,{})]})})})}function ee(s,a={}){s||(s=0);const{currency:t="USD",notation:n="standard"}=a,i=typeof s=="string"?parseFloat(s)/100:s/100;return new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:n,maximumFractionDigits:2}).format(i)}function be(s){s=s.replace(/^#/,""),s.length===3&&(s=s.split("").map(r=>r+r).join(""));const a=parseInt(s,16),t=a>>16&255,n=a>>8&255,i=a&255;return`${t}, ${n}, ${i}`}const Ae="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function $n(){const{data:s,isLoading:a}=Ee(),[t,{isLoading:n}]=Fa(),[i,r]=h.useState([]),[l,x]=h.useState(!1),[c,p]=h.useState(null);h.useEffect(()=>{s&&r(s)},[s]);function f(u){const o=i.map(m=>m.id===u.id?u:m);r(o),x(!0)}return e.jsx(F,{title:"Rates",children:e.jsxs(P,{children:[e.jsx(M,{className:"space-y-4",children:e.jsxs(Ue,{className:"w-full",children:[e.jsxs("div",{className:d("mb-4 text-muted-foreground",Ae),children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:"2 movers"}),e.jsx("p",{children:"3 movers"}),e.jsx("p",{children:"4 movers"}),e.jsx("p",{children:"Extra mover"}),e.jsx("p",{children:"Extra truck"}),e.jsx("p",{children:"On/Off"}),e.jsx("p",{})]}),e.jsx(R,{}),e.jsxs("div",{className:"min-w-[900px] divide-y",children:[a&&e.jsx(Pt,{}),i==null?void 0:i.map((u,o)=>e.jsxs("div",{className:d("py-4",Ae),children:[c===o?e.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[e.jsx(_,{value:u.name,onChange:m=>{f({...u,name:m.target.value})}}),e.jsx(_,{type:"color",value:u.color,onChange:m=>{f({...u,color:m.target.value})},className:"px-[2px] py-0"})]}):e.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:u.color,backgroundColor:`rgba(${be(u.color)}, 0.1)`},children:[u.name,e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:u.color}})]}),Object.keys(u.movers_rates).slice(0,3).map((m,j)=>{const b=u.movers_rates[m].hourly_rate;return c===o?e.jsx(W,{value:b,onValueChange:g=>{f({...u,movers_rates:{...u.movers_rates,[m]:{...u.movers_rates[m],hourly_rate:g}}})}},j):e.jsx("div",{children:ee(b)},j)}),e.jsx("div",{children:c===o?e.jsx(W,{value:u.extra_mover_rate,onValueChange:m=>f({...u,extra_mover_rate:m})}):ee(u.extra_mover_rate)}),e.jsx("div",{children:c===o?e.jsx(W,{value:u.extra_truck_rate,onValueChange:m=>f({...u,extra_truck_rate:m})}):ee(u.extra_truck_rate)}),e.jsx(Z,{id:u.name,checked:u.enable,disabled:u.id===1,onCheckedChange:m=>{f({...u,enable:m})}}),e.jsxs(T,{variant:"outline",onClick:()=>{p(m=>m===o?null:o)},children:[e.jsx(ge,{}),"Edit"]})]},o))]}),e.jsx(ye,{orientation:"horizontal"})]})}),e.jsx(ca,{className:"justify-end border-t pt-6",children:e.jsxs("div",{className:d("flex min-h-9 w-full gap-4 transition-opacity duration-500 sm:w-auto",{"invisible opacity-0":!l,"visible opacity-100":l}),children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{r(s),x(!1),p(null)},children:"Cancel"}),e.jsx(L,{type:"button",className:"w-full sm:w-auto",disabled:n,loading:n,onClick:async()=>{await t({rates:i}).unwrap(),x(!1),p(null),I.success("Changes saved")},children:"Save changes"})]})})]})})}function Pt(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"}),e.jsx(D,{className:"h-9 w-full"})]},a))})}const Mt=s=>new Date(s.getFullYear(),s.getMonth()+1,0);function Ze({onSelectDate:s,className:a,classNames:t,showOutsideDays:n=!1,showFooter:i=!0,...r}){const{data:l,isLoading:x}=Pa(),[c,p]=h.useState(r.today??new Date),f=new Date,u=new Date;return u.setMonth(f.getMonth()+11),e.jsxs(e.Fragment,{children:[e.jsx(Es,{month:c,onMonthChange:p,showOutsideDays:n,className:d("p-3",a),startMonth:f,endMonth:Mt(u),classNames:{month:"space-y-4",months:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 relative",month_caption:"flex justify-center pt-1 relative items-center",month_grid:"w-full border-collapse space-y-1",caption_label:"text-sm font-medium",nav:"flex items-center justify-between absolute inset-x-0",button_previous:d(O({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),button_next:d(O({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),weeks:"w-full border-collapse space-y-",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2 gap-1",day_button:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:d(O({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),range_end:"day-range-end",selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",hidden:"invisible",...t},components:{Chevron:({...o})=>o.orientation==="left"?e.jsx(Ie,{...o,className:"h-4 w-4"}):e.jsx(ba,{...o,className:"h-4 w-4"}),Day:o=>{const{day:m}=o,j=m.date;if(x)return e.jsx("td",{children:e.jsx(D,{className:"h-8 w-8 p-0"})});if(!l)return e.jsx(e.Fragment,{});const b=j.getMonth()===c.getMonth(),g=Le(j,"yyyy-MM-dd"),y=l[g],C=(y==null?void 0:y.rate)??null,w={color:"inherit",backgroundColor:"inherit",opacity:1};return y!=null&&y.is_blocked&&(w.color="black",w.backgroundColor="#dcdcdc"),C&&(w.color=C.color,w.backgroundColor=`rgba(${be(C==null?void 0:C.color)}, 0.1)`),b||(w.backgroundColor="#f3f3f3",w.color="#7e7e7e",w.opacity=.5),e.jsx("td",{children:e.jsx("button",{className:d(O({variant:"ghost"}),"h-8 w-8 p-0 font-semibold aria-selected:opacity-100"),disabled:!b,style:w,onClick:()=>{s(j,y)},children:j.getDate()})})}},...r}),i&&e.jsx(Rt,{})]})}Ze.displayName="CalendarWithRates";function Rt(){const{data:s}=Ee();return e.jsx("div",{className:"w-full border-t bg-muted",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-x-4 gap-y-2 px-6 py-4 text-xs font-semibold",children:[s==null?void 0:s.map((a,t)=>e.jsx(We,{children:e.jsxs(dt,{delayDuration:20,children:[e.jsx(ut,{asChild:!0,className:"cursor-help",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:a.color,backgroundColor:`rgba(${be(a.color)}, 0.1)`},children:[a.name,e.jsx(wa,{className:"size-4"})]},a.id)}),e.jsx(mt,{className:"min-w-60 divide-y border bg-background text-foreground shadow-lg",children:Object.keys(a.movers_rates).slice(0,3).map((n,i)=>{const r=a.movers_rates[n].hourly_rate;return e.jsxs("div",{className:"flex justify-between py-1 font-medium",children:[e.jsxs("span",{children:[n," movers & truck"]}),e.jsx("span",{children:ee(r)})]},i)})})]})},t)),e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:"#000000",backgroundColor:"#dcdcdc"},children:["Blocked",e.jsx("span",{className:"size-1.5 rounded-full",style:{backgroundColor:"#000000"}})]})]})})}function Ft({className:s,...a}){return e.jsx(Ps,{"data-slot":"radio-group",className:d("grid gap-3",s),...a})}function $e({className:s,...a}){return e.jsx(Ms,{"data-slot":"radio-group-item",className:d("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Rs,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(Na,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Ut({isOpen:s,setIsOpen:a,calendarDayInfo:t}){const{data:n}=Ee(),[i]=Ma(),r=n==null?void 0:n.filter(o=>o.enable);if(!s&&!t)return null;const{id:l,rate:x,is_blocked:c}=t,p=(x==null?void 0:x.id)??0,f=Le(new Date(t.formated_date+"T00:00:00"),"PPP");async function u(o,m){const j={};m===0?(j.is_blocked=!0,j.rate_id=null):(j.rate_id=m,j.is_blocked=!1),await i({id:o,newData:j}).unwrap()}return e.jsx(Y,{open:s,onOpenChange:a,children:e.jsxs(J,{className:"sm:max-w-xs",children:[e.jsxs(K,{children:[e.jsx(X,{children:f}),e.jsx(je,{className:"hidden"})]}),e.jsxs(Ft,{defaultValue:c?"0":p.toString(),onValueChange:o=>{u(l,parseInt(o))},className:"gap-4",children:[r==null?void 0:r.map((o,m)=>e.jsxs(Ne,{htmlFor:o.id.toString(),className:"flex w-full cursor-pointer items-center gap-6 rounded-md p-3 transition-all hover:ring",style:{color:o.color,backgroundColor:`rgba(${be(o.color)}, 0.1)`},children:[e.jsx($e,{value:o.id.toString(),id:o.id.toString()}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:[o.name,e.jsx("span",{className:"size-2 rounded-full",style:{backgroundColor:o.color}})]})]},m)),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(Ne,{htmlFor:"0",className:"flex w-full cursor-pointer items-center gap-6 rounded-md bg-foreground/20 p-3 text-foreground transition-all hover:ring",children:[e.jsx($e,{value:"0",id:"0"}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:["Blocked",e.jsx("span",{className:"size-2 rounded-full bg-black"})]})]})})]})]})})}const At=()=>{const s=[],a=new Date;for(let t=0;t<=11;t++){const n=new Date(a.getFullYear(),a.getMonth()+t,1);s.push(n)}return s};function $t(){const s=At(),[a,t]=h.useState(!1),[n,i]=h.useState();function r(l,x){t(!0),i(x)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid justify-items-center gap-y-6 xl:grid-cols-2",children:s.map((l,x)=>e.jsx(Ze,{onSelectDate:r,mode:"single",today:l,disableNavigation:!0,showFooter:!1,className:"rounded-xl border",hideNavigation:!0},x))}),n&&e.jsx(Ut,{isOpen:a,setIsOpen:t,calendarDayInfo:n})]})}function On(){return e.jsx(F,{title:"Calendar Rates",children:e.jsx(P,{className:"max-w-2xl",children:e.jsx(M,{className:"py-4",children:e.jsx($t,{})})})})}function Ot({...s}){return e.jsx(Fs,{"data-slot":"select",...s})}function qt({...s}){return e.jsx($s,{"data-slot":"select-value",...s})}function Vt({className:s,children:a,...t}){return e.jsxs(Us,{"data-slot":"select-trigger",className:d("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t,children:[a,e.jsx(As,{asChild:!0,children:e.jsx(Ge,{className:"size-4 opacity-50"})})]})}function Bt({className:s,children:a,position:t="popper",...n}){return e.jsx(Os,{children:e.jsxs(qs,{"data-slot":"select-content",className:d("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[e.jsx(Gt,{}),e.jsx(Vs,{className:d("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(Qt,{})]})})}function Oe({className:s,children:a,...t}){return e.jsxs(Bs,{"data-slot":"select-item",className:d("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Gs,{children:e.jsx(Sa,{className:"size-4"})})}),e.jsx(Qs,{children:a})]})}function Gt({className:s,...a}){return e.jsx(Hs,{"data-slot":"select-scroll-up-button",className:d("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(ka,{className:"size-4"})})}function Qt({className:s,...a}){return e.jsx(Ws,{"data-slot":"select-scroll-down-button",className:d("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Ge,{className:"size-4"})})}function Ht({defaultValue:s,onValueChange:a,isPending:t,items:n,placeholder:i,disabled:r,className:l="",isControlled:x=!1}){const c=x?{value:s,onValueChange:a}:{defaultValue:s,onValueChange:a};return e.jsxs(Ot,{...c,children:[e.jsx(k,{children:e.jsx(Vt,{disabled:r,className:d(l),children:e.jsx(qt,{placeholder:i??"Select"})})}),e.jsx(Bt,{children:t?e.jsx(Oe,{disabled:!0,value:"loading",className:"h-14",children:e.jsx(pe,{})}):n==null?void 0:n.map(({label:p,value:f})=>e.jsx(Oe,{value:f,children:p},f))})]})}const Wt="US";function es({className:s,type:a,handleValueChange:t,...n}){const i=r=>{const l=r.target.value,x=new Ta(Wt).input(l);t(x)};return e.jsx("input",{...n,type:"tel",autoComplete:"off",inputMode:"numeric",title:"Please enter your phone number",maxLength:14,className:d("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),onChange:i})}const Yt=[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"Foreman",value:"foreman"},{label:"Driver",value:"driver"},{label:"Helper",value:"helper"}],Jt=v.object({first_name:v.string().min(2,{message:"First name must be at least 2 characters."}),last_name:v.string().min(2,{message:"Last name must be at least 2 characters."}),email_address:v.string().email({message:"Invalid email address."}),phone:v.string().refine(s=>Qe(s,"US"),{message:"Invalid phone number"}),active:v.boolean().optional(),role:v.string().optional(),password:v.string().optional()});function ss({user:s,callback:a}){const[t,{isLoading:n}]=at(),[i,{isLoading:r}]=tt(),l=V({mode:"onChange",reValidateMode:"onChange",resolver:ae(Jt),defaultValues:{first_name:(s==null?void 0:s.first_name)??"",last_name:(s==null?void 0:s.last_name)??"",email_address:(s==null?void 0:s.email_address)??"",phone:(s==null?void 0:s.phone)??"",role:(s==null?void 0:s.role)??"",active:(s==null?void 0:s.active)??!0,password:""}});async function x(c){if(s){const p=await t({id:(s==null?void 0:s.id)??0,data:c}).unwrap();p&&(I.success(`${p.first_name} updated successfully`),l.reset({...p,password:""}))}else{const p=await i({data:c}).unwrap();p&&(I.success(`${p.first_name} created successfully`),l.reset({...p,password:""}),a&&a())}}return e.jsx(B,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(x),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{control:l.control,name:"first_name",render:({field:c})=>e.jsxs(S,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(z,{className:"col-span-2",children:"First Name"}),e.jsx(k,{children:e.jsx(_,{...c,autoComplete:"off",className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(N,{control:l.control,name:"last_name",render:({field:c})=>e.jsxs(S,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(z,{className:"col-span-2",children:"Last Name"}),e.jsx(k,{children:e.jsx(_,{...c,autoComplete:"off",className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(N,{control:l.control,name:"email_address",render:({field:c})=>e.jsxs(S,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(z,{className:"col-span-2",children:"Email"}),e.jsx(k,{children:e.jsx(_,{...c,autoComplete:"off",className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(N,{control:l.control,name:"phone",render:({field:c})=>e.jsxs(S,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(z,{className:"col-span-2",children:"Phone"}),e.jsx(k,{children:e.jsx(es,{...c,value:_e(c.value??""),handleValueChange:c.onChange,className:"col-span-4"})}),e.jsx(E,{className:"col-span-2"})]})}),e.jsx(N,{control:l.control,name:"role",render:({field:c})=>e.jsxs(S,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(z,{className:"col-span-2",children:"Position"}),e.jsx(Ht,{defaultValue:c.value,onValueChange:c.onChange,placeholder:"Select a role",className:"col-span-4 w-full",items:Yt.map(({label:p,value:f})=>({label:p,value:f}))})]})}),e.jsx(N,{control:l.control,name:"password",render:({field:c})=>e.jsxs(S,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(z,{className:"col-span-2",children:"Password"}),e.jsx(k,{children:e.jsx(_,{...c,autoComplete:"off",type:"password",className:"col-span-4"})}),e.jsx(E,{})]})}),e.jsx(N,{control:l.control,name:"active",render:({field:c})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(z,{className:"text-base",children:"Employee is active"}),e.jsx(vt,{children:"If the employee is active, they will be able to login to the system."})]}),e.jsx(k,{children:e.jsx(Z,{checked:c.value,onCheckedChange:c.onChange})})]})})]}),e.jsx(R,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l.formState.isDirty,"visible opacity-100":l.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>l.reset(),children:"Cancel"}),e.jsx(L,{type:"submit",className:"w-full sm:w-auto",disabled:n||r,loading:n||r,children:"Save changes"})]})})]})})}function Kt(){const[s,a]=h.useState(!1);return e.jsxs(Y,{open:s,onOpenChange:a,children:[e.jsx(he,{asChild:!0,children:e.jsx(T,{className:"ml-auto",children:"Add User"})}),e.jsxs(J,{children:[e.jsx(K,{children:e.jsx(X,{children:"Add User"})}),e.jsx("div",{className:"pt-4",children:e.jsx(ss,{callback:()=>a(!1)})})]})]})}function Xt({className:s,...a}){return e.jsx(Ys,{"data-slot":"tabs",className:d("flex flex-col gap-2",s),...a})}function Zt({className:s,...a}){return e.jsx(Js,{"data-slot":"tabs-list",className:d("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...a})}function en({className:s,...a}){return e.jsx(Ks,{"data-slot":"tabs-trigger",className:d("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}const sn=["all","admin","manager","foreman","driver","helper"];function an({filter:s,handleSetFilter:a}){return e.jsx(Xt,{value:s,onValueChange:t=>{a(t)},children:e.jsxs(Ue,{className:"pb-2",children:[e.jsx(Zt,{children:sn.map(t=>e.jsx(en,{value:t,className:"capitalize",children:t},t))}),e.jsx(ye,{orientation:"horizontal"})]})})}const tn=Xs("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function nn({className:s,...a}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:d("w-full caption-bottom text-sm",s),...a})})}function rn({className:s,...a}){return e.jsx("thead",{"data-slot":"table-header",className:d("[&_tr]:border-b",s),...a})}function ln({className:s,...a}){return e.jsx("tbody",{"data-slot":"table-body",className:d("[&_tr:last-child]:border-0",s),...a})}function as({className:s,...a}){return e.jsx("tr",{"data-slot":"table-row",className:d("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function G({className:s,...a}){return e.jsx("th",{"data-slot":"table-head",className:d("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function Q({className:s,...a}){return e.jsx("td",{"data-slot":"table-cell",className:d("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function on(s,a){return`${s.charAt(0)}${a.charAt(0)}`.toUpperCase()}function cn({users:s}){return e.jsxs(nn,{className:"min-w-[750px]",children:[e.jsx(rn,{children:e.jsxs(as,{children:[e.jsx(G,{children:"Name"}),e.jsx(G,{children:"Role"}),e.jsx(G,{children:"Phone"}),e.jsx(G,{children:"Email"}),e.jsx(G,{children:"Status"}),e.jsx(G,{className:"text-right",children:"Actions"})]})}),e.jsx(ln,{children:s.map(a=>e.jsx(dn,{user:a},a.id))})]})}function dn({user:s}){return e.jsxs(as,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{children:e.jsx(pt,{children:on(s.first_name,s.last_name)})}),`${s.first_name} ${s.last_name}`]}),e.jsx(Q,{className:"capitalize",children:s.role}),e.jsx(Q,{children:s.phone?_e(s.phone):"-"}),e.jsx(Q,{children:s.email_address}),e.jsx(Q,{children:e.jsxs("span",{className:d(tn({variant:"outline"}),"relative overflow-hidden"),children:[e.jsx("span",{className:`${s.active?"bg-[#00a455]":"bg-foreground/50"} absolute inset-0 opacity-15`}),e.jsx("span",{className:`${s.active?"text-[#00a455]":"text-foreground"} capitalize`,children:s.active?"Active":"Inactive"})]})}),e.jsx(Q,{className:"text-right",children:e.jsx(T,{size:"icon",variant:"outline",asChild:!0,children:e.jsx(ke,{to:`${s.id}`,children:e.jsx(ge,{})})})})]})}function qn(){const s=Ce(),{data:a,isLoading:t}=et(),[n,i]=h.useState("all"),r=a==null?void 0:a.filter(x=>n==="all"?x:x.role===n);function l(x){i(x)}return s.id?e.jsx(Se,{}):e.jsx(F,{title:"Department",children:e.jsxs(P,{children:[e.jsx(q,{children:e.jsx(Kt,{})}),e.jsxs(M,{className:"space-y-2",children:[e.jsx(an,{filter:n,handleSetFilter:l}),t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(pe,{})}),r&&e.jsx(cn,{users:r??[]})]})]})})}function Vn(){const{id:s}=Ce(),{data:a,isLoading:t}=st({id:s});return e.jsxs(Fe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx(T,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(ke,{to:"/crm/settings/department",children:e.jsx(Ie,{})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a&&`${a==null?void 0:a.first_name} ${a==null?void 0:a.last_name}`})]}),e.jsxs("div",{className:"flex h-5 px-4 space-x-2 text-muted-foreground text-sm",children:[e.jsxs("span",{children:["Employee ID: ",(a==null?void 0:a.id)??""]}),e.jsx(R,{orientation:"vertical"}),e.jsxs("span",{children:["Creation Date:"," ",a!=null&&a.created_at?Le(a==null?void 0:a.created_at,"dd MMM, yyyy"):""]})]})]}),e.jsx("div",{className:"overflow-y-auto p-4",children:e.jsx(P,{className:"max-w-2xl",children:e.jsxs(M,{children:[t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(pe,{})}),a&&e.jsx(ss,{user:a})]})})})]})}const un=v.object({company_name:v.string(),company_address:v.string(),company_phone:v.string().refine(s=>Qe(s,"US"),{message:"Invalid phone number"}),company_email:v.string().email(),company_website:v.string()});function mn({data:s}){const[a,{isLoading:t}]=da(),n=V({resolver:ae(un),defaultValues:{company_name:s.company_name??"",company_address:s.company_address??"",company_phone:s.company_phone??"",company_email:s.company_email??"",company_website:s.company_website??""}});async function i(r){const l=await a({data:r}).unwrap();l&&(I.success("Changes saved"),n.reset({...l}))}return e.jsx(B,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-6",children:[e.jsx(N,{control:n.control,name:"company_name",render:({field:r})=>e.jsxs(S,{children:[e.jsx(z,{children:"Company name"}),e.jsx(k,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(N,{control:n.control,name:"company_address",render:({field:r})=>e.jsxs(S,{children:[e.jsx(z,{children:"Company address"}),e.jsx(k,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(N,{control:n.control,name:"company_phone",render:({field:r})=>e.jsxs(S,{children:[e.jsx(z,{children:"Company phone"}),e.jsx(k,{children:e.jsx(es,{...r,value:_e(r.value??""),handleValueChange:r.onChange})}),e.jsx(E,{})]})}),e.jsx(N,{control:n.control,name:"company_email",render:({field:r})=>e.jsxs(S,{children:[e.jsx(z,{children:"Company email"}),e.jsx(k,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(N,{control:n.control,name:"company_website",render:({field:r})=>e.jsxs(S,{children:[e.jsx(z,{children:"Company website"}),e.jsx(k,{children:e.jsx(_,{...r,autoComplete:"off"})}),e.jsx(E,{})]})}),e.jsx(R,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!n.formState.isDirty,"visible opacity-100":n.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>n.reset(),children:"Cancel"}),e.jsx(L,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})]})})}function xn(){const{data:s}=Te(),[a,{isLoading:t}]=ua(),[n,i]=h.useState(null),[r,l]=h.useState(null),[x,c]=h.useState(!1),p=s==null?void 0:s.company_logo;async function f(g){g.preventDefault();const y=new FormData;n&&y.append("setting[company_logo]",n),await a({data:y}).unwrap()&&I.success("Changes saved")}const u=g=>{var C;const y=(C=g.target.files)==null?void 0:C[0];if(y){i(y);const w=URL.createObjectURL(y);l(w)}},o=g=>{g.preventDefault(),c(!0)},m=g=>{g.preventDefault(),c(!1)},j=g=>{var C;g.preventDefault(),c(!1);const y=(C=g.dataTransfer.files)==null?void 0:C[0];if(y&&y.type.startsWith("image/")){i(y);const w=URL.createObjectURL(y);l(w)}},b=()=>{i(null),l(null),c(!1);const g=document.getElementById("logo-upload");g&&(g.value="")};return h.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:d("relative flex h-28 w-40 cursor-pointer flex-col items-center justify-center rounded-lg transition-colors","border-2 border-dashed border-gray-300 dark:border-gray-700","hover:bg-gray-50 dark:hover:bg-gray-800/50",x&&"border-primary bg-gray-50 dark:bg-gray-800/50",(r||p)&&"h-28 w-40"),onDragOver:o,onDragLeave:m,onDrop:j,onClick:()=>{var g;return(g=document.getElementById("logo-upload"))==null?void 0:g.click()},children:r||p?e.jsx("img",{src:r||p,alt:"Company logo",className:"h-full w-full rounded-lg object-contain"}):e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 text-center",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-4 dark:bg-gray-800",children:e.jsx(Ca,{className:"h-6 w-6 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-primary",children:"Click to upload"})," ","or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SVG, PNG, JPG or GIF (max. 2MB)"})]})}),e.jsx(_,{id:"logo-upload",type:"file",accept:"image/*",onChange:u,className:"hidden"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!r,"visible opacity-100":r}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:b,children:"Cancel"}),e.jsx(L,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})})]})}function Bn(){const{data:s,isLoading:a}=Te();return e.jsx(F,{title:"Company",children:a?e.jsx("div",{className:"flex h-96 max-w-xl items-center justify-center",children:e.jsx(pe,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(P,{className:"max-w-xl",children:[e.jsx(q,{children:e.jsx(se,{children:"Company Information"})}),e.jsx(M,{children:e.jsx(mn,{data:s})})]}),e.jsxs(P,{className:"max-w-xl",children:[e.jsx(q,{children:e.jsx(se,{children:"Branding"})}),e.jsx(M,{children:e.jsx(xn,{})})]})]})})}function pn({value:s,onChange:a}){const{data:t}=Te();if(!t)return null;const n=t==null?void 0:t.floor_options,i=(r,l,x)=>{const c=s.map((p,f)=>p.map((u,o)=>f===r&&o===l?x:u));a(c)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col rounded-md overflow-hidden border",children:[e.jsx("div",{className:"bg-slate-900 text-white text-center p-1.5 font-semibold text-sm",children:"TO STAIRS"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-slate-900 text-white p-4 flex flex-col items-center justify-center w-8",children:e.jsx("div",{className:"transform -rotate-90 whitespace-nowrap font-semibold text-sm",children:"FROM STAIRS"})}),e.jsxs("div",{className:"bg-background p-4 flex-1",children:[e.jsxs("div",{className:"grid grid-cols-8 mb-4",children:[e.jsx("div",{}),n.map((r,l)=>e.jsx("div",{className:"flex items-center justify-center text-muted-foreground font-medium text-sm",children:r.name.slice(0,3)},`col-${l}`))]}),e.jsx("div",{className:"grid gap-2",children:n.map((r,l)=>e.jsxs("div",{className:"grid grid-cols-8 gap-2 items-center",children:[e.jsx("div",{className:"text-muted-foreground text-sm font-medium text-center",children:r.name.slice(0,3)}),n.map((x,c)=>e.jsx(_,{name:`cell-${l}-${c}`,type:"number",className:"w-full p-0 text-center",inputMode:"numeric",value:s[l][c],onChange:p=>i(l,c,Number(p.target.value))},`cell-${l}-${c}`))]},`row-${l}`))})]})]})]}),e.jsxs("div",{className:" md:pl-6",children:[e.jsxs("p",{className:"",children:["Example: From 2st floor To 4th floor-",s[1][3],"movers"]}),e.jsxs("p",{className:"",children:["Example: From house To elevator-",s[5][6],"movers"]})]})]})}function fn({...s}){return e.jsx(Zs,{"data-slot":"alert-dialog",...s})}function gn({...s}){return e.jsx(ea,{"data-slot":"alert-dialog-trigger",...s})}function hn({...s}){return e.jsx(ra,{"data-slot":"alert-dialog-portal",...s})}function jn({className:s,...a}){return e.jsx(ia,{"data-slot":"alert-dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function vn({className:s,...a}){return e.jsxs(hn,{children:[e.jsx(jn,{}),e.jsx(sa,{"data-slot":"alert-dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a})]})}function yn({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",s),...a})}function bn({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:d("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function wn({className:s,...a}){return e.jsx(aa,{"data-slot":"alert-dialog-title",className:d("text-lg font-semibold",s),...a})}function Nn({className:s,...a}){return e.jsx(ta,{"data-slot":"alert-dialog-description",className:d("text-muted-foreground text-sm",s),...a})}function Sn({className:s,...a}){return e.jsx(na,{className:d(O({variant:"outline"}),s),...a})}const qe=[[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,3,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2]];v.object({name:v.string(),description:v.string(),dispersion:v.number(),truck_count:v.number(),volume:v.number(),weight:v.number(),crew_size_settings:v.array(v.array(v.number())),image:v.instanceof(File)});function kn(s){const a=s.target.files&&s.target.files[0],t=a?URL.createObjectURL(a):"";return{file:a,displayUrl:t}}function ts({data:s}){const[a,{isLoading:t}]=it(),[n,{isLoading:i}]=lt(),[r,{isLoading:l}]=ct(),[x,c]=h.useState(!1),p=Pe(),f=!!s,[u,o]=h.useState(null),m=V({defaultValues:{name:"",description:"",dispersion:0,truck_count:0,volume:0,weight:0,crew_size_settings:qe,image:void 0}});h.useEffect(()=>{s&&(m.reset({name:s.name,description:s.description,dispersion:s.dispersion,truck_count:s.truck_count,volume:s.volume,weight:s.weight,crew_size_settings:s.crew_size_settings.length>0?s.crew_size_settings:qe}),o(s.image_url))},[s]);function j(){m.reset(),c(g=>!g)}async function b(g){f?(await n({id:s.id,...g}).unwrap(),I.success("Changes successfully saved")):(await a(g).unwrap(),I.success("Move size successfully added")),m.reset(),j()}return e.jsxs(Y,{open:x,onOpenChange:j,children:[e.jsx(he,{asChild:!0,className:`${f?null:"ml-auto"}`,children:f?e.jsxs(T,{variant:"outline",className:"text-primary hover:text-primary",size:p?"icon":"default",children:[e.jsx(ge,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(T,{children:"Add move size"})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsxs(X,{children:[f?"Edit":"Add"," move size"]}),e.jsx(je,{className:"hidden"})]}),e.jsx(B,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(b),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-250px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(N,{control:m.control,name:"image",render:({field:{value:g,onChange:y,...C}})=>e.jsxs(S,{children:[e.jsx(z,{children:"Image"}),e.jsx(k,{children:e.jsx(_,{...C,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:w=>{const{file:H,displayUrl:ns}=kn(w);o(ns),y(H)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:u&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:u,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})}),e.jsx(N,{control:m.control,name:"name",render:({field:g})=>e.jsxs(S,{children:[e.jsx(z,{children:"Name"}),e.jsx(k,{children:e.jsx(_,{...g,autoComplete:"off"})})]})}),e.jsx(N,{control:m.control,name:"description",render:({field:g})=>e.jsxs(S,{children:[e.jsx(z,{children:"Description"}),e.jsx(k,{children:e.jsx(Ke,{...g,rows:16,autoComplete:"off"})})]})}),e.jsx(N,{control:m.control,name:"dispersion",render:({field:g})=>e.jsxs(S,{children:[e.jsx(z,{children:"Dispersion %"}),e.jsx(k,{children:e.jsx(_,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...g})})]})}),e.jsx(N,{control:m.control,name:"truck_count",render:({field:g})=>e.jsxs(S,{children:[e.jsx(z,{children:"Trucks count for this size"}),e.jsx(k,{children:e.jsx(_,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...g})})]})}),e.jsx(N,{control:m.control,name:"volume",render:({field:g})=>e.jsxs(S,{children:[e.jsx(z,{children:"Volume"}),e.jsx(k,{children:e.jsx(_,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...g})})]})}),e.jsx(N,{control:m.control,name:"weight",render:({field:g})=>e.jsxs(S,{children:[e.jsx(z,{children:"Weight"}),e.jsx(k,{children:e.jsx(_,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...g})})]})}),e.jsx(N,{control:m.control,name:"crew_size_settings",render:({field:g})=>e.jsxs(S,{children:[e.jsx("p",{className:"text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",children:"Crew size settings"}),e.jsx(k,{children:e.jsx(pn,{value:g.value,onChange:g.onChange})})]})})]}),e.jsxs(Re,{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{children:f&&e.jsxs(fn,{children:[e.jsx(gn,{asChild:!0,children:e.jsx(T,{variant:"outline",className:"mt-2 sm:mt-0 w-full",children:"Delete"})}),e.jsxs(vn,{children:[e.jsxs(yn,{children:[e.jsx(wn,{children:"Are you absolutely sure?"}),e.jsx(Nn,{children:"Are you sure you want to delete this move size?"})]}),e.jsxs(bn,{children:[e.jsx(Sn,{children:"No, cancel"}),e.jsx(L,{type:"button",loading:l,disabled:l,className:"mt-2 sm:mt-0",onClick:async()=>{await r({id:s==null?void 0:s.id}).unwrap(),I.success("Move size successfully deleted"),j()},children:"Yes, delete"})]})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Me,{children:"Cancel"}),e.jsx(L,{type:"submit",loading:t||i,disabled:t||i,children:f?"Save changes":"Add move size"})]})]})]})})]})]})}function Cn({item:s}){const{attributes:a,listeners:t,setNodeRef:n,transform:i,transition:r,isDragging:l}=te({id:s.id}),x={transform:ne.Transform.toString(i),transition:r,zIndex:l?1e3:"auto",position:l?"relative":"static",touchAction:"none"};return e.jsxs("div",{className:"flex items-center gap-2",ref:n,style:x,children:[e.jsx(fe,{className:"size-5 min-w-5 cursor-grab text-muted-foreground",...a,...t}),e.jsx("div",{className:"@container w-full",children:e.jsxs("div",{className:d("grid w-full grid-cols-[max-content_1fr_max-content] @lg:grid-cols-9 border rounded-md items-center gap-4 p-4",{"bg-background shadow-lg":l}),children:[e.jsx("div",{children:e.jsx("img",{src:s.image_url??"https://www.thehighlands.org/sites/default/files/styles/hero/public/one-bedroom-3d.png?itok=1Y5yuPSu",alt:s.name,className:"size-10 object-cover"})}),e.jsxs("div",{className:"overflow-hidden @lg:col-span-4",children:[e.jsx("p",{className:"truncate font-semibold",children:s.name}),e.jsx("p",{className:"truncate text-sm",children:s.description})]}),e.jsxs("div",{className:"hidden @lg:flex @lg:col-span-2 gap-4",children:[e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(ze,{className:"size-4"}),e.jsx("p",{className:"truncate text-sm font-medium",children:s.truck_count??1})]}),e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(_a,{className:"size-4"}),e.jsxs("p",{className:"truncate text-sm font-medium",children:[s.volume||100," cbf"]})]})]}),e.jsx("div",{className:"flex justify-end @lg:col-span-2",children:e.jsx(ts,{data:s})})]})})]})}function _n(){const{data:s,isLoading:a,isError:t}=rt(),[n,{isLoading:i}]=ot(),[r,l]=h.useState([]),[x,c]=h.useState(!1),p=re(U(xe),U(me,{coordinateGetter:ue}));h.useEffect(()=>{s&&l(s)},[s]);function f(u){const{active:o,over:m}=u;if(m&&o.id!==m.id){const j=r.findIndex(C=>C.id===o.id),b=r.findIndex(C=>C.id===m.id),y=de(r,j,b).map((C,w)=>({...C,index:w}));l(y),c(!0)}}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch move sizes"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:8}).map((u,o)=>e.jsx(D,{className:"h-19.5 w-full"},o))}),s&&e.jsx(ie,{sensors:p,collisionDetection:oe,onDragEnd:f,modifiers:[le],children:e.jsx(ce,{items:r,children:e.jsx("div",{className:"space-y-2",children:r.map(u=>e.jsx(Cn,{item:u},u.id))})})}),e.jsx(R,{}),e.jsx("div",{className:d("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!x,"visible opacity-100":x}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(T,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),c(!1)},children:"Cancel"}),e.jsx(L,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{const u=r.map(({id:o,index:m})=>({id:o,index:m}));await n({moveSizes:u}).unwrap(),I.success("Changes saved"),c(!1)},children:"Save changes"})]})})]})}function Gn(){return Ce().id?e.jsx(Se,{}):e.jsx(F,{title:"Calculator",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(P,{className:"max-w-3xl",children:[e.jsxs(q,{className:"flex flex-row justify-between",children:[e.jsx(se,{children:"Move Size"}),e.jsx(ts,{})]}),e.jsx(M,{children:e.jsx(_n,{})})]}),e.jsxs(P,{className:"max-w-3xl",children:[e.jsxs(q,{className:"flex flex-row justify-between",children:[e.jsx(se,{children:"Stairs"}),e.jsx(T,{children:"Add Stairs"})]}),e.jsx(M,{className:"space-y-2",children:"asdasd"})]})]})})}export{xt as A,On as C,Y as D,Fn as E,Rn as M,Un as P,$n as R,R as S,We as T,Vn as U,Wa as a,dt as b,He as c,ut as d,Za as e,mt as f,pt as g,Ia as h,K as i,X as j,je as k,J as l,nt as m,An as n,qn as o,qa as p,Bn as q,Ra as r,za as s,Ua as t,Pe as u,Gn as v,Mn as w};
