import{j as e,e as ls,r as g,f as os,g as cs,h as ds,i as us,k as ms,A as xs,l as ps,F as fs,m as hs,n as gs,o as js,p as Ve,q as vs,D as ys,s as bs,O as ws,u as Ns,v as Ss,S as Cs,w as _s,x as ks,z as j,y as F,t as T,B as he,E as Ts,H as Is,J as Z,K as ee,L as se,M as $,N as ae,Q as te,U as ne,V as re,W as ie,X as le,Y as oe,Z as ce,_ as zs,$ as Es,a0 as Ds,a1 as Ls,a2 as Ms,a3 as Ps,a4 as As,a5 as $s,a6 as Fs,a7 as Rs,a8 as Us,a9 as Os,aa as qs,ab as Vs,ac as Bs,ad as Qs,ae as Gs,af as Hs,ag as Ws,ah as Ys,ai as Ks,aj as Js,ak as Xs,al as Zs,b as ea,am as sa,an as aa,ao as ta,ap as na,aq as ra,ar as ia,as as la,at as oa}from"./vendor-Oy3yQvpb.js";import{b as ca,N as da,O as Te,L as Ie,c as ze}from"./vendor-router-BOglXYhN.js";import{b as R,c as m,a as B,B as k,L as ke,I as C,d as z,C as M,e as P,f as Q,g as ua,S as ge,h as Ee,u as ma,i as Be,j as xa,k as fe}from"./page-auth-p4-fr_Oe.js";import{X as pa,a as fa,P as ha,H as ga,b as ja,T as De,D as va,C as ya,U as ba,c as wa,d as Le,G as de,e as je,f as Qe,g as ve,h as Na,I as Sa,i as Ca,j as Ge,k as _a,l as ka,m as Ta}from"./vendor-ui-Dq0BlLGN.js";import{a as U}from"./vendor-redux-BIS1gR2s.js";import{f as Me}from"./vendor-date-fns-BWtotJsy.js";import{A as Ia,i as He}from"./vendor-libphonenumber-js-1k7QeoIm.js";const za=U({reducerPath:"servicesApi",baseQuery:R,tagTypes:["Service"],endpoints:s=>({getServices:s.query({query:()=>"/services",providesTags(a){return a?[...a.map(({id:t})=>({type:"Service",id:t})),{type:"Service",id:"LIST"}]:[{type:"Service",id:"LIST"}]}}),createService:s.mutation({query:a=>({url:"/services",method:"POST",body:{service:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),bulkUpdateServices:s.mutation({query:a=>({url:"/services/bulk_update",method:"POST",body:{services:a.services}}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]}),deleteService:s.mutation({query:({id:a})=>({url:`/services/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Service",id:"LIST"}]})})}),{useGetServicesQuery:Ea,useCreateServiceMutation:Da,useBulkUpdateServicesMutation:La,useDeleteServiceMutation:Ma}=za,We=U({reducerPath:"calendarRatesApi",baseQuery:R,tagTypes:["CalendarRate"],endpoints:s=>({getCalendarRates:s.query({query:()=>"/calendar_rates",providesTags:a=>a?[...Object.values(a).map(t=>({type:"CalendarRate",id:t.id})),{type:"CalendarRate",id:"LIST"}]:[{type:"CalendarRate",id:"LIST"}]}),updateCalendarRate:s.mutation({query:({id:a,newData:t})=>({url:`/calendar_rates/${a}`,method:"PUT",body:{calendar_rate:t}}),invalidatesTags:(a,t,{id:r})=>t?[]:[{type:"CalendarRate",id:r}]})})}),{useGetCalendarRatesQuery:Pa,useUpdateCalendarRateMutation:Aa}=We,$a=U({reducerPath:"ratesApi",baseQuery:R,tagTypes:["Rate","CalendarRate"],endpoints:s=>({getRates:s.query({query:()=>"/rates",providesTags(a){return a?[...a.map(({id:t})=>({type:"Rate",id:t})),{type:"Rate",id:"LIST"}]:[{type:"Rate",id:"LIST"}]}}),bulkUpdateRates:s.mutation({query:a=>({url:"/rates/bulk_update",method:"POST",body:{rates:a.rates}}),invalidatesTags:(a,t)=>t?[]:[{type:"Rate",id:"LIST"}],async onQueryStarted(a,{dispatch:t,queryFulfilled:r}){try{await r,t(We.util.invalidateTags([{type:"CalendarRate",id:"LIST"}]))}catch(i){console.log("error",i)}}})})}),{useGetRatesQuery:Pe,useBulkUpdateRatesMutation:Fa}=$a,Ra=U({reducerPath:"trucksApi",baseQuery:R,tagTypes:["Truck"],endpoints:s=>({getTrucks:s.query({query:()=>"/trucks",providesTags(a){return a?[...a.map(({id:t})=>({type:"Truck",id:t})),{type:"Truck",id:"LIST"}]:[{type:"Truck",id:"LIST"}]}}),createTruck:s.mutation({query:a=>({url:"/trucks",method:"POST",body:{truck:a}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),bulkUpdateTrucks:s.mutation({query:a=>({url:"/trucks/bulk_update",method:"POST",body:{trucks:a.trucks}}),invalidatesTags:[{type:"Truck",id:"LIST"}]}),deleteTruck:s.mutation({query:({id:a})=>({url:`/trucks/${a}`,method:"DELETE"}),invalidatesTags:[{type:"Truck",id:"LIST"}]})})}),{useGetTrucksQuery:Ua,useCreateTruckMutation:Oa,useBulkUpdateTrucksMutation:qa}=Ra,Va=U({reducerPath:"packingsApi",baseQuery:R,tagTypes:["Packing"],endpoints:s=>({getPackings:s.query({query:()=>"/packings",providesTags(a){return a?[...a.map(({id:t})=>({type:"Packing",id:t})),{type:"Packing",id:"LIST"}]:[{type:"Packing",id:"LIST"}]}}),updatePacking:s.mutation({query:({id:a,...t})=>({url:`/packings/${a}`,method:"PATCH",body:{packing:t}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),createPacking:s.mutation({query:a=>({url:"/packings",method:"POST",body:{packing:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),bulkUpdatePackings:s.mutation({query:a=>({url:"/packings/bulk_update",method:"POST",body:{packings:a.packings}}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]}),deletePacking:s.mutation({query:({id:a})=>({url:`/packings/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"Packing",id:"LIST"}]})})}),{useGetPackingsQuery:Ba,useCreatePackingMutation:Qa,useUpdatePackingMutation:Ga,useBulkUpdatePackingsMutation:Ha,useDeletePackingMutation:Wa}=Va,Ya=U({reducerPath:"extraServicesApi",baseQuery:R,tagTypes:["ExtraService"],endpoints:s=>({getExtraServices:s.query({query:()=>"/extra_services",providesTags(a){return a?[...a.map(({id:t})=>({type:"ExtraService",id:t})),{type:"ExtraService",id:"LIST"}]:[{type:"ExtraService",id:"LIST"}]}}),createExtraService:s.mutation({query:a=>({url:"/extra_services",method:"POST",body:{extra_service:a}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),bulkUpdateExtraServices:s.mutation({query:a=>({url:"/extra_services/bulk_update",method:"POST",body:{extra_services:a.extra_services}}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]}),deleteExtraService:s.mutation({query:({id:a})=>({url:`/extra_services/${a}`,method:"DELETE"}),invalidatesTags:[{type:"ExtraService",id:"LIST"}]})})}),{useGetExtraServicesQuery:Ka,useCreateExtraServiceMutation:Ja,useBulkUpdateExtraServicesMutation:Xa,useDeleteExtraServiceMutation:Za}=Ya,et=U({reducerPath:"employeesApi",baseQuery:R,tagTypes:["Employee"],endpoints:s=>({getEmployees:s.query({query:()=>"/employees",providesTags(a){return a?[...a.map(({id:t})=>({type:"Employee",id:t})),{type:"Employee",id:"LIST"}]:[{type:"Employee",id:"LIST"}]}}),getEmployeeById:s.query({query:({id:a})=>`/employees/${a}`,providesTags:(a,t,{id:r})=>a?[{type:"Employee",id:r}]:[{type:"Employee",id:"LIST"}]}),updateEmployee:s.mutation({query:({id:a,data:t})=>({url:`/employees/${a}`,method:"PUT",body:{employee:t}}),invalidatesTags:(a,t,{id:r})=>t?[]:[{type:"Employee",id:r},{type:"Employee",id:"LIST"}]}),createEmployee:s.mutation({query:({data:a})=>({url:"/employees",method:"POST",body:{employee:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"Employee",id:"LIST"}]})})}),{useGetEmployeesQuery:st,useGetEmployeeByIdQuery:at,useUpdateEmployeeMutation:tt,useCreateEmployeeMutation:nt}=et,rt=U({reducerPath:"moveSizesApi",baseQuery:R,tagTypes:["MoveSize"],endpoints:s=>({getMoveSizes:s.query({query:()=>"/move_sizes",providesTags(a){return a?[...a.map(({id:t})=>({type:"MoveSize",id:t})),{type:"MoveSize",id:"LIST"}]:[{type:"MoveSize",id:"LIST"}]}}),createMoveSize:s.mutation({query:a=>{var r,i,n,l;console.log("moveSize",a);const t=new FormData;return t.append("move_size[name]",a.name??""),t.append("move_size[description]",a.description??""),t.append("move_size[dispersion]",((r=a.dispersion)==null?void 0:r.toString())??""),t.append("move_size[truck_count]",((i=a.truck_count)==null?void 0:i.toString())??""),t.append("move_size[volume]",((n=a.volume)==null?void 0:n.toString())??""),t.append("move_size[weight]",((l=a.weight)==null?void 0:l.toString())??""),t.append("move_size[crew_size_settings]",JSON.stringify(a.crew_size_settings)),a.image&&t.append("move_size[image]",a.image),{url:"/move_sizes",method:"POST",body:t}},invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),updateMoveSize:s.mutation({query:({id:a,...t})=>{var i,n,l,c;console.log("moveSize",t);const r=new FormData;return r.append("move_size[name]",t.name??""),r.append("move_size[description]",t.description??""),r.append("move_size[dispersion]",((i=t.dispersion)==null?void 0:i.toString())??""),r.append("move_size[truck_count]",((n=t.truck_count)==null?void 0:n.toString())??""),r.append("move_size[volume]",((l=t.volume)==null?void 0:l.toString())??""),r.append("move_size[weight]",((c=t.weight)==null?void 0:c.toString())??""),r.append("move_size[crew_size_settings]",JSON.stringify(t.crew_size_settings)),t.image&&r.append("move_size[image]",t.image),{url:`/move_sizes/${a}`,method:"PATCH",body:r}},invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),bulkUpdateMoveSizes:s.mutation({query:a=>({url:"/move_sizes/bulk_update",method:"POST",body:{move_sizes:a.moveSizes}}),invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]}),deleteMoveSize:s.mutation({query:({id:a})=>({url:`/move_sizes/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"MoveSize",id:"LIST"}]})})}),{useGetMoveSizesQuery:it,useCreateMoveSizeMutation:lt,useUpdateMoveSizeMutation:ot,useBulkUpdateMoveSizesMutation:ct,useDeleteMoveSizeMutation:dt}=rt,ut=U({reducerPath:"entranceTypesApi",baseQuery:R,tagTypes:["EntranceType"],endpoints:s=>({getEntranceTypes:s.query({query:()=>"/entrance_types",providesTags(a){return a?[...a.map(({id:t})=>({type:"EntranceType",id:t})),{type:"EntranceType",id:"LIST"}]:[{type:"EntranceType",id:"LIST"}]}}),createEntranceType:s.mutation({query:a=>({url:"/entrance_types",method:"POST",body:{entrance_type:a}}),invalidatesTags:(a,t)=>t?[]:[{type:"EntranceType",id:"LIST"}]}),bulkUpdateEntranceTypes:s.mutation({query:a=>({url:"/entrance_types/bulk_update",method:"POST",body:{entrance_types:a.entranceTypes}}),invalidatesTags:(a,t)=>t?[]:[{type:"EntranceType",id:"LIST"}]}),deleteEntranceType:s.mutation({query:({id:a})=>({url:`/entrance_types/${a}`,method:"DELETE"}),invalidatesTags:(a,t)=>t?[]:[{type:"EntranceType",id:"LIST"}]})})}),{useGetEntranceTypesQuery:Ae,useCreateEntranceTypeMutation:mt,useBulkUpdateEntranceTypesMutation:xt,useDeleteEntranceTypeMutation:pt}=ut;function A({className:s,orientation:a="horizontal",decorative:t=!0,...r}){return e.jsx(ls,{"data-slot":"separator-root",decorative:t,orientation:a,className:m("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...r})}const _e=768;function ye(){const[s,a]=g.useState(void 0);return g.useEffect(()=>{const t=window.matchMedia(`(max-width: ${_e-1}px)`),r=()=>{a(window.innerWidth<_e)};return t.addEventListener("change",r),a(window.innerWidth<_e),()=>t.removeEventListener("change",r)},[]),!!s}function E({className:s,...a}){return e.jsx("div",{"data-slot":"skeleton",className:m("bg-primary/10 animate-pulse rounded-md",s),...a})}function Ye({delayDuration:s=0,...a}){return e.jsx(os,{"data-slot":"tooltip-provider",delayDuration:s,...a})}function ft({...s}){return e.jsx(Ye,{children:e.jsx(cs,{"data-slot":"tooltip",...s})})}function ht({...s}){return e.jsx(ds,{"data-slot":"tooltip-trigger",...s})}function gt({className:s,sideOffset:a=4,children:t,...r}){return e.jsx(us,{children:e.jsxs(ms,{"data-slot":"tooltip-content",sideOffset:a,className:m("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",s),...r,children:[t,e.jsx(xs,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function jt({className:s,...a}){return e.jsx(ps,{"data-slot":"avatar",className:m("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...a})}function vt({className:s,...a}){return e.jsx(fs,{"data-slot":"avatar-fallback",className:m("bg-muted flex size-full items-center justify-center rounded-full",s),...a})}function W({...s}){return e.jsx(hs,{"data-slot":"dialog",...s})}function ue({...s}){return e.jsx(gs,{"data-slot":"dialog-trigger",...s})}function yt({...s}){return e.jsx(bs,{"data-slot":"dialog-portal",...s})}function be({...s}){return e.jsx(Ve,{"data-slot":"dialog-close",className:m(B({variant:"outline"}),"mt-2 sm:mt-0"),...s})}function bt({className:s,...a}){return e.jsx(ws,{"data-slot":"dialog-overlay",className:m("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function Y({className:s,children:a,...t}){return e.jsxs(yt,{"data-slot":"dialog-portal",children:[e.jsx(bt,{}),e.jsxs(js,{"data-slot":"dialog-content",className:m("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...t,children:[a,e.jsxs(Ve,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(pa,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function K({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:m("flex flex-col gap-2 text-center sm:text-left",s),...a})}function we({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-footer",className:m("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function J({className:s,...a}){return e.jsx(vs,{"data-slot":"dialog-title",className:m("text-lg leading-none font-semibold",s),...a})}function me({className:s,...a}){return e.jsx(ys,{"data-slot":"dialog-description",className:m("text-muted-foreground text-sm",s),...a})}function $e({children:s,className:a}){return e.jsx("div",{className:m("overflow-y-auto pb-6",a),children:s})}const wt=[{name:"Company",href:"company",icon:fa},{name:"Moving Services",href:"services",icon:ha},{name:"Extra Services",href:"extra-services",icon:ga},{name:"Packing",href:"packing",icon:ja},{name:"Trucks",href:"trucks",icon:De,prefetchUrl:"/trucks"},{name:"Rates",href:"rates",icon:va},{name:"Calendar Rates",href:"calendar-rates",icon:ya},{name:"Department",href:"department",icon:ba},{name:"Calculator",href:"calculator",icon:wa}];function Nt(){const{pathname:s}=ca();return e.jsxs($e,{className:m("hidden lg:block lg:border-r",{block:s==="/crm/settings"}),children:[e.jsx("h2",{className:"px-6 pt-4 text-lg font-semibold",children:"Settings"}),e.jsx("div",{className:"space-y-2 p-4",children:wt.map((a,t)=>e.jsxs(da,{to:a.href,className:({isActive:r})=>m(B({variant:r?"secondary":"ghost",className:"w-full justify-start text-left"})),children:[e.jsx(a.icon,{className:"size-4"}),a.name]},t))})]})}function Qn(){return e.jsxs("div",{className:"grid h-full lg:grid-cols-[20rem_1fr]",children:[e.jsx(Nt,{}),e.jsx(Te,{})]})}function O({children:s,title:a,className:t}){return e.jsxs($e,{className:"space-y-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(k,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(Ie,{to:"/crm/settings",children:e.jsx(Le,{})})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a})]}),e.jsx("div",{className:m("overflow-y-auto p-4",t),children:s})]})}const q=Ns,Ke=g.createContext({}),w=({...s})=>e.jsx(Ke.Provider,{value:{name:s.name},children:e.jsx(Ss,{...s})}),Ne=()=>{const s=g.useContext(Ke),a=g.useContext(Je),{getFieldState:t}=_s(),r=ks({name:s.name}),i=t(s.name,r);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:n}=a;return{id:n,name:s.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...i}},Je=g.createContext({});function N({className:s,...a}){const t=g.useId();return e.jsx(Je.Provider,{value:{id:t},children:e.jsx("div",{"data-slot":"form-item",className:m("grid gap-2",s),...a})})}function _({className:s,...a}){const{error:t,formItemId:r}=Ne();return e.jsx(ke,{"data-slot":"form-label","data-error":!!t,className:m("data-[error=true]:text-destructive-foreground",s),htmlFor:r,...a})}function S({...s}){const{error:a,formItemId:t,formDescriptionId:r,formMessageId:i}=Ne();return e.jsx(Cs,{"data-slot":"form-control",id:t,"aria-describedby":a?`${r} ${i}`:`${r}`,"aria-invalid":!!a,...s})}function St({className:s,...a}){const{formDescriptionId:t}=Ne();return e.jsx("p",{"data-slot":"form-description",id:t,className:m("text-muted-foreground text-sm",s),...a})}function L({className:s,...a}){const{error:t,formMessageId:r}=Ne(),i=t?String(t==null?void 0:t.message):a.children;return i?e.jsx("p",{"data-slot":"form-message",id:r,className:m("text-destructive-foreground text-sm",s),...a,children:i}):null}const Ct=j.object({name:j.string().min(5,{message:"Service name must be at least 5 characters"})});function _t(){const[s,{isLoading:a}]=Da(),t=F({resolver:he(Ct),reValidateMode:"onChange",defaultValues:{name:""}});async function r(i){await s(i).unwrap(),T.success(`${i.name} successfully added`),t.reset()}return e.jsx("div",{children:e.jsx(q,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(r),className:"flex gap-4",children:[e.jsx(w,{control:t.control,name:"name",render:({field:i})=>e.jsxs(N,{className:"w-full",children:[e.jsx(S,{children:e.jsx(C,{...i,placeholder:"Service name",autoComplete:"off",className:"bg-accent"})}),e.jsx(L,{})]})}),e.jsx(z,{loading:a,disabled:a,children:"Add service"})]})})})}function xe({className:s,...a}){return e.jsx(Ts,{"data-slot":"switch",className:m("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 inline-flex h-5 w-9 shrink-0 items-center rounded-full border-2 border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Is,{"data-slot":"switch-thumb",className:m("bg-background pointer-events-none block size-4 rounded-full ring-0 shadow-lg transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function kt({id:s,item:a,onEnabledChange:t}){const[r,{isLoading:i}]=Ma(),{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:f}=Z({id:s}),u={transform:ee.Transform.toString(d),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:c,style:u,className:m("grid grid-cols-[max-content_1fr_max-content_max-content] border rounded-md items-center gap-2 p-2",{"bg-background shadow-lg":f}),children:[e.jsx(k,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...n,...l,children:e.jsx(de,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:a.name})}),e.jsx(xe,{checked:a.enabled,onCheckedChange:o=>{t(a.id,o)}}),a.is_default?e.jsx("div",{className:"size-9"}):e.jsx(z,{loading:i,disabled:i,variant:"ghost",size:"icon",className:"hover:text-red-600",onClick:async()=>{await r({id:a.id}).unwrap(),T.success(`${a.name} successfully deleted`)},children:e.jsx(je,{})})]})}function Tt(){const{data:s,isLoading:a,isError:t}=Ea(),[r,{isLoading:i}]=La(),[n,l]=g.useState([]),[c,d]=g.useState(!1),p=se($(ce),$(oe,{coordinateGetter:le}));g.useEffect(()=>{s&&l(s)},[s]);function f(o){const{active:x,over:h}=o;if(h&&x.id!==h.id){const y=n.findIndex(b=>b.id===x.id),D=n.findIndex(b=>b.id===h.id),I=ie(n,y,D).map((b,V)=>({...b,index:V}));l(I),d(!0)}}function u(o,x){l(h=>h.map(y=>y.id===o?{...y,enabled:x}:y)),d(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:8}).map((o,x)=>e.jsx(E,{className:"h-13.5 w-full"},x))}),s&&e.jsx(ae,{sensors:p,collisionDetection:ne,onDragEnd:f,modifiers:[te],children:e.jsx(re,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(o=>e.jsx(kt,{id:o.id,item:o,onEnabledChange:u},o.id))})})}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({services:n}).unwrap(),T.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}function Gn(){return e.jsx(O,{title:"Moving Services",children:e.jsx(M,{className:"max-w-xl",children:e.jsxs(P,{className:"space-y-6",children:[e.jsx(_t,{}),e.jsx(Tt,{})]})})})}function Fe({className:s,children:a,...t}){return e.jsxs(zs,{"data-slot":"scroll-area",className:m("relative",s),...t,children:[e.jsx(Es,{"data-slot":"scroll-area-viewport",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1",children:a}),e.jsx(Se,{}),e.jsx(Ds,{})]})}function Se({className:s,orientation:a="vertical",...t}){return e.jsx(Ls,{"data-slot":"scroll-area-scrollbar",orientation:a,className:m("flex touch-none p-px transition-colors select-none",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",s),...t,children:e.jsx(Ms,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function It(s){return(s/100).toString()}function X(s){const{value:a,onValueChange:t,className:r,...i}=s,[n,l]=g.useState("0");return g.useEffect(()=>{l(It(a))},[a]),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(C,{pattern:"[0-9]+",inputMode:"numeric",value:n,onChange:c=>{const d=c.target.value.replace(/[^0-9.]/g,"");if(/^\d*\.?\d{0,2}$/.test(d)){l(d);const p=parseFloat(d)||0;t(p*100)}},className:m("pl-4",r),...i}),e.jsx("span",{className:"absolute left-2 flex bg-transparent text-sm",children:"$"})]})}function zt({id:s,item:a,onChange:t}){const[r,{isLoading:i}]=Za(),{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:f}=Z({id:s}),u={transform:ee.Transform.toString(d),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:c,style:u,className:m("grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 p-2",{"bg-background shadow-lg":f}),children:[e.jsx(k,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",...n,...l,children:e.jsx(de,{})}),e.jsx(C,{value:a.name,onChange:o=>{const x=o.target.value;t(a.id,{name:x})},name:a.name}),e.jsx(X,{value:a.price,onValueChange:o=>{t(a.id,{price:o})}}),e.jsx(xe,{checked:a.enabled,onCheckedChange:o=>{t(a.id,{enabled:o})}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(z,{disabled:i,loading:i,variant:"secondary",onClick:async()=>{await r({id:a.id}).unwrap(),T.success(`${a.name} successfully deleted`)},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"size-4"}),"Delete"]})})})]})}function Et(){const{data:s,isLoading:a,isError:t}=Ka(),[r,{isLoading:i}]=Xa(),[n,l]=g.useState([]),[c,d]=g.useState(!1),p=se($(ce),$(oe,{coordinateGetter:le}));g.useEffect(()=>{s&&l(s)},[s]);function f(o){const{active:x,over:h}=o;if(h&&x.id!==h.id){const y=n.findIndex(b=>b.id===x.id),D=n.findIndex(b=>b.id===h.id),I=ie(n,y,D).map((b,V)=>({...b,index:V}));l(I),d(!0)}}function u(o,x){l(h=>h.map(y=>y.id===o?{...y,...x}:y)),d(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch extra services"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(Fe,{className:"w-full",children:[e.jsxs("div",{className:"mb-4 grid grid-cols-[max-content_3fr_1fr_1fr_1fr] items-center gap-4 text-sm font-medium text-muted-foreground",children:[e.jsx("p",{className:"size-9"}),e.jsx("p",{children:"Service name"}),e.jsx("p",{children:"Service cost, $"}),e.jsx("p",{children:"Enable"}),e.jsx("p",{})]}),e.jsx(A,{}),a&&e.jsx(Dt,{}),s&&e.jsx(ae,{sensors:p,collisionDetection:ne,onDragEnd:f,modifiers:[te],children:e.jsx(re,{items:n,children:e.jsx("div",{className:"pt-4 min-w-[700px] space-y-2",children:n.map(o=>e.jsx(zt,{id:o.id,item:o,onChange:u},o.id))})})}),e.jsx(Se,{orientation:"horizontal"})]}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({extra_services:n}).unwrap(),d(!1),T.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}function Dt(){return e.jsx("div",{className:"space-y-4 py-6",children:Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"grid grid-cols-[max-content_3fr_1fr_1fr_1fr] gap-4",children:[e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"})]},a))})}j.object({name:j.string().min(5),price:j.number().min(1),enabled:j.boolean()});function Lt(){const[s,{isLoading:a}]=Ja(),[t,r]=g.useState(!1),i=F({defaultValues:{name:"",price:0,enabled:!0}});function n(){i.reset(),r(c=>!c)}async function l(c){await s(c).unwrap(),T.success(`${c.name} successfully added`),i.reset(),n()}return e.jsxs(W,{open:t,onOpenChange:n,children:[e.jsx(ue,{asChild:!0,className:"ml-auto",children:e.jsx(k,{size:"icon",children:e.jsx(Qe,{})})}),e.jsxs(Y,{children:[e.jsxs(K,{children:[e.jsx(J,{children:"Add extra service"}),e.jsx(me,{className:"hidden"})]}),e.jsx(q,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsx(w,{control:i.control,name:"name",render:({field:c})=>e.jsxs(N,{children:[e.jsx(_,{children:"Name"}),e.jsx(S,{children:e.jsx(C,{placeholder:"Service name",...c})})]})}),e.jsx(w,{control:i.control,name:"price",render:({field:c})=>e.jsxs(N,{children:[e.jsx(_,{children:"Price"}),e.jsx(S,{children:e.jsx(X,{name:"price",value:c.value,onValueChange:d=>{i.setValue("price",d)}})})]})}),e.jsxs(we,{children:[e.jsx(be,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:a,disabled:a,children:"Add service"})]})]})})]})]})}function Hn(){return e.jsx(O,{title:"Extra Services",children:e.jsxs(M,{className:"max-w-4xl gap-0",children:[e.jsx(Q,{className:"flex flex-row items-center",children:e.jsx(Lt,{})}),e.jsx(P,{children:e.jsx(Et,{})})]})})}function Xe({className:s,...a}){return e.jsx("textarea",{"data-slot":"textarea",className:m("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}j.object({name:j.string(),description:j.string(),labor_increase:j.number()});function Ze({data:s}){const[a,{isLoading:t}]=Qa(),[r,{isLoading:i}]=Ga(),[n,l]=g.useState(!1),c=ye(),d=!!s,p=F({defaultValues:{name:"",description:"",labor_increase:0}});g.useEffect(()=>{s&&p.reset(s)},[s]);function f(){p.reset(),l(o=>!o)}async function u(o){d?(await r({id:s.id,...o}).unwrap(),T.success("Packing successfully updated")):(await a(o).unwrap(),T.success("Packing successfully added")),p.reset(),f()}return e.jsxs(W,{open:n,onOpenChange:f,children:[e.jsx(ue,{asChild:!0,className:`${d?null:"ml-auto"}`,children:d?e.jsxs(k,{variant:"outline",className:"text-primary hover:text-primary",size:c?"icon":"default",children:[e.jsx(ve,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(k,{size:"icon",children:e.jsx(Qe,{})})}),e.jsxs(Y,{children:[e.jsxs(K,{children:[e.jsxs(J,{children:[d?"Edit":"Add"," packing service"]}),e.jsx(me,{className:"hidden"})]}),e.jsx(q,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(u),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-280px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(w,{control:p.control,name:"name",render:({field:o})=>e.jsxs(N,{children:[e.jsx(_,{children:"Name"}),e.jsx(S,{children:e.jsx(C,{...o})})]})}),e.jsx(w,{control:p.control,name:"description",render:({field:o})=>e.jsxs(N,{children:[e.jsx(_,{children:"Description"}),e.jsx(S,{children:e.jsx(Xe,{rows:16,...o})})]})}),e.jsx(w,{control:p.control,name:"labor_increase",render:({field:o})=>e.jsxs(N,{children:[e.jsx(_,{children:"Labor increse (%)"}),e.jsx(S,{children:e.jsx(C,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...o})})]})})]}),e.jsxs(we,{children:[e.jsx(be,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:t||i,disabled:t||i,children:d?"Save changes":"Add packing"})]})]})})]})]})}function Mt({item:s}){const a=ye(),[t,{isLoading:r}]=Wa(),i=s.is_default,{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:f}=Z({id:s.id}),u={transform:ee.Transform.toString(d),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{ref:i?null:c,style:u,className:m("grid grid-cols-[max-content_1fr_auto_auto] border rounded-md items-center gap-2 p-4",{"bg-background shadow-lg":f}),children:[e.jsx(k,{size:"icon",variant:"ghost",className:"flex min-w-6 cursor-grab",disabled:i,...i?{}:n,...i?{}:l,children:e.jsx(de,{})}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"truncate text-sm font-medium",children:s.name})}),e.jsx(Ze,{data:s}),i?e.jsx(k,{variant:"ghost",disabled:!0,size:a?"icon":"default",children:e.jsx("span",{className:"hidden md:inline-flex ml-4",children:"Default"})}):null,!i&&e.jsx(z,{disabled:r,loading:r,variant:"secondary",onClick:async()=>{await t({id:s.id}).unwrap(),T.success(`${s.name} successfully deleted`)},size:a?"icon":"default",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(je,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Delete"})]})})]})}function Pt(){const{data:s,isLoading:a,isError:t}=Ba(),[r,{isLoading:i}]=Ha(),[n,l]=g.useState([]),[c,d]=g.useState(!1),p=se($(ce),$(oe,{coordinateGetter:le}));g.useEffect(()=>{s&&l(s)},[s]);function f(u){const{active:o,over:x}=u;if(x&&o.id!==x.id){const h=n.findIndex(v=>v.id===o.id),y=n.findIndex(v=>v.id===x.id),D=ie(n,h,y).map((v,I)=>({...v,index:I}));l(D),d(!0)}}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch packings"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((u,o)=>e.jsx(E,{className:"h-11 w-full"},o))}),s&&e.jsx(ae,{sensors:p,collisionDetection:ne,onDragEnd:f,modifiers:[te],children:e.jsx(re,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(u=>e.jsx(Mt,{item:u},u.id))})})}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({packings:n}).unwrap(),d(!1),T.success("Changes saved")},children:"Save changes"})]})})]})}function Wn(){return e.jsx(O,{title:"Packing Services",children:e.jsxs(M,{className:"max-w-2xl",children:[e.jsx(Q,{children:e.jsx(Ze,{})}),e.jsx(P,{children:e.jsx(Pt,{})})]})})}const At=j.object({name:j.string().min(2,{message:"Truck name must be at least 2 characters"})});function $t(){const[s,{isLoading:a}]=Oa(),t=F({resolver:he(At),reValidateMode:"onChange",defaultValues:{name:""}});async function r(i){await s(i).unwrap(),T.success(`${i.name} successfully added`),t.reset()}return e.jsx(q,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(r),className:"flex gap-4",children:[e.jsx(w,{control:t.control,name:"name",render:({field:i})=>e.jsxs(N,{className:"w-full",children:[e.jsx(S,{children:e.jsx(C,{...i,placeholder:"Truck name",autoComplete:"off",className:"bg-accent"})}),e.jsx(L,{})]})}),e.jsx(z,{disabled:a,loading:a,children:"Add truck"})]})})}function Ft(){const{data:s,isLoading:a,isError:t}=Ua(),[r,{isLoading:i}]=qa(),[n,l]=g.useState([]),[c,d]=g.useState(!1);g.useEffect(()=>{s&&l(s)},[s]);async function p(){await r({trucks:n}).unwrap(),d(!1),T.success("Changes saved")}function f(u,o,x){const h=n.map(y=>y.id===u.id?{...y,[o]:x}:y);l(h),d(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch trucks"})}):e.jsxs("div",{className:"mt-6 flex flex-col gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[a&&e.jsx(e.Fragment,{children:Array.from({length:3}).map((u,o)=>e.jsx(E,{className:"h-9 w-full"},o))}),n==null?void 0:n.map((u,o)=>e.jsxs("div",{className:"grid grid-cols-[6rem_3rem_1fr] gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx(De,{className:"size-5"}),e.jsxs("span",{children:["Truck ",o+1]})]}),e.jsx(xe,{checked:u.is_active,onCheckedChange:x=>{f(u,"is_active",x)}}),e.jsx(C,{value:u.name,onChange:x=>{const h=x.target.value;f(u,"name",h)}})]},u.id))]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:p,children:"Save changes"})]})})})]})}function Yn(){return e.jsx(O,{title:"Trucks",children:e.jsx(M,{className:"max-w-xl",children:e.jsxs(P,{className:"space-y-6",children:[e.jsx($t,{}),e.jsx(Ft,{})]})})})}function pe(s,a={}){s||(s=0);const{currency:t="USD",notation:r="standard"}=a,i=typeof s=="string"?parseFloat(s)/100:s/100;return new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:r,maximumFractionDigits:2}).format(i)}function Ce(s){s=s.replace(/^#/,""),s.length===3&&(s=s.split("").map(n=>n+n).join(""));const a=parseInt(s,16),t=a>>16&255,r=a>>8&255,i=a&255;return`${t}, ${r}, ${i}`}const Re="grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 text-sm font-medium";function Kn(){const{data:s,isLoading:a}=Pe(),[t,{isLoading:r}]=Fa(),[i,n]=g.useState([]),[l,c]=g.useState(!1),[d,p]=g.useState(null);g.useEffect(()=>{s&&n(s)},[s]);function f(u){const o=i.map(x=>x.id===u.id?u:x);n(o),c(!0)}return e.jsx(O,{title:"Rates",children:e.jsxs(M,{children:[e.jsx(P,{className:"space-y-4",children:e.jsxs(Fe,{className:"w-full",children:[e.jsxs("div",{className:m("mb-4 text-muted-foreground",Re),children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:"2 movers"}),e.jsx("p",{children:"3 movers"}),e.jsx("p",{children:"4 movers"}),e.jsx("p",{children:"Extra mover"}),e.jsx("p",{children:"Extra truck"}),e.jsx("p",{children:"On/Off"}),e.jsx("p",{})]}),e.jsx(A,{}),e.jsxs("div",{className:"min-w-[900px] divide-y",children:[a&&e.jsx(Rt,{}),i==null?void 0:i.map((u,o)=>e.jsxs("div",{className:m("py-4",Re),children:[d===o?e.jsxs("div",{className:"grid grid-cols-[auto_36px] gap-2",children:[e.jsx(C,{value:u.name,onChange:x=>{f({...u,name:x.target.value})}}),e.jsx(C,{type:"color",value:u.color,onChange:x=>{f({...u,color:x.target.value})},className:"px-[2px] py-0"})]}):e.jsxs("span",{className:"flex h-9 items-center gap-2 rounded-sm px-2 py-1",style:{color:u.color,backgroundColor:`rgba(${Ce(u.color)}, 0.1)`},children:[u.name,e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:u.color}})]}),Object.keys(u.movers_rates).slice(0,3).map((x,h)=>{const y=u.movers_rates[x].hourly_rate;return d===o?e.jsx(X,{value:y,onValueChange:D=>{f({...u,movers_rates:{...u.movers_rates,[x]:{...u.movers_rates[x],hourly_rate:D}}})}},h):e.jsx("div",{children:pe(y)},h)}),e.jsx("div",{children:d===o?e.jsx(X,{value:u.extra_mover_rate,onValueChange:x=>f({...u,extra_mover_rate:x})}):pe(u.extra_mover_rate)}),e.jsx("div",{children:d===o?e.jsx(X,{value:u.extra_truck_rate,onValueChange:x=>f({...u,extra_truck_rate:x})}):pe(u.extra_truck_rate)}),e.jsx(xe,{id:u.name,checked:u.enable,disabled:u.id===1,onCheckedChange:x=>{f({...u,enable:x})}}),e.jsxs(k,{variant:"outline",onClick:()=>{p(x=>x===o?null:o)},children:[e.jsx(ve,{}),"Edit"]})]},o))]}),e.jsx(Se,{orientation:"horizontal"})]})}),e.jsx(ua,{className:"justify-end border-t pt-6",children:e.jsxs("div",{className:m("flex min-h-9 w-full gap-4 transition-opacity duration-500 sm:w-auto",{"invisible opacity-0":!l,"visible opacity-100":l}),children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{n(s),c(!1),p(null)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:r,loading:r,onClick:async()=>{await t({rates:i}).unwrap(),c(!1),p(null),T.success("Changes saved")},children:"Save changes"})]})})]})})}function Rt(){return e.jsx(e.Fragment,{children:Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr] items-center gap-4 px-1 py-4",children:[e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"}),e.jsx(E,{className:"h-9 w-full"})]},a))})}const Ut=s=>new Date(s.getFullYear(),s.getMonth()+1,0);function es({onSelectDate:s,className:a,classNames:t,showOutsideDays:r=!1,showFooter:i=!0,...n}){const{data:l,isLoading:c}=Pa(),[d,p]=g.useState(n.today??new Date),f=new Date,u=new Date;return u.setMonth(f.getMonth()+11),e.jsxs(e.Fragment,{children:[e.jsx(Ps,{month:d,onMonthChange:p,showOutsideDays:r,className:m("p-3",a),startMonth:f,endMonth:Ut(u),classNames:{month:"space-y-4",months:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 relative",month_caption:"flex justify-center pt-1 relative items-center",month_grid:"w-full border-collapse space-y-1",caption_label:"text-sm font-medium",nav:"flex items-center justify-between absolute inset-x-0",button_previous:m(B({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),button_next:m(B({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 z-10"),weeks:"w-full border-collapse space-y-",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2 gap-1",day_button:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:m(B({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),range_end:"day-range-end",selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",hidden:"invisible",...t},components:{Chevron:({...o})=>o.orientation==="left"?e.jsx(Le,{...o,className:"h-4 w-4"}):e.jsx(Na,{...o,className:"h-4 w-4"}),Day:o=>{const{day:x}=o,h=x.date;if(c)return e.jsx("td",{children:e.jsx(E,{className:"h-8 w-8 p-0"})});if(!l)return e.jsx(e.Fragment,{});const y=h.getMonth()===d.getMonth(),D=Me(h,"yyyy-MM-dd"),v=l[D],I=(v==null?void 0:v.rate)??null,b={color:"inherit",backgroundColor:"inherit",opacity:1};return v!=null&&v.is_blocked&&(b.color="black",b.backgroundColor="#dcdcdc"),I&&(b.color=I.color,b.backgroundColor=`rgba(${Ce(I==null?void 0:I.color)}, 0.1)`),y||(b.backgroundColor="#f3f3f3",b.color="#7e7e7e",b.opacity=.5),e.jsx("td",{children:e.jsx("button",{className:m(B({variant:"ghost"}),"h-8 w-8 p-0 font-semibold aria-selected:opacity-100"),disabled:!y,style:b,onClick:()=>{s(h,v)},children:h.getDate()})})}},...n}),i&&e.jsx(Ot,{})]})}es.displayName="CalendarWithRates";function Ot(){const{data:s}=Pe();return e.jsx("div",{className:"w-full border-t bg-muted",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center justify-center gap-x-4 gap-y-2 px-6 py-4 text-xs font-semibold",children:[s==null?void 0:s.map((a,t)=>e.jsx(Ye,{children:e.jsxs(ft,{delayDuration:20,children:[e.jsx(ht,{asChild:!0,className:"cursor-help",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:a.color,backgroundColor:`rgba(${Ce(a.color)}, 0.1)`},children:[a.name,e.jsx(Sa,{className:"size-4"})]},a.id)}),e.jsx(gt,{className:"min-w-60 divide-y border bg-background text-foreground shadow-lg",children:Object.keys(a.movers_rates).slice(0,3).map((r,i)=>{const n=a.movers_rates[r].hourly_rate;return e.jsxs("div",{className:"flex justify-between py-1 font-medium",children:[e.jsxs("span",{children:[r," movers & truck"]}),e.jsx("span",{children:pe(n)})]},i)})})]})},t)),e.jsxs("div",{className:"flex items-center gap-2 rounded-md px-1.5 py-1",style:{color:"#000000",backgroundColor:"#dcdcdc"},children:["Blocked",e.jsx("span",{className:"size-1.5 rounded-full",style:{backgroundColor:"#000000"}})]})]})})}function qt({className:s,...a}){return e.jsx(As,{"data-slot":"radio-group",className:m("grid gap-3",s),...a})}function Ue({className:s,...a}){return e.jsx($s,{"data-slot":"radio-group-item",className:m("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Fs,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(Ca,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Vt({isOpen:s,setIsOpen:a,calendarDayInfo:t}){const{data:r}=Pe(),[i]=Aa(),n=r==null?void 0:r.filter(o=>o.enable);if(!s&&!t)return null;const{id:l,rate:c,is_blocked:d}=t,p=(c==null?void 0:c.id)??0,f=Me(new Date(t.formated_date+"T00:00:00"),"PPP");async function u(o,x){const h={};x===0?(h.is_blocked=!0,h.rate_id=null):(h.rate_id=x,h.is_blocked=!1),await i({id:o,newData:h}).unwrap()}return e.jsx(W,{open:s,onOpenChange:a,children:e.jsxs(Y,{className:"sm:max-w-xs",children:[e.jsxs(K,{children:[e.jsx(J,{children:f}),e.jsx(me,{className:"hidden"})]}),e.jsxs(qt,{defaultValue:d?"0":p.toString(),onValueChange:o=>{u(l,parseInt(o))},className:"gap-4",children:[n==null?void 0:n.map((o,x)=>e.jsxs(ke,{htmlFor:o.id.toString(),className:"flex w-full cursor-pointer items-center gap-6 rounded-md p-3 transition-all hover:ring",style:{color:o.color,backgroundColor:`rgba(${Ce(o.color)}, 0.1)`},children:[e.jsx(Ue,{value:o.id.toString(),id:o.id.toString()}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:[o.name,e.jsx("span",{className:"size-2 rounded-full",style:{backgroundColor:o.color}})]})]},x)),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(ke,{htmlFor:"0",className:"flex w-full cursor-pointer items-center gap-6 rounded-md bg-foreground/20 p-3 text-foreground transition-all hover:ring",children:[e.jsx(Ue,{value:"0",id:"0"}),e.jsxs("span",{className:"flex flex-grow items-center gap-2",children:["Blocked",e.jsx("span",{className:"size-2 rounded-full bg-black"})]})]})})]})]})})}const Bt=()=>{const s=[],a=new Date;for(let t=0;t<=11;t++){const r=new Date(a.getFullYear(),a.getMonth()+t,1);s.push(r)}return s};function Qt(){const s=Bt(),[a,t]=g.useState(!1),[r,i]=g.useState();function n(l,c){t(!0),i(c)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid justify-items-center gap-y-6 xl:grid-cols-2",children:s.map((l,c)=>e.jsx(es,{onSelectDate:n,mode:"single",today:l,disableNavigation:!0,showFooter:!1,className:"rounded-xl border",hideNavigation:!0},c))}),r&&e.jsx(Vt,{isOpen:a,setIsOpen:t,calendarDayInfo:r})]})}function Jn(){return e.jsx(O,{title:"Calendar Rates",children:e.jsx(M,{className:"max-w-2xl",children:e.jsx(P,{className:"py-4",children:e.jsx(Qt,{})})})})}function Gt({...s}){return e.jsx(Rs,{"data-slot":"select",...s})}function Ht({...s}){return e.jsx(qs,{"data-slot":"select-value",...s})}function Wt({className:s,children:a,...t}){return e.jsxs(Us,{"data-slot":"select-trigger",className:m("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t,children:[a,e.jsx(Os,{asChild:!0,children:e.jsx(Ge,{className:"size-4 opacity-50"})})]})}function Yt({className:s,children:a,position:t="popper",...r}){return e.jsx(Vs,{children:e.jsxs(Bs,{"data-slot":"select-content",className:m("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx(Kt,{}),e.jsx(Qs,{className:m("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(Jt,{})]})})}function Oe({className:s,children:a,...t}){return e.jsxs(Gs,{"data-slot":"select-item",className:m("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Hs,{children:e.jsx(_a,{className:"size-4"})})}),e.jsx(Ws,{children:a})]})}function Kt({className:s,...a}){return e.jsx(Ys,{"data-slot":"select-scroll-up-button",className:m("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(ka,{className:"size-4"})})}function Jt({className:s,...a}){return e.jsx(Ks,{"data-slot":"select-scroll-down-button",className:m("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Ge,{className:"size-4"})})}function Xt({defaultValue:s,onValueChange:a,isPending:t,items:r,placeholder:i,disabled:n,className:l="",isControlled:c=!1}){const d=c?{value:s,onValueChange:a}:{defaultValue:s,onValueChange:a};return e.jsxs(Gt,{...d,children:[e.jsx(S,{children:e.jsx(Wt,{disabled:n,className:m(l),children:e.jsx(Ht,{placeholder:i??"Select"})})}),e.jsx(Yt,{children:t?e.jsx(Oe,{disabled:!0,value:"loading",className:"h-14",children:e.jsx(ge,{})}):r==null?void 0:r.map(({label:p,value:f})=>e.jsx(Oe,{value:f,children:p},f))})]})}const Zt="US";function ss({className:s,type:a,handleValueChange:t,...r}){const i=n=>{const l=n.target.value,c=new Ia(Zt).input(l);t(c)};return e.jsx("input",{...r,type:"tel",autoComplete:"off",inputMode:"numeric",title:"Please enter your phone number",maxLength:14,className:m("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),onChange:i})}const en=[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"},{label:"Foreman",value:"foreman"},{label:"Driver",value:"driver"},{label:"Helper",value:"helper"}],sn=j.object({first_name:j.string().min(2,{message:"First name must be at least 2 characters."}),last_name:j.string().min(2,{message:"Last name must be at least 2 characters."}),email_address:j.string().email({message:"Invalid email address."}),phone:j.string().refine(s=>He(s,"US"),{message:"Invalid phone number"}),active:j.boolean().optional(),role:j.string().optional(),password:j.string().optional()});function as({user:s,callback:a}){const[t,{isLoading:r}]=tt(),[i,{isLoading:n}]=nt(),l=F({mode:"onChange",reValidateMode:"onChange",resolver:he(sn),defaultValues:{first_name:(s==null?void 0:s.first_name)??"",last_name:(s==null?void 0:s.last_name)??"",email_address:(s==null?void 0:s.email_address)??"",phone:(s==null?void 0:s.phone)??"",role:(s==null?void 0:s.role)??"",active:(s==null?void 0:s.active)??!0,password:""}});async function c(d){if(s){const p=await t({id:(s==null?void 0:s.id)??0,data:d}).unwrap();p&&(T.success(`${p.first_name} updated successfully`),l.reset({...p,password:""}))}else{const p=await i({data:d}).unwrap();p&&(T.success(`${p.first_name} created successfully`),l.reset({...p,password:""}),a&&a())}}return e.jsx(q,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{control:l.control,name:"first_name",render:({field:d})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(_,{className:"col-span-2",children:"First Name"}),e.jsx(S,{children:e.jsx(C,{...d,autoComplete:"off",className:"col-span-4"})}),e.jsx(L,{className:"col-span-2"})]})}),e.jsx(w,{control:l.control,name:"last_name",render:({field:d})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(_,{className:"col-span-2",children:"Last Name"}),e.jsx(S,{children:e.jsx(C,{...d,autoComplete:"off",className:"col-span-4"})}),e.jsx(L,{className:"col-span-2"})]})}),e.jsx(w,{control:l.control,name:"email_address",render:({field:d})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(_,{className:"col-span-2",children:"Email"}),e.jsx(S,{children:e.jsx(C,{...d,autoComplete:"off",className:"col-span-4"})}),e.jsx(L,{className:"col-span-2"})]})}),e.jsx(w,{control:l.control,name:"phone",render:({field:d})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(_,{className:"col-span-2",children:"Phone"}),e.jsx(S,{children:e.jsx(ss,{...d,value:Ee(d.value??""),handleValueChange:d.onChange,className:"col-span-4"})}),e.jsx(L,{className:"col-span-2"})]})}),e.jsx(w,{control:l.control,name:"role",render:({field:d})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(_,{className:"col-span-2",children:"Position"}),e.jsx(Xt,{defaultValue:d.value,onValueChange:d.onChange,placeholder:"Select a role",className:"col-span-4 w-full",items:en.map(({label:p,value:f})=>({label:p,value:f}))})]})}),e.jsx(w,{control:l.control,name:"password",render:({field:d})=>e.jsxs(N,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(_,{className:"col-span-2",children:"Password"}),e.jsx(S,{children:e.jsx(C,{...d,autoComplete:"off",type:"password",className:"col-span-4"})}),e.jsx(L,{})]})}),e.jsx(w,{control:l.control,name:"active",render:({field:d})=>e.jsxs(N,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Employee is active"}),e.jsx(St,{children:"If the employee is active, they will be able to login to the system."})]}),e.jsx(S,{children:e.jsx(xe,{checked:d.value,onCheckedChange:d.onChange})})]})})]}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!l.formState.isDirty,"visible opacity-100":l.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>l.reset(),children:"Cancel"}),e.jsx(z,{type:"submit",className:"w-full sm:w-auto",disabled:r||n,loading:r||n,children:"Save changes"})]})})]})})}function an(){const[s,a]=g.useState(!1);return e.jsxs(W,{open:s,onOpenChange:a,children:[e.jsx(ue,{asChild:!0,children:e.jsx(k,{className:"ml-auto",children:"Add User"})}),e.jsxs(Y,{children:[e.jsx(K,{children:e.jsx(J,{children:"Add User"})}),e.jsx("div",{className:"pt-4",children:e.jsx(as,{callback:()=>a(!1)})})]})]})}function tn({className:s,...a}){return e.jsx(Js,{"data-slot":"tabs",className:m("flex flex-col gap-2",s),...a})}function nn({className:s,...a}){return e.jsx(Xs,{"data-slot":"tabs-list",className:m("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",s),...a})}function rn({className:s,...a}){return e.jsx(Zs,{"data-slot":"tabs-trigger",className:m("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}const ln=["all","admin","manager","foreman","driver","helper"];function on({filter:s,handleSetFilter:a}){return e.jsx(tn,{value:s,onValueChange:t=>{a(t)},children:e.jsxs(Fe,{className:"pb-2",children:[e.jsx(nn,{children:ln.map(t=>e.jsx(rn,{value:t,className:"capitalize",children:t},t))}),e.jsx(Se,{orientation:"horizontal"})]})})}const cn=ea("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function dn({className:s,...a}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:m("w-full caption-bottom text-sm",s),...a})})}function un({className:s,...a}){return e.jsx("thead",{"data-slot":"table-header",className:m("[&_tr]:border-b",s),...a})}function mn({className:s,...a}){return e.jsx("tbody",{"data-slot":"table-body",className:m("[&_tr:last-child]:border-0",s),...a})}function ts({className:s,...a}){return e.jsx("tr",{"data-slot":"table-row",className:m("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function G({className:s,...a}){return e.jsx("th",{"data-slot":"table-head",className:m("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function H({className:s,...a}){return e.jsx("td",{"data-slot":"table-cell",className:m("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function xn(s,a){return`${s.charAt(0)}${a.charAt(0)}`.toUpperCase()}function pn({users:s}){return e.jsxs(dn,{className:"min-w-[750px]",children:[e.jsx(un,{children:e.jsxs(ts,{children:[e.jsx(G,{children:"Name"}),e.jsx(G,{children:"Role"}),e.jsx(G,{children:"Phone"}),e.jsx(G,{children:"Email"}),e.jsx(G,{children:"Status"}),e.jsx(G,{className:"text-right",children:"Actions"})]})}),e.jsx(mn,{children:s.map(a=>e.jsx(fn,{user:a},a.id))})]})}function fn({user:s}){return e.jsxs(ts,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(jt,{children:e.jsx(vt,{children:xn(s.first_name,s.last_name)})}),`${s.first_name} ${s.last_name}`]}),e.jsx(H,{className:"capitalize",children:s.role}),e.jsx(H,{children:s.phone?Ee(s.phone):"-"}),e.jsx(H,{children:s.email_address}),e.jsx(H,{children:e.jsxs("span",{className:m(cn({variant:"outline"}),"relative overflow-hidden"),children:[e.jsx("span",{className:`${s.active?"bg-[#00a455]":"bg-foreground/50"} absolute inset-0 opacity-15`}),e.jsx("span",{className:`${s.active?"text-[#00a455]":"text-foreground"} capitalize`,children:s.active?"Active":"Inactive"})]})}),e.jsx(H,{className:"text-right",children:e.jsx(k,{size:"icon",variant:"outline",asChild:!0,children:e.jsx(Ie,{to:`${s.id}`,children:e.jsx(ve,{})})})})]})}function Xn(){const s=ze(),{data:a,isLoading:t}=st(),[r,i]=g.useState("all"),n=a==null?void 0:a.filter(c=>r==="all"?c:c.role===r);function l(c){i(c)}return s.id?e.jsx(Te,{}):e.jsx(O,{title:"Department",children:e.jsxs(M,{children:[e.jsx(Q,{children:e.jsx(an,{})}),e.jsxs(P,{className:"space-y-2",children:[e.jsx(on,{filter:r,handleSetFilter:l}),t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(ge,{})}),n&&e.jsx(pn,{users:n??[]})]})]})})}function Zn(){const{id:s}=ze(),{data:a,isLoading:t}=at({id:s});return e.jsxs($e,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex w-full items-center gap-4 px-4 pt-4 lg:border-none",children:[e.jsx(k,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(Ie,{to:"/crm/settings/department",children:e.jsx(Le,{})})}),e.jsx("h3",{className:"text-lg font-semibold",children:a&&`${a==null?void 0:a.first_name} ${a==null?void 0:a.last_name}`})]}),e.jsxs("div",{className:"flex h-5 px-4 space-x-2 text-muted-foreground text-sm",children:[e.jsxs("span",{children:["Employee ID: ",(a==null?void 0:a.id)??""]}),e.jsx(A,{orientation:"vertical"}),e.jsxs("span",{children:["Creation Date:"," ",a!=null&&a.created_at?Me(a==null?void 0:a.created_at,"dd MMM, yyyy"):""]})]})]}),e.jsx("div",{className:"overflow-y-auto p-4",children:e.jsx(M,{className:"max-w-2xl",children:e.jsxs(P,{children:[t&&e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(ge,{})}),a&&e.jsx(as,{user:a})]})})})]})}const hn=j.object({company_name:j.string(),company_address:j.string(),company_phone:j.string().refine(s=>He(s,"US"),{message:"Invalid phone number"}),company_email:j.string().email(),company_website:j.string()});function gn({data:s}){const[a,{isLoading:t}]=ma(),r=F({resolver:he(hn),defaultValues:{company_name:s.company_name??"",company_address:s.company_address??"",company_phone:s.company_phone??"",company_email:s.company_email??"",company_website:s.company_website??""}});async function i(n){const l=await a({data:n}).unwrap();l&&(T.success("Changes saved"),r.reset({...l}))}return e.jsx(q,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(i),className:"space-y-6",children:[e.jsx(w,{control:r.control,name:"company_name",render:({field:n})=>e.jsxs(N,{children:[e.jsx(_,{children:"Company name"}),e.jsx(S,{children:e.jsx(C,{...n,autoComplete:"off"})}),e.jsx(L,{})]})}),e.jsx(w,{control:r.control,name:"company_address",render:({field:n})=>e.jsxs(N,{children:[e.jsx(_,{children:"Company address"}),e.jsx(S,{children:e.jsx(C,{...n,autoComplete:"off"})}),e.jsx(L,{})]})}),e.jsx(w,{control:r.control,name:"company_phone",render:({field:n})=>e.jsxs(N,{children:[e.jsx(_,{children:"Company phone"}),e.jsx(S,{children:e.jsx(ss,{...n,value:Ee(n.value??""),handleValueChange:n.onChange})}),e.jsx(L,{})]})}),e.jsx(w,{control:r.control,name:"company_email",render:({field:n})=>e.jsxs(N,{children:[e.jsx(_,{children:"Company email"}),e.jsx(S,{children:e.jsx(C,{...n,autoComplete:"off"})}),e.jsx(L,{})]})}),e.jsx(w,{control:r.control,name:"company_website",render:({field:n})=>e.jsxs(N,{children:[e.jsx(_,{children:"Company website"}),e.jsx(S,{children:e.jsx(C,{...n,autoComplete:"off"})}),e.jsx(L,{})]})}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!r.formState.isDirty,"visible opacity-100":r.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>r.reset(),children:"Cancel"}),e.jsx(z,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})]})})}j.object({image:j.instanceof(File).nullable()});function jn(s){const a=s.target.files&&s.target.files[0],t=a?URL.createObjectURL(a):"";return{file:a,displayUrl:t}}function vn(){const{data:s}=Be(),[a,{isLoading:t}]=xa(),[r,i]=g.useState(null),n=F({defaultValues:{image:null}});async function l(c){await a({image:c.image}).unwrap(),T.success("Changes saved"),n.reset()}return g.useEffect(()=>{s&&i(s.company_logo)},[s]),e.jsx(q,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(l),className:"space-y-6",children:[e.jsx(w,{control:n.control,name:"image",render:({field:{value:c,onChange:d,...p}})=>e.jsxs(N,{children:[e.jsx(_,{children:"Logo"}),e.jsx(S,{children:e.jsx(C,{...p,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:f=>{const{file:u,displayUrl:o}=jn(f);i(o),d(u)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:r&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:r,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!n.formState.isDirty,"visible opacity-100":n.formState.isDirty}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{i((s==null?void 0:s.company_logo)||null),n.reset()},children:"Cancel"}),e.jsx(z,{type:"submit",className:"w-full sm:w-auto",disabled:t,loading:t,children:"Save changes"})]})})]})})}function er(){const{data:s,isLoading:a}=Be();return e.jsx(O,{title:"Company",children:a?e.jsx("div",{className:"flex h-96 max-w-xl items-center justify-center",children:e.jsx(ge,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(M,{className:"max-w-xl",children:[e.jsx(Q,{children:e.jsx(fe,{children:"Company Information"})}),e.jsx(P,{children:e.jsx(gn,{data:s})})]}),e.jsxs(M,{className:"max-w-xl",children:[e.jsx(Q,{children:e.jsx(fe,{children:"Branding"})}),e.jsx(P,{children:e.jsx(vn,{})})]})]})})}function yn({value:s,onChange:a}){const{data:t}=Ae();if(!t)return null;const r=(i,n,l)=>{const c=s.map((d,p)=>d.map((f,u)=>p===i&&u===n?l:f));a(c)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col rounded-md overflow-hidden border",children:[e.jsx("div",{className:"bg-slate-900 text-white text-center p-1.5 font-semibold text-sm",children:"TO STAIRS"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"bg-slate-900 text-white p-4 flex flex-col items-center justify-center w-8",children:e.jsx("div",{className:"transform -rotate-90 whitespace-nowrap font-semibold text-sm",children:"FROM STAIRS"})}),e.jsxs("div",{className:"bg-background p-4 flex-1",children:[e.jsxs("div",{className:"grid mb-4",style:{gridTemplateColumns:`repeat(${t.length+1}, 1fr)`},children:[e.jsx("div",{}),t.map((i,n)=>e.jsx("div",{className:"flex items-center justify-center text-muted-foreground font-medium text-sm",children:i.name.slice(0,3)},`col-${n}`))]}),e.jsx("div",{className:"grid gap-2",children:t.map((i,n)=>e.jsxs("div",{className:"grid gap-2 items-center",style:{gridTemplateColumns:`repeat(${t.length+1}, 1fr)`},children:[e.jsx("div",{className:"text-muted-foreground text-sm font-medium text-center",children:i.name.slice(0,3)}),t.map((l,c)=>e.jsx(C,{name:`cell-${n}-${c}`,type:"number",className:"w-full p-0 text-center",inputMode:"numeric",value:s[n][c],onChange:d=>r(n,c,Number(d.target.value))},`cell-${n}-${c}`))]},`row-${n}`))})]})]})]})})}function bn({...s}){return e.jsx(sa,{"data-slot":"alert-dialog",...s})}function wn({...s}){return e.jsx(aa,{"data-slot":"alert-dialog-trigger",...s})}function Nn({...s}){return e.jsx(la,{"data-slot":"alert-dialog-portal",...s})}function Sn({className:s,...a}){return e.jsx(oa,{"data-slot":"alert-dialog-overlay",className:m("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function Cn({className:s,...a}){return e.jsxs(Nn,{children:[e.jsx(Sn,{}),e.jsx(ta,{"data-slot":"alert-dialog-content",className:m("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a})]})}function _n({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:m("flex flex-col gap-2 text-center sm:text-left",s),...a})}function kn({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:m("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function Tn({className:s,...a}){return e.jsx(na,{"data-slot":"alert-dialog-title",className:m("text-lg font-semibold",s),...a})}function In({className:s,...a}){return e.jsx(ra,{"data-slot":"alert-dialog-description",className:m("text-muted-foreground text-sm",s),...a})}function zn({className:s,...a}){return e.jsx(ia,{className:m(B({variant:"outline"}),s),...a})}const qe=[[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,3,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2],[2,2,2,2,2,2,2]];function En(s,a){const t=s.length,r=s[0].length,i=a.length,n=a[0].length,l=[];for(let c=0;c<i;c++){l[c]=[];for(let d=0;d<n;d++)c<t&&d<r?l[c][d]=s[c][d]:l[c][d]=2}return l}j.object({name:j.string(),description:j.string(),dispersion:j.number(),truck_count:j.number(),volume:j.number(),weight:j.number(),crew_size_settings:j.array(j.array(j.number())),image:j.instanceof(File)});function Dn(s){const a=s.target.files&&s.target.files[0],t=a?URL.createObjectURL(a):"";return{file:a,displayUrl:t}}function ns({data:s}){const{data:a}=Ae(),[t,{isLoading:r}]=lt(),[i,{isLoading:n}]=ot(),[l,{isLoading:c}]=dt(),[d,p]=g.useState(!1),f=ye(),u=!!s,[o,x]=g.useState(null),h=F({defaultValues:{name:"",description:"",dispersion:0,truck_count:0,volume:0,weight:0,crew_size_settings:qe,image:void 0}});g.useEffect(()=>{s&&(h.reset({name:s.name,description:s.description,dispersion:s.dispersion,truck_count:s.truck_count,volume:s.volume,weight:s.weight,crew_size_settings:s.crew_size_settings.length>0?s.crew_size_settings:qe}),x(s.image_url))},[s]);function y(){h.reset(),p(v=>!v)}async function D(v){u?(await i({id:s.id,...v}).unwrap(),T.success("Changes successfully saved")):(await t(v).unwrap(),T.success("Move size successfully added")),h.reset(),y()}return e.jsxs(W,{open:d,onOpenChange:y,children:[e.jsx(ue,{asChild:!0,className:`${u?null:"ml-auto"}`,children:u?e.jsxs(k,{variant:"outline",className:"text-primary hover:text-primary",size:f?"icon":"default",children:[e.jsx(ve,{}),e.jsx("span",{className:"hidden md:inline-flex",children:"Edit"})]}):e.jsx(k,{children:"Add move size"})}),e.jsxs(Y,{children:[e.jsxs(K,{children:[e.jsxs(J,{children:[u?"Edit":"Add"," move size"]}),e.jsx(me,{className:"hidden"})]}),e.jsx(q,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(D),className:"space-y-4",children:[e.jsxs("div",{className:"-mx-6 max-h-[calc(100vh-280px)] overflow-y-auto px-6 pb-4 space-y-4",children:[e.jsx(w,{control:h.control,name:"image",render:({field:{value:v,onChange:I,...b}})=>e.jsxs(N,{children:[e.jsx(_,{children:"Image"}),e.jsx(S,{children:e.jsx(C,{...b,placeholder:"Image",type:"file",accept:"image/png, image/jpeg",multiple:!1,onChange:V=>{const{file:rs,displayUrl:is}=Dn(V);x(is),I(rs)}})})]})}),e.jsx("div",{className:"flex justify-center items-center",children:o&&e.jsx("div",{className:"relative size-40 p-1 rounded-md border-2 border-dashed",children:e.jsx("img",{src:o,alt:"Company logo",className:"h-full w-full rounded-md object-contain"})})}),e.jsx(w,{control:h.control,name:"name",render:({field:v})=>e.jsxs(N,{children:[e.jsx(_,{children:"Name"}),e.jsx(S,{children:e.jsx(C,{...v,autoComplete:"off"})})]})}),e.jsx(w,{control:h.control,name:"description",render:({field:v})=>e.jsxs(N,{children:[e.jsx(_,{children:"Description"}),e.jsx(S,{children:e.jsx(Xe,{...v,rows:16,autoComplete:"off"})})]})}),e.jsx(w,{control:h.control,name:"dispersion",render:({field:v})=>e.jsxs(N,{children:[e.jsx(_,{children:"Dispersion %"}),e.jsx(S,{children:e.jsx(C,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...v})})]})}),e.jsx(w,{control:h.control,name:"truck_count",render:({field:v})=>e.jsxs(N,{children:[e.jsx(_,{children:"Trucks count for this size"}),e.jsx(S,{children:e.jsx(C,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...v})})]})}),e.jsx(w,{control:h.control,name:"volume",render:({field:v})=>e.jsxs(N,{children:[e.jsx(_,{children:"Volume"}),e.jsx(S,{children:e.jsx(C,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...v})})]})}),e.jsx(w,{control:h.control,name:"weight",render:({field:v})=>e.jsxs(N,{children:[e.jsx(_,{children:"Weight"}),e.jsx(S,{children:e.jsx(C,{type:"number",pattern:"[0-9]+",inputMode:"numeric",...v})})]})}),e.jsx(w,{control:h.control,name:"crew_size_settings",render:({field:v})=>e.jsxs(N,{children:[e.jsx("p",{className:"text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",children:"Crew size settings"}),e.jsx(S,{children:e.jsx(yn,{value:En(v.value,Array((a==null?void 0:a.length)??0).fill(null).map(()=>Array((a==null?void 0:a.length)??0).fill(2))),onChange:v.onChange})})]})})]}),e.jsxs(we,{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{children:u&&e.jsxs(bn,{children:[e.jsx(wn,{asChild:!0,children:e.jsx(k,{variant:"outline",className:"mt-2 sm:mt-0 w-full",children:"Delete"})}),e.jsxs(Cn,{children:[e.jsxs(_n,{children:[e.jsx(Tn,{children:"Are you absolutely sure?"}),e.jsx(In,{children:"Are you sure you want to delete this move size?"})]}),e.jsxs(kn,{children:[e.jsx(zn,{children:"No, cancel"}),e.jsx(z,{type:"button",loading:c,disabled:c,className:"mt-2 sm:mt-0",onClick:async()=>{await l({id:s==null?void 0:s.id}).unwrap(),T.success("Move size successfully deleted"),y()},children:"Yes, delete"})]})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(be,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:r||n,disabled:r||n,children:u?"Save changes":"Add move size"})]})]})]})})]})]})}function Ln({item:s}){const{attributes:a,listeners:t,setNodeRef:r,transform:i,transition:n,isDragging:l}=Z({id:s.id}),c={transform:ee.Transform.toString(i),transition:n,zIndex:l?1e3:"auto",position:l?"relative":"static"};return e.jsxs("div",{className:"flex items-center gap-2",ref:r,style:c,children:[e.jsx(de,{className:"size-5 min-w-5 cursor-grab text-muted-foreground",...a,...t}),e.jsx("div",{className:"@container w-full",children:e.jsxs("div",{className:m("grid w-full grid-cols-[max-content_1fr_max-content] @lg:grid-cols-9 border rounded-md items-center gap-4 p-4",{"bg-background shadow-lg":l}),children:[e.jsx("div",{children:e.jsx("img",{src:s.image_url??"https://www.thehighlands.org/sites/default/files/styles/hero/public/one-bedroom-3d.png?itok=1Y5yuPSu",alt:s.name,className:"size-10 object-cover"})}),e.jsxs("div",{className:"overflow-hidden @lg:col-span-4",children:[e.jsx("p",{className:"truncate font-semibold",children:s.name}),e.jsx("p",{className:"truncate text-sm",children:s.description})]}),e.jsxs("div",{className:"hidden @lg:flex @lg:col-span-2 gap-4",children:[e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(De,{className:"size-4"}),e.jsx("p",{className:"truncate text-sm font-medium",children:s.truck_count??1})]}),e.jsxs("div",{className:"items-center flex gap-2 text-muted-foreground",children:[e.jsx(Ta,{className:"size-4"}),e.jsxs("p",{className:"truncate text-sm font-medium",children:[s.volume||100," cbf"]})]})]}),e.jsx("div",{className:"flex justify-end @lg:col-span-2",children:e.jsx(ns,{data:s})})]})})]})}function Mn(){const{data:s,isLoading:a,isError:t}=it(),[r,{isLoading:i}]=ct(),[n,l]=g.useState([]),[c,d]=g.useState(!1),p=se($(ce),$(oe,{coordinateGetter:le}));g.useEffect(()=>{s&&l(s)},[s]);function f(u){const{active:o,over:x}=u;if(x&&o.id!==x.id){const h=n.findIndex(I=>I.id===o.id),y=n.findIndex(I=>I.id===x.id),v=ie(n,h,y).map((I,b)=>({...I,index:b}));l(v),d(!0)}}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch move sizes"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((u,o)=>e.jsx(E,{className:"h-19.5 w-full"},o))}),s&&e.jsx(ae,{sensors:p,collisionDetection:ne,onDragEnd:f,modifiers:[te],children:e.jsx(re,{items:n,children:e.jsx("div",{className:"space-y-2",children:n.map(u=>e.jsx(Ln,{item:u},u.id))})})}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{const u=n.map(({id:o,index:x})=>({id:o,index:x}));await r({moveSizes:u}).unwrap(),T.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}j.object({name:j.string().min(5),form_name:j.string().min(1)});function Pn(){const[s,{isLoading:a}]=mt(),[t,r]=g.useState(!1),i=F({defaultValues:{name:"",form_name:""}});function n(){i.reset(),r(c=>!c)}async function l(c){await s(c).unwrap(),T.success(`${c.name} successfully added`),i.reset(),n()}return e.jsxs(W,{open:t,onOpenChange:n,children:[e.jsx(ue,{asChild:!0,className:"ml-auto",children:e.jsx(k,{children:"Add stairs"})}),e.jsxs(Y,{children:[e.jsxs(K,{children:[e.jsx(J,{children:"Add stairs"}),e.jsx(me,{className:"hidden"})]}),e.jsx(q,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsx(w,{control:i.control,name:"name",render:({field:c})=>e.jsxs(N,{children:[e.jsx(_,{children:"Name"}),e.jsx(S,{children:e.jsx(C,{placeholder:"Name",...c})})]})}),e.jsx(w,{control:i.control,name:"form_name",render:({field:c})=>e.jsxs(N,{children:[e.jsx(_,{children:"Form name"}),e.jsx(S,{children:e.jsx(C,{placeholder:"Form name",...c})})]})}),e.jsxs(we,{children:[e.jsx(be,{children:"Cancel"}),e.jsx(z,{type:"submit",loading:a,disabled:a,children:"Add service"})]})]})})]})]})}function An({item:s,onChange:a}){const[t,{isLoading:r}]=pt(),i=ye(),{attributes:n,listeners:l,setNodeRef:c,transform:d,transition:p,isDragging:f}=Z({id:s.id}),u={transform:ee.Transform.toString(d),transition:p,zIndex:f?1e3:"auto",position:f?"relative":"static"};return e.jsxs("div",{className:"flex items-center gap-2",ref:c,style:u,children:[e.jsx(de,{className:"size-5 min-w-5 cursor-grab text-muted-foreground",...n,...l}),e.jsxs("div",{className:m("grid auto-cols-auto grid-flow-col gap-2",{"bg-background":f}),children:[e.jsx(C,{type:"text",value:s.name,onChange:o=>{a(s.id,{name:o.target.value})}}),e.jsx(C,{type:"text",value:s.form_name,onChange:o=>{a(s.id,{form_name:o.target.value})}}),e.jsx(z,{loading:r,disabled:r,variant:"secondary",size:i?"icon":"default",onClick:()=>{t({id:s.id})},children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"size-4"}),i?null:"Delete"]})})]})]})}function $n(){const{data:s,isLoading:a,isError:t}=Ae(),[r,{isLoading:i}]=xt(),[n,l]=g.useState([]),[c,d]=g.useState(!1),p=se($(ce),$(oe,{coordinateGetter:le}));g.useEffect(()=>{s&&l(s)},[s]);function f(o){const{active:x,over:h}=o;if(h&&x.id!==h.id){const y=n.findIndex(b=>b.id===x.id),D=n.findIndex(b=>b.id===h.id),I=ie(n,y,D).map((b,V)=>({...b,index:V}));l(I),d(!0)}}function u(o,x){l(h=>h.map(y=>y.id===o?{...y,...x}:y)),d(!0)}return t?e.jsx("div",{className:"flex w-full items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Failed to fetch stairs"})}):e.jsxs("div",{className:"flex flex-col gap-6",children:[a&&e.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((o,x)=>e.jsx(E,{className:"h-9"},x))}),s&&e.jsx(ae,{sensors:p,collisionDetection:ne,onDragEnd:f,modifiers:[te],children:e.jsx(re,{items:n,children:e.jsx("div",{className:"space-y-4",children:n.map(o=>e.jsx(An,{item:o,onChange:u},o.id))})})}),e.jsx(A,{}),e.jsx("div",{className:m("flex transition-opacity duration-500 sm:justify-end",{"invisible opacity-0":!c,"visible opacity-100":c}),children:e.jsxs("div",{className:"flex min-h-9 w-full gap-4 sm:w-auto",children:[e.jsx(k,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>{l(s),d(!1)},children:"Cancel"}),e.jsx(z,{type:"button",className:"w-full sm:w-auto",disabled:i,loading:i,onClick:async()=>{await r({entranceTypes:n}).unwrap(),T.success("Changes saved"),d(!1)},children:"Save changes"})]})})]})}function sr(){return ze().id?e.jsx(Te,{}):e.jsx(O,{title:"Calculator",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(M,{className:"max-w-3xl",children:[e.jsxs(Q,{className:"flex flex-row justify-between",children:[e.jsx(fe,{children:"Move Size"}),e.jsx(ns,{})]}),e.jsx(P,{children:e.jsx(Mn,{})})]}),e.jsxs(M,{className:"max-w-3xl",children:[e.jsxs(Q,{className:"flex flex-row justify-between",children:[e.jsx(fe,{children:"Stairs"}),e.jsx(Pn,{})]}),e.jsx(P,{children:e.jsx($n,{})})]})]})})}export{jt as A,Jn as C,W as D,Hn as E,Gn as M,Wn as P,Kn as R,A as S,Ye as T,Zn as U,et as a,Ya as b,We as c,ft as d,ut as e,ht as f,gt as g,vt as h,Ea as i,K as j,J as k,me as l,rt as m,Y as n,Yn as o,Va as p,Xn as q,$a as r,za as s,Ra as t,ye as u,er as v,sr as w,Qn as x};
